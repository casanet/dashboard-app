{"version":3,"sources":["components/AlertDialog.tsx","components/global/ThemeSwitch.tsx","components/NoContent.tsx","components/layouts/PageLayout.tsx","logic/common/minionsUtils.ts","components/minions/MinionPowerToggle.tsx","components/minions/overviewMinionsStatus/AcMode.tsx","theme/icons/fanHigh.svg","theme/icons/fanMed.svg","theme/icons/fanLow.svg","components/minions/overviewMinionsStatus/AcSpeed.tsx","theme/icons/on.svg","components/minions/overviewMinionsStatus/RollerDir.tsx","theme/icons/off.svg","components/minions/overviewMinionsStatus/SwitchMode.tsx","components/minions/overviewMinionsStatus/MinionStatusOverview.tsx","components/minions/MinionIndicators.tsx","components/minions/MinionOverview.tsx","components/minions/MinionEditableName.tsx","components/minions/editMinionStatus/AcEditStatus.tsx","components/minions/editMinionStatus/SwitchEditStatus.tsx","components/minions/editMinionStatus/ToggleEditStatus.tsx","components/minions/editMinionStatus/LightEditStatus.tsx","components/minions/editMinionStatus/RollerEditStatus.tsx","components/minions/editMinionStatus/CleanerEditStatus.tsx","components/minions/editMinionStatus/MinionEditStatus.tsx","services/timings.service.ts","components/timings/TimingOverview.tsx","components/timings/TimingOverviewControls.tsx","components/timings/TimingEdit.tsx","logic/common/timingsUtils.ts","components/timings/CreateTiming.tsx","components/timings/EditTimingProps.tsx","components/timings/MinionTimingsView.tsx","components/minions/MinionTechInfo.tsx","services/minions.kinds.service.ts","components/minions/advancedSettings/MinionAutoTurnOff.tsx","components/minions/advancedSettings/MinionSync.tsx","components/minions/advancedSettings/MinionFetchCommands.tsx","components/minions/advancedSettings/MinionRecordCommandCommands.tsx","components/minions/advancedSettings/MinionAdvancedSettings.tsx","components/minions/MinionBottomControls.tsx","components/minions/MinionFullInfo.tsx","components/minions/CreateMinion.tsx","pages/dashboard-pages/Minions.tsx"],"names":["Transition","React","props","ref","direction","AlertDialog","open","onSubmit","onCancel","submitText","cancelText","text","title","submitColor","TransitionComponent","keepMounted","onClose","id","variant","onClick","color","useStyles","makeStyles","theme","track","backgroundColor","palette","grey","ThemeSwitch","classes","useTheme","type","checked","undefined","NoContent","desktopMode","useMediaQuery","breakpoints","up","Icon","message","fontRatio","style","width","height","textAlign","container","justifyContent","alignItems","fontSize","getModeColor","marginTop","PageLayout","largeDesktopMode","className","showSideInfo","children","elevation","sideInfo","mapMinionTypeToDisplay","MinionTypes","Toggle","Switch","AirConditioning","Light","TemperatureLight","ColorLight","Cleaner","Roller","msToHMS","timeMs","seconds","Math","floor","minutes","hours","HMStoMs","hms","defaultMinionStatus","minionType","minionStatus","toggle","status","SwitchOptions","Off","switch","airConditioning","On","fanStrength","FanStrengthOptions","Auto","mode","ACModeOptions","Cold","temperature","light","brightness","temperatureLight","colorLight","red","green","blue","roller","RollerDirection","Down","cleaner","fanSpeed","CleanerMode","Clean","isOnMode","MinionPowerToggle","t","useTranslation","useState","loading","setLoading","minion","isOn","a","clonedeep","ApiFacade","MinionsApi","setMinion","minionId","minionsService","updateMinion","handleServerRestError","powerIconColor","e","persist","nativeEvent","stopImmediatePropagation","stopPropagation","ThemeTooltip","disableFocusListener","IconButton","padding","disabled","AcMode","ModeIcon","AcUnitIcon","WavesIcon","transform","_g","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgFanHigh","_ref","svgRef","titleId","xmlns","stroke","d","ForwardRef","SvgFanMed","SvgFanLow","AcSpeed","speed","SpeedIcon","FanHighIcon","High","Med","FanMedIcon","Low","FanLowIcon","SvgIcon","component","viewBox","RollerDir","Up","ArrowCircleUpIcon","ArrowCircleDownIcon","SvgOn","SvgOff","SwitchMode","OnIcon","OffIcon","OVERVIEW_ITEM_SIZE_FACTOR","SwitchOverview","Grid","CleanerOverview","RollerOverview","ColorLightOverview","LightOverview","TemperatureLightOverview","hideBrightness","Typography","margin","smallFontRatio","AirConditioningOverview","MinionStatusOverview","showSwitches","MinionIndicators","indicatorsStyle","syncOn","calibration","calibrationCycleMinutes","isProperlyCommunicated","enterDelay","calibrationMode","CalibrationMode","AUTO","LOCKON","LOCKOFF","SHABBAT","MinionOverview","useParams","history","useHistory","push","DashboardRoutes","minions","path","ratio","verySmallFontRatio","smallFontSize","subTitleColor","A200","autoOff","minionAutoTurnOffMS","name","maxWidth","MinionEditableName","editNameMode","setEditNameMode","editingName","setEditingName","editNameError","setEditNameError","editName","setEditName","renameMinion","TextField","error","value","onChange","CircularProgress","size","thickness","EditAirConditioning","nextMode","setMinionStatus","nextFan","movTemperatureStep","tempStep","fanOptions","ToggleButton","ToggleButtonGroup","orientation","exclusive","v","changeMode","Hot","changeFan","reverse","SwitchEditStatus","changeStatus","ToggleEditStatus","switchOptions","presentsMarks","label","ColorLightEditStatus","useColor","setColor","useEffect","toColor","r","g","b","rgb","TemperatureLightEditStatus","onMouseUp","commitColor","c","changeColor","hideHSV","hideHEX","hideRGB","dark","tempSlide","setTempSlide","changeTemperature","LightEditStatus","minWidth","Stack","spacing","Slider","marks","min","max","onChangeCommitted","event","newValue","brightSlide","setBrightSlide","changeBrightness","RollerEditStatus","changeDirection","CleanerEditStatus","MinionEditStatus","timingsService","timingsServerFeed","timingFeedEvent","data","timingFeed","JSON","parse","console","log","stringify","timing","timingIndex","_data","findIndex","m","timingId","postNewData","splice","timingsFetchFunc","TimingsApi","getTimings","close","EventSource","envFacade","apiUrl","API_KEY_HEADER","sessionManager","getToken","withCredentials","onmessage","onTimingsFeedUpdate","DataService","daysOptions","DaysOptions","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","DailySunTriggerOverview","dailySunTrigger","timingProperties","SubEventIcon","sunTrigger","SunTriggerOptions","Sunrise","WbTwilightIcon","ModeNightIcon","marginBottom","abs","durationMinutes","relation","marginLeft","days","DailyTimeTriggerOverview","dailyTimeTrigger","hour","padStart","OnceTimingOverview","onceTiming","once","triggerTime","Date","date","getHours","getMinutes","toLocaleDateString","TimeoutTimingOverview","isPassed","setIsPassed","triggerIn","setTriggerIn","timeoutTiming","timeout","intervalHandler","setInterval","now","Duration","FromMilliseconds","getTime","durationInMinutes","FromMinutes","triggerDate","startDate","add","calcTriggerIn","subtract","equals","calcIsPassed","compareTo","clearInterval","TimeoutIcon","TimerOffIcon","TimerIcon","displayDuration","Milliseconds","TimingOverview","timingType","TimingTypes","DailySunTrigger","DailyTimeTrigger","Once","Timeout","TimingOverviewControls","settingActive","setSettingActive","deleting","setDeleting","openDeleteModel","setOpenDeleteModel","editMode","editedTiming","isActive","setTiming","updateTiming","deleteTiming","changeTimingActive","setEditMode","DailySunTriggerEdit","setSunTrigger","setDays","setDurationMinutes","durationInputValue","setDurationInputValue","sendTimingProperties","setTimingProperties","Sunset","InputLabelProps","shrink","rawValue","newDuration","parseInt","isNaN","newDays","includes","filter","DailyTimeTriggerEdit","time","setTime","LocalizationProvider","dateAdapter","AdapterDateFns","locale","frLocale","TimePicker","newTime","renderInput","params","OnceTimingEdit","minHeight","DateTimePicker","TimeoutTimingEdit","setValue","setDurationInMinutes","inputProps","TimingEdit","mapTimingsTypeToDisplay","defaultTimingProperties","FromDays","CreateTiming","creating","setCreating","setTimingType","createTiming","timingName","triggerDirectAction","forceFetchData","onDone","newTimingType","Button","LoadingButton","loadingPosition","EditTimingProps","editing","setEditing","PROPERTIES_OPEN_ANIMATION_DURATION","FromSeconds","MinionTimingsView","minionTimings","setMinionTimings","showAddTiming","setShowAddTiming","showEditTimingId","setShowEditTimingId","minionsDetacher","attachDataSubs","timings","DEFAULT_FONT_RATION","map","display","Collapse","in","Divider","flexItem","startIcon","MinionInfoLine","hint","MinionTechInfo","device","pysicalDevice","model","brand","ip","mac","vendor","minionsKindsService","DevicesApi","getDevicesKinds","MinionAutoTurnOff","saving","setSaving","turnOffIn","setTurnOffIn","setAutoTurnOff","duration","setMinionTimeout","setAutoTurnOffMS","isOff","helperText","newTurnOff","MinionSync","syncMinutes","setSyncMinutes","setCalibration","setMinionCalibration","setMinionCalibrate","Minutes","calibrationModeStyle","MinionFetchCommands","fetching","setFetching","success","setSuccess","applying","setApplying","setMessage","commandsSet","setCommandsSet","selectedCommandsSet","setSelectedCommandsSet","RFApi","getCommandsRepoAvailableDevices","minionAvailableCommands","category","sort","fetchDeviceCommandsToMinion","setTimeout","DEFAULT_SUCCEED_ICON_SHOWN","Autocomplete","options","getOptionLabel","option","clearText","closeText","noOptionsText","o","placeholder","MinionRecordCommandCommands","recordMinionStatus","setRecordMinionStatus","recordingSuccess","setRecordingSuccess","generatingSuccess","setGeneratingSuccess","recording","setRecording","generating","setGenerating","recordMinionCommand","generateMinionCommand","disableActions","MinionAdvancedSettings","isFetchCommandsAvailable","setIsFetchCommandsAvailable","isRecordingSupported","setIsRecordingSupported","getData","devicesKind","find","MinionBottomControls","room","redoingStatus","setRedoingStatus","refreshStatus","setRefreshStatus","rescanMinionStatus","DEFAULT_FONT_SIZE","SIDE_CONTAINER_DEFAULT_FONT_SIZE","MinionFullInfo","openDeleteAlert","setOpenDeleteAlert","deleteMinion","minionStatusToSet","LinearProgress","Accordion","AccordionSummary","expandIcon","AccordionDetails","Box","sx","sortDevicesFormula","compareIpByDevicePart","CreateMinionInput","CreateMinion","minionsKindsTree","setMinionsKindsTree","devices","setDevices","setName","nameError","setNameError","setBrand","brandError","setBrandError","setModel","modelError","setModelError","setDevice","deviceError","setDeviceError","deviceId","setDeviceId","deviceIdError","setDeviceIdError","token","setToken","tokenError","setTokenError","validateInputs","validated","deviceKind","isIdRequired","isTokenRequired","createMinion","supportedMinionType","devicesService","sortedDevices","minionsKinds","minionsKindsBuilder","minionsKind","selectedMinionKind","maxHeight","overflowY","overflowX","Trans","i18nKey","Link","marginRight","href","SERVER_REPO_URL","Minions","location","useLocation","useData","getLocalStorageItem","LocalStorageKey","MinionsCardRatio","itemType","sizeRatio","setSizeRatio","filteredMinions","setFilteredMinion","applyNewSizeRation","newRation","setLocalStorageItem","searchString","searchText","trim","toLowerCase","calcMinionsFilter","calcRationPercents","calculatedWidth","calculatedHeight","selectedMinion","showMinionFullInfo","showCreateMinion","pathname","CREATE_MINION_PATH","minionSideContainer","Loader","WbIncandescentIcon","SideInfo","Paper","GRID_CARDS_RATION_STEP"],"mappings":"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","file":"static/js/12.97bb1016.chunk.js","sourcesContent":["import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Slide } from '@material-ui/core';\nimport MuiButton from \"@mui/material/Button\";\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport * as React from 'react';\n\nconst Transition = React.forwardRef(function Transition(\n  props: TransitionProps & {\n    children?: React.ReactElement<any, any>;\n  },\n  ref: React.Ref<unknown>,\n) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\ninterface AlertDialogProps {\n\ttitle: string;\n\ttext?: string;\n\tsubmitText: string;\n\tcancelText: string;\n\topen: boolean;\n\tonSubmit: () => void;\n\tonCancel: () => void;\n\tsubmitColor?: \"inherit\" | \"error\" | \"primary\" | \"secondary\" | \"success\" | \"info\" | \"warning\" | undefined;\n}\n\nexport function AlertDialog(props: AlertDialogProps) {\n  const { open, onSubmit, onCancel, submitText, cancelText, text, title, submitColor } = props;\n\n  return (\n    <div>\n      <Dialog\n        open={open}\n        TransitionComponent={Transition}\n        keepMounted\n        onClose={onCancel}\n        aria-describedby=\"alert-dialog-slide-description\"\n      >\n        <DialogTitle>{title}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-slide-description\">\n            {text}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={onCancel}>{cancelText}</Button>\n          <MuiButton variant=\"contained\" color={submitColor} onClick={onSubmit}>{submitText}</MuiButton>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}","import { makeStyles, Theme, useTheme } from \"@material-ui/core\";\nimport Switch, { SwitchProps } from \"@mui/material/Switch\";\n\nconst useStyles = makeStyles((theme: Theme) => ({\n\ttrack: {\n\t\tbackgroundColor: `${theme.palette.grey[400]} !important`, // Used only for light mode, when the active is off, need to override the track color\n\t},\n}));\n\n/**\n * MUI  Switch with adaption to the dashboard's theme.\n */\nexport function ThemeSwitch(props: SwitchProps) {\n\tconst classes = useStyles();\n\tconst theme = useTheme();\n\n\treturn <Switch {...props} classes={{\n\t\t// Override the track color in light and inactive mode only\n\t\ttrack: theme.palette.type === 'light' && !props.checked ? classes.track : undefined\n\t}} />;\n}\n","import { Grid, Theme, Typography, useMediaQuery, useTheme } from \"@material-ui/core\";\nimport { getModeColor } from \"../logic/common/themeUtils\";\n\ninterface NoContentProps {\n\tfontRatio?: number;\n\tIcon: any;\n\tmessage: string;\n}\n\n/**\n * Generic 'no content' component to show for empty pages\n */\nexport function NoContent(props: NoContentProps) {\n\tconst theme = useTheme();\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\n\tconst { Icon, message } = props;\n\tconst fontRatio = props.fontRatio || (desktopMode ? 50 : 35);\n\n\treturn <Grid\n\t\tstyle={{ width: '100%', height: '100%', textAlign: 'center' }}\n\t\tcontainer\n\t\tdirection=\"column\"\n\t\tjustifyContent=\"center\"\n\t\talignItems=\"center\"\n\t>\n\t\t<div>\n\t\t\t<Icon style={{ fontSize: fontRatio * 5, color: getModeColor(false, theme) }} />\n\t\t</div>\n\t\t<Typography style={{ fontSize: fontRatio * 0.9, marginTop: fontRatio * 0.5, color: getModeColor(false, theme) }} >{message}</Typography>\n\t</Grid>\n}","import { Paper, Theme, useMediaQuery } from \"@material-ui/core\";\nimport '../../theme/styles/layout/pageWithSideInfoLayout.scss';\n\ninterface PageLayoutProps {\n\t/** Page content */\n\tchildren: JSX.Element;\n\t/** Side info component */\n\tsideInfo?: JSX.Element;\n\t/** Whenever to show the Side info */\n\tshowSideInfo?: boolean;\n}\n\n/**\n * Dashboard page layout.\n * The layout contain creating fixed size of page content with scroll in case of overflow and as option \n * \"sideinfo\" with opening/closing smooth animation.\n * @param props The @see PageLayoutProps props\n */\nexport function PageLayout(props: PageLayoutProps) {\n\tconst largeDesktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('md'));\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\n\treturn <div className=\"page-container\">\n\t\t{/* Show page content only if side-info is hidden *or* it's very wide screen */}\n\t\t{<div className={`main-page-area ${props.showSideInfo && '---page-side-info-enabled'} ${!largeDesktopMode && props.showSideInfo && '--hide-main-page-area'}`}>\n\t\t\t{/* The page container */}\n\t\t\t<div className={`main-page-container ${!desktopMode && '--mobile'}`}>\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t</div>}\n\t\t{/* If side info should be shown, show it */}\n\t\t{<div className={`page-side-info-area-container ${props.showSideInfo && '--page-side-info-enabled'} ${!largeDesktopMode && '--small-screen'}`}>\n\t\t\t<Paper elevation={3} className=\"page-side-full-info-card\" >\n\t\t\t\t{props.sideInfo}\n\t\t\t</Paper>\n\t\t</div>}\n\t</div>;\n}\n","import { ACModeOptions, CleanerMode, FanStrengthOptions, MinionStatus, MinionTypes, RollerDirection, SwitchOptions } from \"../../infrastructure/generated/api\";\n\n/** Map minions type to the display name i18n key */\nexport const mapMinionTypeToDisplay: { [key in MinionTypes]: string } = {\n\t[MinionTypes.Toggle]: 'dashboard.minions.toggle',\n\t[MinionTypes.Switch]: 'dashboard.minions.switch',\n\t[MinionTypes.AirConditioning]: 'dashboard.minions.air.conditioning',\n\t[MinionTypes.Light]: 'dashboard.minions.light',\n\t[MinionTypes.TemperatureLight]: 'dashboard.minions.temperature.light',\n\t[MinionTypes.ColorLight]: 'dashboard.minions.color.light',\n\t[MinionTypes.Cleaner]: 'dashboard.minions.cleaner',\n\t[MinionTypes.Roller]: 'dashboard.minions.roller',\n}\n\nexport interface HMS {\n\thours: number;\n\tminutes: number;\n\tseconds: number;\n}\n\n/**\n * Get ms time duration separated to seconds, minutes and hours.\n * @param timeMs The duration in ms\n * @returns The DMS object\n */\nexport function msToHMS(timeMs?: number): HMS {\n\tif (!timeMs) {\n\t\treturn {\n\t\t\tseconds: 0,\n\t\t\tminutes: 0,\n\t\t\thours: 0,\n\t\t};\n\t}\n\treturn {\n\t\t// To get seconds, remove the ms from the num and than get the first 60 - remove seconds fraction (the seconds in one minute only)\n\t\tseconds: Math.floor(((timeMs / 100) / 10) % 60),\n\t\t// To get minutes get the number of minutes in the ms - remove minutes fraction, and get the first 60 (the minutes in one hour)\n\t\tminutes: Math.floor(timeMs / 60000) % 60,\n\t\t// Get the total number of hours in the ms - remove hours fraction\n\t\thours: Math.floor(timeMs / 3600000),\n\t};\n};\n\n/**\n * Get total ms in a @see HMS object\n * @param hms The HMS object to calc from\n * @returns The total MS\n */\nexport function HMStoMs(hms?: HMS): number {\n\tif (!hms) {\n\t\treturn 0;\n\t}\n\treturn (hms.hours * 3600000) + (hms.minutes * 60000) + (hms.seconds * 1000);\n};\n\n/**\n * Build default minion status properties \n * @param minionType The minion type to build for\n * @returns THe default status properties\n */\nexport function defaultMinionStatus(minionType: MinionTypes): MinionStatus {\n\n\tconst minionStatus: MinionStatus = {};\n\n\tswitch (minionType) {\n\t\tcase MinionTypes.Toggle:\n\t\t\tminionStatus.toggle = { status: SwitchOptions.Off };\n\t\t\tbreak;\n\t\tcase MinionTypes.Switch:\n\t\t\tminionStatus.switch = { status: SwitchOptions.Off };\n\t\t\tbreak;\n\t\tcase MinionTypes.AirConditioning:\n\t\t\tminionStatus.airConditioning = {\n\t\t\t\tstatus: SwitchOptions.On,\n\t\t\t\tfanStrength: FanStrengthOptions.Auto,\n\t\t\t\tmode: ACModeOptions.Cold,\n\t\t\t\ttemperature: 16\n\t\t\t};\n\t\t\tbreak;\n\t\tcase MinionTypes.Light:\n\t\t\tminionStatus.light = {\n\t\t\t\tstatus: SwitchOptions.On,\n\t\t\t\tbrightness: 50\n\t\t\t};\n\t\t\tbreak;\n\t\tcase MinionTypes.TemperatureLight:\n\t\t\tminionStatus.temperatureLight = {\n\t\t\t\tstatus: SwitchOptions.On,\n\t\t\t\tbrightness: 50,\n\t\t\t\ttemperature: 50,\n\t\t\t};\n\t\t\tbreak;\n\t\tcase MinionTypes.ColorLight:\n\t\t\tminionStatus.colorLight = {\n\t\t\t\tstatus: SwitchOptions.On,\n\t\t\t\tbrightness: 50,\n\t\t\t\ttemperature: 50,\n\t\t\t\tred: 150,\n\t\t\t\tgreen: 100,\n\t\t\t\tblue: 50\n\t\t\t};\n\t\t\tbreak;\n\t\tcase MinionTypes.Roller:\n\t\t\tminionStatus.roller = {\n\t\t\t\tstatus: SwitchOptions.On,\n\t\t\t\tdirection: RollerDirection.Down\n\t\t\t};\n\t\t\tbreak;\n\t\tcase MinionTypes.Cleaner:\n\t\t\tminionStatus.cleaner = {\n\t\t\t\tstatus: SwitchOptions.On,\n\t\t\t\tfanSpeed: FanStrengthOptions.Auto,\n\t\t\t\tmode: CleanerMode.Clean,\n\t\t\t};\n\t\t\tbreak;\n\t}\n\treturn minionStatus;\n}\n\n/**\n * Detect if the given minion status is in ON mode (beside other properties)\n * @param minionType The minion type\n * @param minionStatus The full minion status \n * @returns True if the status is @see SwitchOptions.On\n */\nexport function isOnMode(minionType: MinionTypes, minionStatus?: MinionStatus): boolean {\n\tif (!minionStatus) {\n\t\treturn false;\n\t}\n\treturn minionStatus[minionType as unknown as keyof MinionStatus]?.status === SwitchOptions.On;\n}","import { IconButton, useTheme } from \"@material-ui/core\";\nimport { useState } from \"react\";\nimport { Minion, SwitchOptions } from \"../../infrastructure/generated/api\";\nimport PowerSettingsNewRoundedIcon from '@material-ui/icons/PowerSettingsNewRounded';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\n// import ErrorOutlineRoundedIcon from '@material-ui/icons/ErrorOutlineRounded';\nimport { ApiFacade } from \"../../infrastructure/generated/proxies/api-proxies\";\nimport { useTranslation } from \"react-i18next\";\nimport { handleServerRestError } from \"../../services/notifications.service\";\nimport { minionsService } from \"../../services/minions.service\";\nimport clonedeep from 'lodash.clonedeep';\nimport { getModeColor } from \"../../logic/common/themeUtils\";\nimport { defaultMinionStatus, isOnMode } from \"../../logic/common/minionsUtils\";\nimport { ThemeTooltip } from \"../global/ThemeTooltip\";\n\ninterface MinionPowerToggleProps {\n\tminion: Minion;\n\tfontRatio: number;\n}\n\nexport function MinionPowerToggle(props: MinionPowerToggleProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\tconst [loading, setLoading] = useState<boolean>();\n\n\tconst { minion, fontRatio } = props;\n\n\tconst isOn = isOnMode(minion.minionType, minion.minionStatus);\n\n\tasync function toggleMinionStatus() {\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tlet minionStatus = clonedeep<any>(minion.minionStatus);\n\t\t\tif (!minionStatus[minion.minionType]) {\n\t\t\t\tminionStatus = defaultMinionStatus(minion.minionType);\n\t\t\t}\n\t\t\tminionStatus[minion.minionType].status = isOn ? SwitchOptions.Off : SwitchOptions.On;\n\t\t\tawait ApiFacade.MinionsApi.setMinion(minionStatus, minion.minionId || '');\n\t\t\tminion.minionStatus = minionStatus;\n\t\t\tminionsService.updateMinion(minion);\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetLoading(false);\n\t}\n\n\t// Calc power icon color, based on status and theme\n\tconst powerIconColor = getModeColor(isOn, theme);\n\n\treturn <div className=\"minion-power-toggle-container\" onClick={(e) => {\n\t\t// Stop click event propagation up, to not open the minion full info while clicking on power indicator.\n\t\te.persist();\n\t\te.nativeEvent.stopImmediatePropagation();\n\t\te.stopPropagation();\n\t}}\n\t>\n\t\t<ThemeTooltip title={<span>{t(`dashboard.minions.press.to.${isOn ? 'off' : 'on'}`)}</span>} disableFocusListener >\n\t\t\t<IconButton\n\t\t\t\tstyle={{ padding: fontRatio / 5 }}\n\t\t\t\tdisabled={loading}\n\t\t\t\taria-label={t(`dashboard.minions.press.to.${isOn ? 'off' : 'on'}`)}\n\t\t\t\tonClick={toggleMinionStatus}\n\t\t\t\tcolor=\"inherit\"\n\t\t\t>\n\n\t\t\t\t{/* In case of loading, show loader icon */}\n\t\t\t\t{loading && <MoreHorizIcon style={{ fontSize: fontRatio, color: powerIconColor }} />}\n\t\t\t\t{/* In case of communication issues, show icon indicator for that */}\n\t\t\t\t{/* {(!loading && !minion.isProperlyCommunicated) && <ErrorOutlineRoundedIcon style={{ fontSize: fontRatio, color: theme.palette.warning[theme.palette.type] }} />} */}\n\t\t\t\t{/* In case of all is OK, show the power icon */}\n\t\t\t\t{(!loading) && <PowerSettingsNewRoundedIcon style={{ fontSize: fontRatio, color: powerIconColor }} />}\n\t\t\t</IconButton>\n\t\t</ThemeTooltip>\n\t</div>\n}","import { useTheme } from '@material-ui/core';\nimport AcUnitIcon from '@material-ui/icons/AcUnit';\nimport WavesIcon from '@material-ui/icons/Waves';\nimport { Fragment } from 'react';\nimport { ACModeOptions } from '../../../infrastructure/generated/api';\nimport { getModeColor } from '../../../logic/common/themeUtils';\n\ninterface AcModeProps {\n\tmode: ACModeOptions;\n\tfontRatio: number;\n\tisOn: boolean;\n}\n\nexport function AcMode(props: AcModeProps) {\n\tconst theme = useTheme();\n\n\tconst { mode, fontRatio, isOn } = props;\n\n\tconst ModeIcon = (mode === ACModeOptions.Cold ? AcUnitIcon : WavesIcon) as any;\n\n\treturn <Fragment>\n\t\t<ModeIcon style={{ fontSize: fontRatio, transform: 'rotate(-90deg)', color: getModeColor(isOn, theme) }} />\n\t</Fragment>\n}","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFanHigh(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0.000000,607.000000) scale(0.100000,-0.100000)\",\n    stroke: \"none\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4629 5495 c-105 -28 -196 -127 -219 -235 -8 -40 -10 -645 -8 -2285 l3 -2230 28 -56 c94 -192 342 -238 498 -92 26 24 57 67 70 96 l24 52 0 2265 0 2265 -24 48 c-46 93 -111 148 -206 173 -61 17 -105 16 -166 -1z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2909 4157 c-105 -30 -196 -128 -218 -233 -9 -45 -11 -427 -9 -1619 l3 -1560 29 -58 c35 -67 89 -120 155 -150 67 -31 189 -30 252 1 70 34 122 84 154 148 l30 59 0 1595 0 1595 -28 57 c-32 64 -90 122 -153 149 -56 25 -156 33 -215 16z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1260 2795 c-103 -34 -187 -128 -209 -232 -9 -43 -11 -282 -9 -938 l3 -880 25 -50 c57 -113 163 -179 287 -179 62 0 80 4 139 34 76 39 135 105 157 175 9 31 12 254 12 945 l0 905 -28 57 c-32 65 -90 122 -156 151 -59 26 -162 32 -221 12z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFanHigh);\nexport default __webpack_public_path__ + \"static/media/fanHigh.dab21121.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFanMed(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0.000000,607.000000) scale(0.100000,-0.100000)\",\n    stroke: \"none\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2909 4155 c-105 -28 -196 -127 -219 -235 -8 -40 -10 -475 -8 -1615 l3 -1560 29 -58 c34 -67 89 -120 155 -150 66 -31 189 -31 252 1 70 34 122 84 154 148 l30 59 0 1595 0 1595 -24 48 c-46 93 -111 148 -206 173 -61 17 -105 16 -166 -1z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1260 2795 c-103 -34 -187 -128 -209 -232 -9 -43 -11 -282 -9 -938 l3 -880 25 -50 c57 -113 163 -179 287 -179 62 0 80 4 139 34 76 39 135 105 157 175 9 31 12 254 12 945 l0 905 -28 57 c-32 65 -90 122 -154 150 -59 26 -165 32 -223 13z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFanMed);\nexport default __webpack_public_path__ + \"static/media/fanMed.f8b09c55.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFanLow(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0.000000,607.000000) scale(0.100000,-0.100000)\",\n    stroke: \"none\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1270 2797 c-101 -28 -189 -119 -216 -221 -19 -70 -21 -1766 -2 -1830 41 -140 159 -230 305 -230 62 0 80 4 139 34 76 39 135 105 157 175 9 31 12 254 12 945 l0 905 -29 58 c-34 67 -89 121 -152 148 -56 25 -156 33 -214 16z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFanLow);\nexport default __webpack_public_path__ + \"static/media/fanLow.c3c7bd0e.svg\";\nexport { ForwardRef as ReactComponent };","import { FanStrengthOptions } from '../../../infrastructure/generated/api';\nimport AutoIcon from '@mui/icons-material/HdrAuto';\nimport { Fragment } from 'react';\nimport { SvgIcon, useTheme } from '@material-ui/core';\nimport { getModeColor } from '../../../logic/common/themeUtils';\nimport { ReactComponent as FanHighIcon } from '../../../theme/icons/fanHigh.svg';\nimport { ReactComponent as FanMedIcon } from '../../../theme/icons/fanMed.svg';\nimport { ReactComponent as FanLowIcon } from '../../../theme/icons/fanLow.svg';\n\ninterface AcSpeedProps {\n\tspeed: FanStrengthOptions;\n\tfontRatio: number;\n\tisOn: boolean;\n}\n\nexport function AcSpeed(props: AcSpeedProps) {\n\tconst theme = useTheme();\n\n\tconst { speed, fontRatio, isOn } = props;\n\n\tlet SpeedIcon = FanHighIcon;\n\tswitch (speed) {\n\t\tcase FanStrengthOptions.High:\n\t\t\tSpeedIcon = FanHighIcon;\n\t\t\tbreak;\n\t\tcase FanStrengthOptions.Med:\n\t\t\tSpeedIcon = FanMedIcon;\n\t\t\tbreak;\n\t\tcase FanStrengthOptions.Low:\n\t\t\tSpeedIcon = FanLowIcon;\n\t\t\tbreak;\n\t}\n\n\treturn <Fragment>\n\t\t{speed !== FanStrengthOptions.Auto && <SvgIcon component={SpeedIcon} style={{ fontSize: fontRatio, color: getModeColor(isOn, theme) }} viewBox=\"0 0 607.000000 607.000000\" />}\n\t\t{speed === FanStrengthOptions.Auto && <AutoIcon style={{ fontSize: fontRatio, color: getModeColor(isOn, theme) }} />}\n\t</Fragment>\n}","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgOn(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0.000000,630.000000) scale(0.100000,-0.100000)\",\n    stroke: \"none\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2770 4670 l0 -1200 330 0 330 0 0 1200 0 1200 -330 0 -330 0 0 -1200z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1800 5076 c-243 -194 -425 -426 -566 -721 -136 -285 -195 -554 -196 -885 -1 -334 61 -605 207 -905 253 -523 724 -921 1275 -1080 207 -60 348 -79 580 -79 232 0 373 19 580 79 551 159 1022 557 1275 1080 146 300 208 571 207 905 -1 332 -60 600 -196 885 -105 220 -213 377 -374 546 -90 95 -289 262 -305 256 -5 -1 -92 -120 -193 -262 l-183 -260 32 -25 c77 -59 252 -241 308 -319 104 -147 188 -335 230 -521 26 -111 36 -366 20 -481 -90 -636 -572 -1123 -1206 -1219 -91 -14 -300 -14 -395 0 -424 64 -789 309 -1013 680 -91 152 -161 352 -188 539 -16 115 -6 370 20 481 42 186 126 374 230 521 56 78 232 261 308 319 l32 25 -183 260 c-101 142 -187 260 -193 262 -5 2 -56 -34 -113 -81z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2659 1014 c-29 -16 -55 -41 -69 -65 -20 -36 -21 -51 -18 -157 3 -105 6 -121 27 -151 36 -50 99 -74 193 -74 102 0 161 28 195 92 19 38 23 59 23 142 0 105 -9 140 -43 178 -39 42 -94 61 -182 61 -67 0 -87 -5 -126 -26z m161 -114 c16 -16 20 -33 20 -95 0 -62 -4 -79 -20 -95 -24 -24 -29 -24 -58 -4 -20 14 -22 24 -22 99 0 75 2 85 22 99 29 20 34 20 58 -4z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3075 1028 c-3 -8 -4 -112 -3 -233 l3 -220 75 0 75 0 5 87 5 87 59 -90 59 -89 68 0 69 0 0 235 0 235 -75 0 -74 0 -3 -99 -3 -100 -60 97 -61 97 -67 3 c-49 2 -69 -1 -72 -10z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgOn);\nexport default __webpack_public_path__ + \"static/media/on.a52581e6.svg\";\nexport { ForwardRef as ReactComponent };","import { useTheme } from '@material-ui/core';\nimport { Fragment } from 'react';\nimport { RollerDirection } from '../../../infrastructure/generated/api';\nimport { getModeColor } from '../../../logic/common/themeUtils';\nimport ArrowCircleUpIcon from '@mui/icons-material/ArrowCircleUp';\nimport ArrowCircleDownIcon from '@mui/icons-material/ArrowCircleDown';\ninterface RollerDirProps {\n\tdirection: RollerDirection;\n\tfontRatio: number;\n\tisOn: boolean;\n}\n\nexport function RollerDir(props: RollerDirProps) {\n\tconst theme = useTheme();\n\n\tconst { direction, fontRatio, isOn } = props;\n\n\tconst ModeIcon = (direction === RollerDirection.Up ? ArrowCircleUpIcon : ArrowCircleDownIcon);\n\n\treturn <Fragment>\n\t\t<ModeIcon style={{ fontSize: fontRatio, color: getModeColor(isOn, theme) }} />\n\t</Fragment>\n}","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgOff(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"607.000000pt\",\n    height: \"628.000000pt\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0.000000,628.000000) scale(0.100000,-0.100000)\",\n    stroke: \"none\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M997 5843 c-246 -228 -297 -282 -297 -312 0 -26 265 -310 2061 -2203 1133 -1195 2089 -2201 2124 -2236 45 -44 70 -62 89 -62 20 0 67 40 205 170 185 176 205 203 177 245 -15 22 -4092 4326 -4186 4418 -67 65 -83 63 -173 -20z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2710 5091 l0 -730 301 -318 c166 -175 312 -329 325 -343 l24 -25 0 1073 0 1072 -325 0 -325 0 0 -729z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4197 5078 c-13 -18 -97 -136 -186 -263 l-162 -230 43 -34 c92 -74 256 -249 316 -340 152 -228 228 -460 239 -729 10 -243 -38 -476 -142 -682 -20 -40 -35 -75 -33 -80 5 -14 450 -480 458 -480 5 0 27 29 49 65 214 339 322 709 322 1105 0 178 -10 287 -43 445 -83 408 -327 831 -635 1101 -85 74 -187 154 -197 154 -3 0 -16 -15 -29 -32z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1306 4558 c-152 -229 -256 -492 -312 -788 -25 -132 -30 -476 -9 -625 64 -468 271 -875 611 -1208 165 -161 318 -269 525 -371 569 -281 1246 -284 1814 -7 129 63 245 131 246 144 0 4 -102 115 -226 247 l-226 238 -72 -35 c-204 -100 -390 -143 -619 -143 -389 -1 -734 143 -1008 421 -265 269 -409 619 -410 994 0 235 70 501 185 696 l34 59 -225 237 c-124 131 -229 239 -233 241 -4 1 -37 -44 -75 -100z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2405 1021 c-77 -35 -105 -91 -105 -213 0 -133 21 -178 105 -220 29 -15 59 -21 116 -21 91 -1 161 28 196 81 44 67 43 245 -1 312 -37 56 -95 80 -192 80 -55 0 -91 -6 -119 -19z m153 -116 c12 -11 22 -97 16 -142 -7 -62 -30 -83 -70 -64 -30 13 -37 44 -32 127 3 50 9 70 23 80 16 12 49 11 63 -1z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2810 805 l0 -236 78 3 77 3 3 73 3 72 100 0 100 0 -3 63 -3 62 -97 3 c-96 3 -98 3 -98 27 0 24 1 24 103 27 l102 3 0 65 0 65 -182 3 -183 2 0 -235z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3240 805 l0 -236 78 3 77 3 3 73 3 72 100 0 100 0 -3 63 -3 62 -97 3 c-96 3 -98 3 -98 27 0 24 1 24 103 27 l102 3 0 65 0 65 -182 3 -183 2 0 -235z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgOff);\nexport default __webpack_public_path__ + \"static/media/off.162485a9.svg\";\nexport { ForwardRef as ReactComponent };","import { SwitchOptions } from '../../../infrastructure/generated/api';\nimport { Fragment } from 'react';\nimport { SvgIcon, useTheme } from '@material-ui/core';\nimport { getModeColor } from '../../../logic/common/themeUtils';\nimport { ReactComponent as OnIcon } from '../../../theme/icons/on.svg';\nimport { ReactComponent as OffIcon } from '../../../theme/icons/off.svg';\n\ninterface SwitchModeProps {\n\tmode: SwitchOptions;\n\tfontRatio: number;\n\tisOn: boolean;\n}\n\nexport function SwitchMode(props: SwitchModeProps) {\n\tconst theme = useTheme();\n\n\tconst { mode, fontRatio, isOn } = props;\n\n\tconst ModeIcon = mode === SwitchOptions.On ? OnIcon : OffIcon;\n\t\n\treturn <Fragment>\n\t\t<SvgIcon component={ModeIcon} style={{ fontSize: fontRatio, color: getModeColor(isOn, theme) }} viewBox=\"0 0 607.000000 630.000000\" />\n\t</Fragment>\n}","import { Grid, Typography, useTheme } from \"@material-ui/core\";\nimport { ACModeOptions, FanStrengthOptions, MinionStatus, MinionTypes, RollerDirection, SwitchOptions } from \"../../../infrastructure/generated/api\";\nimport { AcMode } from \"./AcMode\";\nimport { AcSpeed } from \"./AcSpeed\";\nimport { Fragment } from \"react\";\nimport '../../../theme/styles/components/minions/minionsStatusOverview.scss';\nimport { getModeColor } from \"../../../logic/common/themeUtils\";\nimport LightModeIcon from '@mui/icons-material/LightMode';\nimport InvertColorsIcon from '@mui/icons-material/InvertColors';\nimport PaletteIcon from '@mui/icons-material/Palette';\nimport { RollerDir } from \"./RollerDir\";\nimport { SwitchMode } from \"./SwitchMode\";\nimport CleaningServicesIcon from '@mui/icons-material/CleaningServices';\n\ninterface StatusOverviewProps {\n\tminionStatus: MinionStatus;\n\tfontRatio: number;\n\tsmallFontRatio: number;\n\tminionType: MinionTypes;\n}\n\ninterface TypeStatusOverviewProps extends StatusOverviewProps {\n\tisOn: boolean;\n}\n\ninterface MinionStatusOverviewProps extends StatusOverviewProps {\n\tshowSwitches: boolean;\n\tdisabled?: boolean;\n}\n\ninterface TemperatureLightStatusOverviewProps extends TypeStatusOverviewProps {\n\thideBrightness?: boolean;\n}\n\n/** The factor for the font size to increase in the main item of the overview */\nconst OVERVIEW_ITEM_SIZE_FACTOR = 1.4;\n\nexport function SwitchOverview(props: TypeStatusOverviewProps) {\n\n\tconst toggle = props.minionStatus[props.minionType as unknown as keyof MinionStatus];\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tclassName=\"minion-status-overview-grid\"\n\t\t\tcontainer\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<Fragment><SwitchMode mode={toggle?.status || SwitchOptions.Off} fontRatio={props.fontRatio * OVERVIEW_ITEM_SIZE_FACTOR} isOn={props.isOn} /></Fragment>\n\t\t</Grid>\n\t</Fragment>;\n}\n\nfunction CleanerOverview(props: TypeStatusOverviewProps) {\n\tconst theme = useTheme();\n\n\tconst cleaner = props.minionStatus.cleaner;\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tclassName=\"minion-status-overview-grid\"\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"space-around\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tdirection={theme.direction === 'ltr' ? 'row' : 'row-reverse'}\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t\talignItems=\"center\"\n\t\t\t>\n\t\t\t\t<CleaningServicesIcon style={{ fontSize: props.fontRatio * 1.2, color: getModeColor(props.isOn, theme), marginTop: props.fontRatio * 0.05 }} />\n\t\t\t\t<Fragment><AcSpeed speed={cleaner?.fanSpeed || FanStrengthOptions.Auto} fontRatio={props.fontRatio * OVERVIEW_ITEM_SIZE_FACTOR} isOn={props.isOn} /></Fragment>\n\t\t\t</Grid>\n\t\t</Grid>\n\t</Fragment>;\n}\n\nfunction RollerOverview(props: TypeStatusOverviewProps) {\n\n\tconst roller = props.minionStatus.roller;\n\n\troller?.direction as RollerDirection;\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tclassName=\"minion-status-overview-grid\"\n\t\t\tcontainer\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<Fragment><RollerDir direction={roller?.direction || RollerDirection.Up} fontRatio={props.fontRatio * OVERVIEW_ITEM_SIZE_FACTOR} isOn={props.isOn} /></Fragment>\n\t\t</Grid>\n\t</Fragment>;\n}\n\nfunction ColorLightOverview(props: TypeStatusOverviewProps) {\n\tconst theme = useTheme();\n\n\tconst light = props.minionStatus.colorLight;\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tclassName=\"minion-status-overview-grid\"\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"space-around\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<div>\n\t\t\t\t<LightOverview {...props} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<TemperatureLightOverview {...props} hideBrightness={true} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection={theme.direction === 'ltr' ? 'row' : 'row-reverse'}\n\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<PaletteIcon style={{ fontSize: props.fontRatio * OVERVIEW_ITEM_SIZE_FACTOR, color: !props.isOn ? getModeColor(props.isOn, theme) : `rgb(${light?.red}, ${light?.green}, ${light?.blue})` }} />\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>;\n}\n\nfunction TemperatureLightOverview(props: TemperatureLightStatusOverviewProps) {\n\tconst theme = useTheme();\n\n\tconst light = props.minionStatus.temperatureLight || props.minionStatus.colorLight;\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tclassName=\"minion-status-overview-grid\"\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"space-around\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t{/* Show the the brightness only if not asked to not do it */}\n\t\t\t{!props.hideBrightness && <div>\n\t\t\t\t<LightOverview {...props} />\n\t\t\t</div>}\n\t\t\t<div>\n\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection={theme.direction === 'ltr' ? 'row' : 'row-reverse'}\n\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Typography style={{ fontSize: props.fontRatio * OVERVIEW_ITEM_SIZE_FACTOR, color: getModeColor(props.isOn, theme) }}>{light?.temperature}</Typography>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{ margin: props.smallFontRatio * 0.2 }}>\n\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<InvertColorsIcon style={{ fontSize: props.smallFontRatio * 0.9, color: getModeColor(props.isOn, theme) }} />\n\t\t\t\t\t\t\t<Typography style={{ fontSize: props.smallFontRatio * 0.9, color: getModeColor(props.isOn, theme) }}>%</Typography>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</div>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>;\n}\n\nfunction LightOverview(props: TypeStatusOverviewProps) {\n\tconst theme = useTheme();\n\n\tconst light = props.minionStatus.light || props.minionStatus.temperatureLight || props.minionStatus.colorLight;\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tclassName=\"minion-status-overview-grid\"\n\t\t\tcontainer\n\t\t\tdirection={theme.direction === 'ltr' ? 'row' : 'row-reverse'}\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<div>\n\t\t\t\t<Typography style={{ fontSize: props.fontRatio * OVERVIEW_ITEM_SIZE_FACTOR, color: getModeColor(props.isOn, theme) }}>{light?.brightness}</Typography>\n\t\t\t</div>\n\t\t\t<div style={{ margin: props.smallFontRatio * 0.2 }}>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t>\n\t\t\t\t\t<LightModeIcon style={{ fontSize: props.smallFontRatio * 0.9, color: getModeColor(props.isOn, theme) }} />\n\t\t\t\t\t<Typography style={{ fontSize: props.smallFontRatio * 0.9, color: getModeColor(props.isOn, theme) }}>%</Typography>\n\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>;\n}\n\nfunction AirConditioningOverview(props: TypeStatusOverviewProps) {\n\tconst theme = useTheme();\n\n\tconst airConditioning = props.minionStatus.airConditioning;\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tclassName=\"minion-status-overview-grid\"\n\t\t\tcontainer\n\t\t\tdirection={theme.direction === 'ltr' ? 'row' : 'row-reverse'}\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<div style={{ marginTop: props.fontRatio * 0.19 }}>\n\t\t\t\t<Typography style={{ fontSize: props.fontRatio * OVERVIEW_ITEM_SIZE_FACTOR, color: getModeColor(props.isOn, theme) }}>{airConditioning?.temperature}</Typography>\n\t\t\t</div>\n\t\t\t<div style={{ margin: props.smallFontRatio * 0.6 }}>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t>\n\t\t\t\t\t<Fragment><AcMode mode={airConditioning?.mode || ACModeOptions.Cold} fontRatio={props.smallFontRatio * 1.1} isOn={props.isOn} /></Fragment>\n\t\t\t\t\t<Fragment><AcSpeed speed={airConditioning?.fanStrength || FanStrengthOptions.Auto} fontRatio={props.smallFontRatio * 1.1} isOn={props.isOn} /></Fragment>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>;\n}\n\nexport function MinionStatusOverview(props: MinionStatusOverviewProps) {\n\tconst { minionStatus, minionType } = props;\n\n\tconst isOn = !props.disabled && minionStatus[minionType as unknown as keyof MinionStatus]?.status === SwitchOptions.On;\n\n\treturn <div className=\"minion-status-overview-container\">\n\t\t{props.showSwitches && (minionType === MinionTypes.Switch || minionType === MinionTypes.Toggle) && <SwitchOverview {...props} isOn={isOn} />}\n\t\t{minionType === MinionTypes.Light && <LightOverview {...props} isOn={isOn} />}\n\t\t{minionType === MinionTypes.TemperatureLight && <TemperatureLightOverview {...props} isOn={isOn} />}\n\t\t{minionType === MinionTypes.ColorLight && <ColorLightOverview {...props} isOn={isOn} />}\n\t\t{minionType === MinionTypes.AirConditioning && <AirConditioningOverview {...props} isOn={isOn} />}\n\t\t{minionType === MinionTypes.Roller && <RollerOverview {...props} isOn={isOn} />}\n\t\t{minionType === MinionTypes.Cleaner && <CleanerOverview {...props} isOn={isOn} />}\n\t</div>\n}","import { Grid, useTheme } from \"@material-ui/core\";\nimport { CSSProperties, Fragment } from \"react\";\nimport { CalibrationMode, Minion } from \"../../infrastructure/generated/api\";\nimport { useTranslation } from \"react-i18next\";\nimport LockIcon from '@mui/icons-material/Lock';\nimport NetworkIssueIcon from '@mui/icons-material/SignalWifiStatusbarConnectedNoInternet4';\nimport SyncIcon from '@mui/icons-material/Sync';\nimport RotateRightIcon from '@mui/icons-material/RotateRight';\nimport { ThemeTooltip } from \"../global/ThemeTooltip\";\n\ninterface MinionIndicatorsProps {\n\tminion: Minion;\n\tfontRatio: number;\n\tsmallFontRatio: number;\n}\n\nexport function MinionIndicators(props: MinionIndicatorsProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\n\tconst { minion, smallFontRatio } = props;\n\n\tconst indicatorsStyle: CSSProperties = { fontSize: smallFontRatio, marginTop: smallFontRatio * 0.3, color: theme.palette.grey[500] };\n\n\tconst syncOn = !!minion.calibration?.calibrationCycleMinutes;\n\treturn <div className=\"minion-indicators-container\">\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tdirection=\"column\"\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t{!minion.isProperlyCommunicated && <Fragment>\n\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.communication.error.tip')}</span>} enterDelay={100}>\n\t\t\t\t\t<NetworkIssueIcon style={indicatorsStyle} />\n\t\t\t\t</ThemeTooltip>\n\t\t\t</Fragment>}\n\t\t\t{syncOn && minion.calibration?.calibrationMode === CalibrationMode.AUTO && <Fragment>\n\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.sync.tip', { minutes: minion.calibration?.calibrationCycleMinutes })}</span>} enterDelay={100}>\n\t\t\t\t\t<SyncIcon style={indicatorsStyle} />\n\t\t\t\t</ThemeTooltip>\n\t\t\t</Fragment>}\n\t\t\t{syncOn && (minion.calibration?.calibrationMode === CalibrationMode.LOCKON || minion.calibration?.calibrationMode === CalibrationMode.LOCKOFF) && <Fragment>\n\t\t\t\t<ThemeTooltip title={<span>{t(`dashboard.minions.lock.${minion.calibration?.calibrationMode === CalibrationMode.LOCKON ? 'on' : 'off'}.tip`)}</span>} enterDelay={100}>\n\t\t\t\t\t<LockIcon style={indicatorsStyle} />\n\t\t\t\t</ThemeTooltip>\n\t\t\t</Fragment>}\n\t\t\t{syncOn && minion.calibration?.calibrationMode === CalibrationMode.SHABBAT && <Fragment>\n\t\t\t\t<ThemeTooltip title={<span>{t(`dashboard.minions.rotating.mode.tip`, { minutes: minion.calibration?.calibrationCycleMinutes })}</span>} enterDelay={100}>\n\t\t\t\t\t<RotateRightIcon style={indicatorsStyle} />\n\t\t\t\t</ThemeTooltip>\n\t\t\t</Fragment>}\n\t\t</Grid>\n\t</div>\n}","import { Grid, Typography, useTheme } from \"@material-ui/core\";\nimport { Minion } from \"../../infrastructure/generated/api\";\nimport '../../theme/styles/components/minions/minionsOverview.scss';\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { DashboardRoutes } from \"../../infrastructure/consts\";\nimport { MinionPowerToggle } from \"./MinionPowerToggle\";\nimport { MinionStatusOverview } from \"./overviewMinionsStatus/MinionStatusOverview\";\nimport { mapMinionTypeToDisplay, msToHMS } from \"../../logic/common/minionsUtils\";\nimport { MinionIndicators } from \"./MinionIndicators\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface MinionOverviewProps {\n\tminion: Minion;\n\tratio: number;\n}\n\nexport function MinionOverview(props: MinionOverviewProps) {\n\tconst { t } = useTranslation();\n\tconst { id } = useParams<{ id: string }>();\n\tconst history = useHistory();\n\tconst theme = useTheme();\n\n\tasync function onMinionSelection() {\n\t\tif (minion.minionId === id) {\n\t\t\t// If current minion already selected, unselect it\n\t\t\thistory.push(DashboardRoutes.minions.path)\n\t\t} else {\n\t\t\t// Select the minion (by adding the id to the URL)\n\t\t\thistory.push(`${DashboardRoutes.minions.path}/${minion.minionId}`)\n\t\t}\n\t}\n\n\tconst { minion, ratio } = props;\n\n\t// Calc the icons/texts size according to the card ration\n\tconst fontRatio = ratio / 2;\n\tconst smallFontRatio = ratio / 4;\n\tconst verySmallFontRatio = ratio / 8;\n\tconst fontSize: string = `${fontRatio}px`;\n\tconst smallFontSize: string = `${smallFontRatio}px`;\n\n\tconst subTitleColor = theme.palette.grey.A200;\n\t// Hold the auto turn off, if set, as sec,min.ho.\n\tconst autoOff = msToHMS(minion.minionAutoTurnOffMS);\n\n\treturn <div className=\"minion-overview-container\" onClick={onMinionSelection}>\n\t\t<div className=\"minion-overview-header-container\" >\n\t\t\t<Grid\n\t\t\t\tclassName=\"minion-overview-header\"\n\t\t\t\tcontainer\n\t\t\t\tdirection=\"row\"\n\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\talignItems=\"flex-start\"\n\t\t\t>\n\t\t\t\t{/* Set the name size as all card width, expect a place for the power icon. */}\n\t\t\t\t<div className=\"minion-name-container\" style={{ width: `calc(100% - ${fontRatio + 30}px` }} >\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tclassName=\"minion-name-container\"\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Typography className=\"minion-name\" style={{ fontSize }}>{minion.name}</Typography>\n\t\t\t\t\t\t<Typography className=\"minion-name\" style={{ fontSize: smallFontSize, color: subTitleColor }}>{t(mapMinionTypeToDisplay[minion.minionType])}</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"quick-action-container\">\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<MinionPowerToggle minion={minion} fontRatio={fontRatio} />\n\t\t\t\t\t\t<div className=\"indicators-overview-container\" style={{ maxWidth: fontSize }}>\n\t\t\t\t\t\t\t<MinionIndicators minion={minion} fontRatio={fontRatio} smallFontRatio={smallFontRatio} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t</div>\n\t\t<div className=\"minion-overview-content-container\" >\n\t\t\t<Grid\n\t\t\t\tclassName=\"minion-overview-content-grid\"\n\t\t\t\tcontainer\n\t\t\t\tdirection=\"row\"\n\t\t\t\talignItems=\"center\"\n\t\t\t>\n\t\t\t\t<div className=\"minion-status-overview-area\" >\n\t\t\t\t\t<MinionStatusOverview minionStatus={minion.minionStatus} minionType={minion.minionType} fontRatio={fontRatio} smallFontRatio={smallFontRatio} showSwitches={false} />\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t</div>\n\t\t<div className=\"minion-overview-footer-container\" >\n\t\t\t<Grid\n\t\t\t\tclassName=\"minion-overview-footer-grid\"\n\t\t\t\tcontainer\n\t\t\t\tdirection=\"row\"\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t\talignItems=\"center\"\n\t\t\t>\n\t\t\t\t{!!minion.minionAutoTurnOffMS && <Typography style={{ fontSize: verySmallFontRatio, color: subTitleColor }}>\n\t\t\t\t\t{t('dashboard.minions.auto.turn.off.info', autoOff)}\n\t\t\t\t</Typography>}\n\t\t\t</Grid>\n\t\t</div>\n\t</div>\n}","import { CircularProgress, Grid, IconButton, TextField, Typography } from \"@material-ui/core\";\nimport { Minion } from \"../../infrastructure/generated/api\";\nimport { useTranslation } from \"react-i18next\";\nimport CloseIcon from '@material-ui/icons/Close';\nimport '../../theme/styles/components/minions/minionEditableName.scss';\nimport { Fragment, useState } from \"react\";\nimport { ApiFacade } from \"../../infrastructure/generated/proxies/api-proxies\";\nimport { minionsService } from \"../../services/minions.service\";\nimport { handleServerRestError } from \"../../services/notifications.service\";\nimport EditIcon from '@mui/icons-material/Edit';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { ThemeTooltip } from \"../global/ThemeTooltip\";\n\ninterface MinionMinionEditableNameProps {\n\tminion: Minion;\n\tfontRatio: number;\n}\n\nexport function MinionEditableName(props: MinionMinionEditableNameProps) {\n\tconst { t } = useTranslation();\n\tconst [editNameMode, setEditNameMode] = useState<boolean>(false);\n\tconst [editingName, setEditingName] = useState<boolean>(false);\n\tconst [editNameError, setEditNameError] = useState<boolean>(false);\n\tconst [editName, setEditName] = useState<string>('');\n\tconst { minion, fontRatio } = props;\n\n\tasync function renameMinion() {\n\t\tif (!editName) {\n\t\t\tsetEditNameError(true);\n\t\t\treturn;\n\t\t}\n\t\tsetEditingName(true);\n\t\ttry {\n\t\t\tawait ApiFacade.MinionsApi.renameMinion({ name: editName }, minion.minionId || '');\n\t\t\tminion.name = editName;\n\t\t\tminionsService.updateMinion(minion);\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetEditingName(false);\n\t\tsetEditNameMode(false);\n\t}\n\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tclassName=\"minion-editable-name-grid\"\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t{!editNameMode && <div style={{ maxWidth: `calc(100% - ${fontRatio * 0.5}px)` }}>\n\t\t\t\t<Typography className=\"minion-name\" style={{ fontSize: fontRatio * 0.7 }}>{minion.name}</Typography>\n\t\t\t</div>}\n\t\t\t{editNameMode && <div style={{ width: `calc(100% - ${fontRatio * 1.6}px)` }}>\n\t\t\t\t<TextField\n\t\t\t\t\tstyle={{ width: `100%` }}\n\t\t\t\t\tdisabled={editingName}\n\t\t\t\t\terror={editNameError}\n\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\tvalue={editName}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetEditNameError(false);\n\t\t\t\t\t\tsetEditName(e.target.value);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>}\n\t\t\t<div>\n\t\t\t\t{!editNameMode && <ThemeTooltip title={<span>{t('dashboard.minions.edit.name')}</span>} >\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.1 }}\n\t\t\t\t\t\tonClick={() => { setEditNameMode(true); setEditName(minion.name); }}\n\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t<EditIcon style={{ fontSize: fontRatio * 0.3 }} />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</ThemeTooltip>}\n\t\t\t\t{editingName && <CircularProgress size={fontRatio * 0.3} thickness={10} />}\n\t\t\t\t{!editingName && editNameMode && <ThemeTooltip title={<span>{t('dashboard.minions.save.name')}</span>} >\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.1 }}\n\t\t\t\t\t\tonClick={renameMinion}\n\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t<SaveIcon style={{ fontSize: fontRatio * 0.3 }} />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</ThemeTooltip>}\n\t\t\t\t{!editingName && editNameMode && <ThemeTooltip title={<span>{t('global.cancel')}</span>} >\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.1 }}\n\t\t\t\t\t\tonClick={() => { setEditNameMode(false); }}\n\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t<CloseIcon style={{ fontSize: fontRatio * 0.3 }} />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</ThemeTooltip>}\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>\n}","import { Grid, IconButton, SvgIcon, Typography, useTheme } from \"@material-ui/core\";\nimport { Fragment } from \"react\";\nimport { getModeColor } from \"../../../logic/common/themeUtils\";\nimport ArrowDropUpIcon from '@mui/icons-material/ArrowDropUp';\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\nimport { useTranslation } from \"react-i18next\";\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport { ACModeOptions, AirConditioning, FanStrengthOptions, MinionTypes } from \"../../../infrastructure/generated/api\";\nimport AcUnitIcon from '@material-ui/icons/AcUnit';\nimport WavesIcon from '@material-ui/icons/Waves';\nimport clonedeep from 'lodash.clonedeep';\nimport { ReactComponent as FanHighIcon } from '../../../theme/icons/fanHigh.svg';\nimport { ReactComponent as FanMedIcon } from '../../../theme/icons/fanMed.svg';\nimport { ReactComponent as FanLowIcon } from '../../../theme/icons/fanLow.svg';\nimport AutoIcon from '@mui/icons-material/HdrAuto';\nimport { TypeEditStatusProps } from \"./MinionEditStatus\";\nimport { defaultMinionStatus } from \"../../../logic/common/minionsUtils\";\nimport { ThemeTooltip } from \"../../global/ThemeTooltip\";\n\nexport function EditAirConditioning(props: TypeEditStatusProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\n\tconst airConditioning = props.minionStatus.airConditioning || defaultMinionStatus(MinionTypes.AirConditioning).airConditioning as AirConditioning;\n\tconst disabled = props.disabled;\n\n\tasync function changeMode(nextMode?: ACModeOptions) {\n\t\tlet minionStatus = clonedeep<any>(props.minionStatus);\n\t\tif (!minionStatus.airConditioning) {\n\t\t\tminionStatus = defaultMinionStatus(MinionTypes.AirConditioning);\n\t\t}\n\t\tminionStatus.airConditioning.mode = nextMode || minionStatus.airConditioning.mode;\n\t\tprops.setMinionStatus(minionStatus);\n\t};\n\n\tasync function changeFan(nextFan?: FanStrengthOptions) {\n\t\tlet minionStatus = clonedeep<any>(props.minionStatus);\n\t\tif (!minionStatus.airConditioning) {\n\t\t\tminionStatus = defaultMinionStatus(MinionTypes.AirConditioning);\n\t\t}\n\t\tminionStatus.airConditioning.fanStrength = nextFan || minionStatus.airConditioning.fanStrength;\n\t\tprops.setMinionStatus(minionStatus);\n\t};\n\n\tasync function movTemperatureStep(tempStep: number) {\n\t\tlet minionStatus = clonedeep<any>(props.minionStatus);\n\t\tif (!minionStatus.airConditioning) {\n\t\t\tminionStatus = defaultMinionStatus(MinionTypes.AirConditioning);\n\t\t}\n\t\tminionStatus.airConditioning.temperature += tempStep;\n\t\tprops.setMinionStatus(minionStatus);\n\t};\n\n\tconst fanOptions = [\n\t\t<ToggleButton value={FanStrengthOptions.Auto} aria-label={t('dashboard.minions.ac.fan.auto')} style={{ color: getModeColor(props.isOn, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.ac.fan.auto')}</span>}>\n\t\t\t\t<AutoIcon />\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>,\n\t\t<ToggleButton value={FanStrengthOptions.Low} aria-label={t('dashboard.minions.ac.fan.low')} style={{ color: getModeColor(props.isOn, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.ac.fan.low')}</span>}>\n\t\t\t\t<SvgIcon component={FanLowIcon} viewBox=\"0 0 607.000000 607.000000\" />\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>,\n\t\t<ToggleButton value={FanStrengthOptions.Med} aria-label={t('dashboard.minions.ac.fan.med')} style={{ color: getModeColor(props.isOn, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.ac.fan.med')}</span>}>\n\t\t\t\t<SvgIcon component={FanMedIcon} viewBox=\"0 0 607.000000 607.000000\" />\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>,\n\t\t<ToggleButton value={FanStrengthOptions.High} aria-label={t('dashboard.minions.ac.fan.high')} style={{ color: getModeColor(props.isOn, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.ac.fan.high')}</span>}>\n\t\t\t\t<SvgIcon component={FanHighIcon} viewBox=\"0 0 607.000000 607.000000\" />\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>\n\t];\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tdirection=\"column\"\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\t// Make sure to keep order in RTL view too\n\t\t\t\tdirection={theme.direction === 'ltr' ? 'row' : 'row-reverse'}\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t\talignItems=\"center\"\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.ac.increase.temperature')}</span>}>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tdisabled={disabled || airConditioning?.temperature >= 30}\n\t\t\t\t\t\t\t\tstyle={{ padding: 0 }}\n\t\t\t\t\t\t\t\tonClick={() => { movTemperatureStep(1); }}\n\t\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t\t<ArrowDropUpIcon style={{ fontSize: props.fontRatio * 1.2, color: getModeColor(props.isOn, theme) }} />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.ac.decrease.temperature')}</span>}>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tdisabled={disabled || airConditioning?.temperature <= 16}\n\t\t\t\t\t\t\t\tstyle={{ padding: 0 }} // Make the 'hill' around the button smaller \n\t\t\t\t\t\t\t\tonClick={() => { movTemperatureStep(-1); }}\n\t\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t\t<ArrowDropDownIcon style={{ fontSize: props.fontRatio * 1.2, color: getModeColor(props.isOn, theme) }} />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t\t<div style={{ marginTop: props.fontRatio * 0.2 }}>\n\t\t\t\t\t<Typography style={{ fontSize: props.fontRatio * 2.3, color: getModeColor(props.isOn, theme) }}>{airConditioning?.temperature}</Typography>\n\t\t\t\t</div>\n\t\t\t\t<div style={{ margin: props.smallFontRatio * 0.6 }}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ToggleButtonGroup\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tvalue={airConditioning?.mode}\n\t\t\t\t\t\t\texclusive\n\t\t\t\t\t\t\tonChange={(e, v) => { changeMode(v); }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ToggleButton value={ACModeOptions.Hot} aria-label={t('dashboard.minions.ac.mode.hot')} style={{ color: getModeColor(props.isOn, theme) }}>\n\t\t\t\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.ac.mode.hot')}</span>}>\n\t\t\t\t\t\t\t\t\t<WavesIcon style={{ transform: 'rotate(-90deg)' }} />\n\t\t\t\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t<ToggleButton value={ACModeOptions.Cold} aria-label={t('dashboard.minions.ac.mode.cold')} style={{ color: getModeColor(props.isOn, theme) }}>\n\t\t\t\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.ac.mode.cold')}</span>}>\n\t\t\t\t\t\t\t\t\t<AcUnitIcon />\n\t\t\t\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t</ToggleButtonGroup>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t\t<div style={{ marginTop: `-${props.fontRatio / 2}px`, }}>\n\t\t\t\t<ToggleButtonGroup\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tvalue={airConditioning?.fanStrength}\n\t\t\t\t\texclusive\n\t\t\t\t\tonChange={(e, v) => { changeFan(v); }}\n\t\t\t\t>\n\t\t\t\t\t{theme.direction === 'ltr' ? fanOptions : fanOptions.reverse()}\n\t\t\t\t</ToggleButtonGroup>\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>;\n}\n","import { Grid, IconButton } from \"@material-ui/core\";\nimport { Fragment } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { MinionStatus, SwitchOptions } from \"../../../infrastructure/generated/api\";\nimport clonedeep from 'lodash.clonedeep';\nimport { TypeEditStatusProps } from \"./MinionEditStatus\";\nimport { SwitchMode } from \"../overviewMinionsStatus/SwitchMode\";\nimport { defaultMinionStatus } from \"../../../logic/common/minionsUtils\";\nimport { ThemeTooltip } from \"../../global/ThemeTooltip\";\n\n\nexport function SwitchEditStatus(props: TypeEditStatusProps) {\n\tconst { t } = useTranslation();\n\n\tconst toggle = props.minionStatus[props.minionType as unknown as keyof MinionStatus];\n\tconst disabled = props.disabled;\n\n\tasync function changeStatus() {\n\t\tlet minionStatus = clonedeep<any>(props.minionStatus);\n\t\tif (!minionStatus[props.minionType]) {\n\t\t\tminionStatus = defaultMinionStatus(props.minionType);\n\t\t}\n\t\tminionStatus[props.minionType].status = toggle?.status === SwitchOptions.On ? SwitchOptions.Off : SwitchOptions.On;\n\t\tprops.setMinionStatus(minionStatus);\n\t};\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<div style={{ marginTop: `${props.smallFontRatio}px` }}>\n\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.switch.press.to.toggle')}</span>}>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonClick={() => { changeStatus(); }}\n\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t<SwitchMode mode={toggle?.status || SwitchOptions.Off} fontRatio={props.fontRatio * 2.3} isOn={props.isOn} />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</ThemeTooltip>\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>;\n\n}\n","import { Grid, IconButton } from \"@material-ui/core\";\nimport { Fragment } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { SwitchOptions } from \"../../../infrastructure/generated/api\";\nimport clonedeep from 'lodash.clonedeep';\nimport { TypeEditStatusProps } from \"./MinionEditStatus\";\nimport { SwitchMode } from \"../overviewMinionsStatus/SwitchMode\";\nimport { defaultMinionStatus } from \"../../../logic/common/minionsUtils\";\nimport { ThemeTooltip } from \"../../global/ThemeTooltip\";\n\n\nexport function ToggleEditStatus(props: TypeEditStatusProps) {\n\tconst { t } = useTranslation();\n\n\tconst disabled = props.disabled;\n\n\tasync function changeStatus(switchOptions: SwitchOptions) {\n\t\tlet minionStatus = clonedeep<any>(props.minionStatus);\n\t\tif (!minionStatus[props.minionType]) {\n\t\t\tminionStatus = defaultMinionStatus(props.minionType);\n\t\t}\n\t\tminionStatus[props.minionType].status = switchOptions;\n\t\tprops.setMinionStatus(minionStatus);\n\t};\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<div style={{ marginTop: `${props.smallFontRatio}px` }}>\n\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.toggle.send.on.command')}</span>} >\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonClick={() => { changeStatus(SwitchOptions.On); }}\n\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t<SwitchMode mode={SwitchOptions.On} fontRatio={props.fontRatio * 2.3} isOn={true} />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</ThemeTooltip>\n\t\t\t</div>\n\t\t\t<div style={{ marginTop: `${props.smallFontRatio}px` }}>\n\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.toggle.send.off.command')}</span>} >\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonClick={() => { changeStatus(SwitchOptions.Off); }}\n\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t<SwitchMode mode={SwitchOptions.Off} fontRatio={props.fontRatio * 2.3} isOn={true} />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</ThemeTooltip>\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>;\n\n}\n","import { Grid, IconButton, Slider, Typography, useTheme } from \"@material-ui/core\";\nimport { Fragment, useEffect, useState } from \"react\";\nimport { getModeColor } from \"../../../logic/common/themeUtils\";\nimport { useTranslation } from \"react-i18next\";\nimport clonedeep from 'lodash.clonedeep';\nimport { TypeEditStatusProps } from \"./MinionEditStatus\";\nimport LightModeIcon from '@mui/icons-material/LightMode';\nimport { Stack, Theme, useMediaQuery } from \"@mui/material\";\nimport BrightnessHighIcon from '@mui/icons-material/BrightnessHigh';\nimport BrightnessLowIcon from '@mui/icons-material/BrightnessLow';\nimport InvertColorsIcon from '@mui/icons-material/InvertColors';\nimport InvertColorsOffIcon from '@mui/icons-material/InvertColorsOff';\nimport { ColorPicker, useColor, Color, toColor } from \"react-color-palette\";\nimport \"react-color-palette/lib/css/styles.css\";\nimport { defaultMinionStatus } from \"../../../logic/common/minionsUtils\";\nimport { ThemeTooltip } from \"../../global/ThemeTooltip\";\n\nconst presentsMarks = [\n\t{\n\t\tvalue: 1,\n\t\tlabel: '1%',\n\t},\n\t{\n\t\tvalue: 20,\n\t\tlabel: '20%',\n\t},\n\t{\n\t\tvalue: 40,\n\t\tlabel: '40%',\n\t},\n\t{\n\t\tvalue: 60,\n\t\tlabel: '60%',\n\t},\n\t{\n\t\tvalue: 80,\n\t\tlabel: '80%',\n\t},\n\t{\n\t\tvalue: 100,\n\t\tlabel: '100%',\n\t},\n];\n\nexport function ColorLightEditStatus(props: TypeEditStatusProps) {\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\tconst [color, setColor] = useColor(\"hex\", \"#000000\");\n\n\tconst colorLight = props.minionStatus.colorLight;\n\n\tuseEffect(() => {\n\t\t// Once the minionStatus was updated, re-set the color picker\n\t\tsetColor(toColor('rgb', { r: colorLight?.red || 0, g: colorLight?.green || 0, b: colorLight?.blue || 0 }));\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [colorLight?.blue, colorLight?.green, colorLight?.red]);\n\n\tconst disabled = !!props.disabled;\n\n\tasync function changeColor(color: Color) {\n\t\tif (disabled) {\n\t\t\treturn;\n\t\t}\n\t\t// If in edit mode, just simply keep the change\n\t\tsetColor(color);\n\t};\n\n\tasync function commitColor() {\n\t\tif (disabled) {\n\t\t\treturn;\n\t\t}\n\t\t// Once the change committed, send color selection update\n\t\tlet minionStatus = clonedeep<any>(props.minionStatus);\n\t\tif (!minionStatus[props.minionType]) {\n\t\t\tminionStatus = defaultMinionStatus(props.minionType);\n\t\t}\n\t\tminionStatus[props.minionType].red = color.rgb.r;\n\t\tminionStatus[props.minionType].green = color.rgb.g;\n\t\tminionStatus[props.minionType].blue = color.rgb.b;\n\t\tprops.setMinionStatus(minionStatus);\n\t};\n\n\treturn <Fragment>\n\t\t{/* First show the light regular selections (temp & bright) */}\n\t\t<TemperatureLightEditStatus {...props} />\n\t\t<Grid\n\t\t\tstyle={{ marginTop: `${props.smallFontRatio * 1.1}px` }}\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t{/* Commit changes only when the mouseup (or touch out in mobile), and *do not* commit while still clicking and selecting the color  */}\n\t\t\t<div onMouseUp={() => commitColor()}>\n\t\t\t\t<ColorPicker width={desktopMode ? 300 : 250} height={props.fontRatio * 2} color={color} onChange={(c) => changeColor(c as Color)} hideHSV hideHEX hideRGB dark />\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>;\n\n}\n\nexport function TemperatureLightEditStatus(props: TypeEditStatusProps) {\n\tconst { t } = useTranslation();\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\tconst theme = useTheme();\n\tconst [tempSlide, setTempSlide] = useState<number>(0);\n\n\tconst temperatureLight = props.minionStatus.temperatureLight || props.minionStatus.colorLight;\n\tconst disabled = !!props.disabled;\n\n\tuseEffect(() => {\n\t\t// Once the temp. changed. update the view\n\t\tsetTempSlide(temperatureLight?.temperature || 0);\n\t}, [temperatureLight?.temperature]);\n\n\n\tfunction handleSliderChange(event: any, newValue: number | number[]) {\n\t\tsetTempSlide(newValue as number);\n\t};\n\n\tfunction onSliderChangeCommitted(event: any, newValue: number | number[]) {\n\t\tchangeTemperature(newValue as number);\n\t};\n\n\tasync function changeTemperature(temperature: number) {\n\t\tlet minionStatus = clonedeep<any>(props.minionStatus);\n\t\tif (!minionStatus[props.minionType]) {\n\t\t\tminionStatus = defaultMinionStatus(props.minionType);\n\t\t}\n\t\tminionStatus[props.minionType].temperature = temperature;\n\t\tprops.setMinionStatus(minionStatus);\n\t};\n\n\treturn <Fragment>\n\t\t{/* First show the light bright */}\n\t\t<LightEditStatus {...props} />\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tdirection={theme.direction === 'ltr' ? 'row' : 'row-reverse'}\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t\talignItems=\"center\"\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<Typography style={{ fontSize: props.fontRatio * 1.3, color: getModeColor(props.isOn && !disabled, theme) }}>{temperatureLight?.temperature}</Typography>\n\t\t\t\t</div>\n\t\t\t\t<div style={{ margin: props.smallFontRatio * 0.2 }}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<InvertColorsIcon style={{ fontSize: props.smallFontRatio * 0.9, color: getModeColor(props.isOn && !disabled, theme) }} />\n\t\t\t\t\t\t<Typography style={{ fontSize: props.smallFontRatio * 0.9, color: getModeColor(props.isOn && !disabled, theme) }}>%</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\n\t\t\t<div style={{ width: '80%', minWidth: 260,  marginTop: `-${props.smallFontRatio}px`, height: `${props.fontRatio * 1.2}px` }}>\n\t\t\t\t<Stack spacing={2} direction=\"row\" alignItems=\"center\">\n\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.light.decrease.temperature')}</span>}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\tonClick={() => tempSlide > 1 && changeTemperature(tempSlide - 1)}\n\t\t\t\t\t\t\tstyle={{ padding: props.smallFontRatio * 0.1, color: getModeColor(props.isOn, theme) }}\n\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t<InvertColorsOffIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t<Slider disabled={disabled} marks={desktopMode ? presentsMarks : undefined} aria-label={t('dashboard.minions.light.slide.temperature')} min={1} max={100} style={{ color: getModeColor(props.isOn, theme) }} value={tempSlide} onChangeCommitted={onSliderChangeCommitted} onChange={handleSliderChange} />\n\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.light.increase.temperature')}</span>}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\tonClick={() => tempSlide < 100 && changeTemperature(tempSlide + 1)}\n\t\t\t\t\t\t\tstyle={{ padding: props.smallFontRatio * 0.1, color: getModeColor(props.isOn, theme) }}\n\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t<InvertColorsIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</Stack>\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>;\n\n}\n\nexport function LightEditStatus(props: TypeEditStatusProps) {\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\tconst [brightSlide, setBrightSlide] = useState<number>(0);\n\n\tconst light = props.minionStatus.light || props.minionStatus.temperatureLight || props.minionStatus.colorLight;\n\tconst disabled = !!props.disabled;\n\n\tuseEffect(() => {\n\t\t// Once the bright changed. update the view\n\t\tsetBrightSlide(light?.brightness || 0);\n\t}, [light?.brightness]);\n\n\n\tfunction handleSliderChange(event: any, newValue: number | number[]) {\n\t\tsetBrightSlide(newValue as number);\n\t};\n\n\tfunction onSliderChangeCommitted(event: any, newValue: number | number[]) {\n\t\tchangeBrightness(newValue as number);\n\t};\n\n\tasync function changeBrightness(brightness: number) {\n\t\tlet minionStatus = clonedeep<any>(props.minionStatus);\n\t\tif (!minionStatus[props.minionType]) {\n\t\t\tminionStatus = defaultMinionStatus(props.minionType);\n\t\t}\n\t\tminionStatus[props.minionType].brightness = brightness;\n\t\tprops.setMinionStatus(minionStatus);\n\t};\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tdirection={theme.direction === 'ltr' ? 'row' : 'row-reverse'}\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t\talignItems=\"center\"\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<Typography style={{ fontSize: props.fontRatio * 1.3, color: getModeColor(props.isOn && !disabled, theme) }}>{light?.brightness}</Typography>\n\t\t\t\t</div>\n\t\t\t\t<div style={{ margin: props.smallFontRatio * 0.2 }}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<LightModeIcon style={{ fontSize: props.smallFontRatio * 0.9, color: getModeColor(props.isOn && !disabled, theme) }} />\n\t\t\t\t\t\t<Typography style={{ fontSize: props.smallFontRatio * 0.9, color: getModeColor(props.isOn && !disabled, theme) }}>%</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\n\t\t\t<div style={{ width: '80%', minWidth: 260, marginTop: `-${props.smallFontRatio}px`, height: `${props.fontRatio * 1.2}px` }}>\n\t\t\t\t<Stack spacing={2} direction=\"row\" alignItems=\"center\">\n\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.light.decrease.brightness')}</span>}>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\tonClick={() => brightSlide > 1 && changeBrightness(brightSlide - 1)}\n\t\t\t\t\t\t\tstyle={{ padding: props.smallFontRatio * 0.1, color: getModeColor(props.isOn, theme) }}\n\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t<BrightnessLowIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t<Slider disabled={disabled} marks={desktopMode ? presentsMarks : undefined} aria-label={t('dashboard.minions.light.slide.brightness')} min={1} max={100} style={{ color: getModeColor(props.isOn, theme) }} value={brightSlide} onChangeCommitted={onSliderChangeCommitted} onChange={handleSliderChange} />\n\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.light.increase.brightness')}</span>} >\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\tonClick={() => brightSlide < 100 && changeBrightness(brightSlide + 1)}\n\t\t\t\t\t\t\tstyle={{ padding: props.smallFontRatio * 0.1, color: getModeColor(props.isOn, theme) }}\n\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t<BrightnessHighIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</Stack>\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>;\n}\n","import { Grid, useTheme } from \"@material-ui/core\";\nimport { Fragment } from \"react\";\n// import '../../theme/styles/components/minions/minionsStatusOverview.scss';\nimport { getModeColor } from \"../../../logic/common/themeUtils\";\nimport { useTranslation } from \"react-i18next\";\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport { RollerDirection } from \"../../../infrastructure/generated/api\";\nimport clonedeep from 'lodash.clonedeep';\nimport { TypeEditStatusProps } from \"./MinionEditStatus\";\nimport ArrowCircleUpIcon from '@mui/icons-material/ArrowCircleUp';\nimport ArrowCircleDownIcon from '@mui/icons-material/ArrowCircleDown';\nimport { defaultMinionStatus } from \"../../../logic/common/minionsUtils\";\nimport { ThemeTooltip } from \"../../global/ThemeTooltip\";\n\nexport function RollerEditStatus(props: TypeEditStatusProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\n\tconst roller = props.minionStatus.roller;\n\tconst disabled = props.disabled;\n\n\tasync function changeDirection(direction: RollerDirection) {\n\t\tlet minionStatus = clonedeep<any>(props.minionStatus);\n\t\tif (!minionStatus[props.minionType]) {\n\t\t\tminionStatus = defaultMinionStatus(props.minionType);\n\t\t}\n\t\tminionStatus[props.minionType].direction = direction || minionStatus[props.minionType].direction;\n\t\tprops.setMinionStatus(minionStatus);\n\t};\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tstyle={{ marginTop: `${props.smallFontRatio}px` }}\n\t\t\tcontainer\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<ToggleButtonGroup\n\t\t\t\tdisabled={disabled}\n\t\t\t\torientation=\"vertical\"\n\t\t\t\tsize=\"medium\"\n\t\t\t\tvalue={roller?.direction}\n\t\t\t\texclusive\n\t\t\t\tonChange={(e, v) => { changeDirection(v); }}\n\t\t\t>\n\t\t\t\t<ToggleButton value={RollerDirection.Up} aria-label={t('dashboard.minions.roller.roll.up')} style={{ color: getModeColor(props.isOn, theme) }}>\n\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.roller.roll.up')}</span>}>\n\t\t\t\t\t\t<ArrowCircleUpIcon style={{ fontSize: props.fontRatio }} />\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</ToggleButton>\n\t\t\t\t<ToggleButton value={RollerDirection.Down} aria-label={t('dashboard.minions.roller.roll.down')} style={{ color: getModeColor(props.isOn, theme) }}>\n\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.roller.roll.down')}</span>}>\n\t\t\t\t\t\t<ArrowCircleDownIcon style={{ fontSize: props.fontRatio }} />\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</ToggleButton>\n\t\t\t</ToggleButtonGroup>\n\t\t</Grid>\n\t</Fragment>;\n\n}\n","import { Grid, SvgIcon, useTheme } from \"@material-ui/core\";\nimport { Fragment } from \"react\";\nimport { getModeColor } from \"../../../logic/common/themeUtils\";\nimport { useTranslation } from \"react-i18next\";\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport { FanStrengthOptions } from \"../../../infrastructure/generated/api\";\nimport clonedeep from 'lodash.clonedeep';\nimport AutoIcon from '@mui/icons-material/HdrAuto';\nimport { TypeEditStatusProps } from \"./MinionEditStatus\";\nimport { ReactComponent as FanHighIcon } from '../../../theme/icons/fanHigh.svg';\nimport { ReactComponent as FanMedIcon } from '../../../theme/icons/fanMed.svg';\nimport { ReactComponent as FanLowIcon } from '../../../theme/icons/fanLow.svg';\nimport { defaultMinionStatus } from \"../../../logic/common/minionsUtils\";\nimport { ThemeTooltip } from \"../../global/ThemeTooltip\";\n\nexport function CleanerEditStatus(props: TypeEditStatusProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\n\tconst cleaner = props.minionStatus.cleaner;\n\tconst disabled = props.disabled;\n\n\tasync function changeFan(fanSpeed: FanStrengthOptions) {\n\t\tlet minionStatus = clonedeep<any>(props.minionStatus);\n\t\tif (!minionStatus[props.minionType]) {\n\t\t\tminionStatus = defaultMinionStatus(props.minionType);\n\t\t}\n\t\tminionStatus[props.minionType].fanSpeed = fanSpeed || minionStatus[props.minionType].fanSpeed;\n\t\tprops.setMinionStatus(minionStatus);\n\t};\n\n\tconst fanOptions = [\n\t\t<ToggleButton value={FanStrengthOptions.Auto} aria-label={t('dashboard.minions.cleaner.fan.auto')} style={{ color: getModeColor(props.isOn, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.cleaner.fan.auto')}</span>}>\n\t\t\t\t<AutoIcon style={{ fontSize: props.fontRatio * 0.8 }} />\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>,\n\t\t<ToggleButton value={FanStrengthOptions.Low} aria-label={t('dashboard.minions.cleaner.fan.low')} style={{ color: getModeColor(props.isOn, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.cleaner.fan.low')}</span>}>\n\t\t\t\t<SvgIcon style={{ fontSize: props.fontRatio * 0.8 }} component={FanLowIcon} viewBox=\"0 0 607.000000 607.000000\" />\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>,\n\t\t<ToggleButton value={FanStrengthOptions.Med} aria-label={t('dashboard.minions.cleaner.fan.med')} style={{ color: getModeColor(props.isOn, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.cleaner.fan.med')}</span>}>\n\t\t\t\t<SvgIcon style={{ fontSize: props.fontRatio * 0.8 }} component={FanMedIcon} viewBox=\"0 0 607.000000 607.000000\" />\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>,\n\t\t<ToggleButton value={FanStrengthOptions.High} aria-label={t('dashboard.minions.cleaner.fan.high')} style={{ color: getModeColor(props.isOn, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.cleaner.fan.high')}</span>}>\n\t\t\t\t<SvgIcon style={{ fontSize: props.fontRatio * 0.8 }} component={FanHighIcon} viewBox=\"0 0 607.000000 607.000000\" />\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>\n\t];\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tstyle={{ marginTop: `${props.smallFontRatio}px` }}\n\t\t\tcontainer\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<ToggleButtonGroup\n\t\t\t\tdisabled={disabled}\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\tsize=\"medium\"\n\t\t\t\tvalue={cleaner?.fanSpeed}\n\t\t\t\texclusive\n\t\t\t\tonChange={(e, v) => { changeFan(v); }}\n\t\t\t>\n\t\t\t\t{theme.direction === 'ltr' ? fanOptions : fanOptions.reverse()}\n\t\t\t</ToggleButtonGroup>\n\t\t</Grid>\n\t</Fragment>;\n\n}\n","import { MinionStatus } from \"../../../infrastructure/generated/api\";\nimport { MinionTypes } from \"../../../infrastructure/generated/api\";\nimport { EditAirConditioning } from \"./AcEditStatus\";\nimport '../../../theme/styles/components/minions/minionEditStatus.scss';\nimport { SwitchEditStatus } from \"./SwitchEditStatus\";\nimport { ToggleEditStatus } from \"./ToggleEditStatus\";\nimport { ColorLightEditStatus, LightEditStatus, TemperatureLightEditStatus } from \"./LightEditStatus\";\nimport { RollerEditStatus } from \"./RollerEditStatus\";\nimport { CleanerEditStatus } from \"./CleanerEditStatus\";\nimport { isOnMode } from \"../../../logic/common/minionsUtils\";\n\nexport interface EditStatusProps {\n\tminionType: MinionTypes;\n\tminionStatus: MinionStatus;\n\tsetMinionStatus: (minionStatusToSet: MinionStatus) => void;\n\tdisabled?: boolean;\n\tfontRatio: number;\n\tsmallFontRatio?: number;\n}\n\nexport interface TypeEditStatusProps extends EditStatusProps {\n\tsmallFontRatio: number;\n\tisOn: boolean;\n}\n\nexport function MinionEditStatus(props: EditStatusProps) {\n\tconst { minionStatus, minionType, disabled, fontRatio } = props;\n\n\tconst isOn = !disabled && isOnMode(minionType, minionStatus);\n\tconst smallFontRatio = props.smallFontRatio || (fontRatio * 0.5);\n\n\treturn <div className=\"minion-edit-status-overview-container\">\n\t\t{minionType === MinionTypes.Toggle && <ToggleEditStatus {...props} isOn={isOn} smallFontRatio={smallFontRatio} />}\n\t\t{minionType === MinionTypes.Switch && <SwitchEditStatus {...props} isOn={isOn} smallFontRatio={smallFontRatio} />}\n\t\t{minionType === MinionTypes.Light && <LightEditStatus {...props} isOn={isOn} smallFontRatio={smallFontRatio} />}\n\t\t{minionType === MinionTypes.TemperatureLight && <TemperatureLightEditStatus {...props} isOn={isOn} smallFontRatio={smallFontRatio} />}\n\t\t{minionType === MinionTypes.ColorLight && <ColorLightEditStatus {...props} isOn={isOn} smallFontRatio={smallFontRatio} />}\n\t\t{minionType === MinionTypes.AirConditioning && <EditAirConditioning {...props} isOn={isOn} smallFontRatio={smallFontRatio} />}\n\t\t{minionType === MinionTypes.Roller && <RollerEditStatus {...props} isOn={isOn} smallFontRatio={smallFontRatio} />}\n\t\t{minionType === MinionTypes.Cleaner && <CleanerEditStatus {...props} isOn={isOn} smallFontRatio={smallFontRatio} />}\n\t</div>\n}","import { ApiFacade } from \"../infrastructure/generated/proxies/api-proxies\";\nimport { DataService } from \"../infrastructure/data-service-base\";\nimport { envFacade } from \"../infrastructure/env-facade\";\nimport { sessionManager } from \"../infrastructure/session-manager\";\nimport { API_KEY_HEADER } from \"../infrastructure/consts\";\nimport { Timing, TimingFeed } from \"../infrastructure/generated/api\";\n\n// Inherited from DataService\nclass TimingsService extends DataService<Timing[]> {\n\n\t// The timing SSE feed object\n\ttimingsServerFeed: EventSource;\n\n\tprivate onTimingsFeedUpdate(timingFeedEvent: MessageEvent) {\n\t\t// Ignore the init message\n\t\tif (timingFeedEvent.data === '\"init\"') {\n\t\t\treturn;\n\t\t}\n\n\t\t// Handle the incoming message\n\t\tconst timingFeed: TimingFeed = JSON.parse(timingFeedEvent.data);\n\n\t\t// TODO, show some popup about the timing that activated\n\t\tconsole.log(JSON.stringify(timingFeed));\n\t}\n\n\tpublic updateTiming(timing: Timing) {\n\t\tconst timingIndex = this._data.findIndex(m => m.timingId === timing.timingId);\n\t\tif (timingIndex !== -1) {\n\t\t\tthis._data[timingIndex] = timing;\n\t\t}\n\t\t// Publish the update\n\t\tthis.postNewData(this._data);\n\t}\n\n\tpublic createTiming(timing: Timing) {\n\t\tthis._data.push(timing);\n\t\t// Publish the update\n\t\tthis.postNewData(this._data);\n\t}\n\n\tpublic deleteTiming(timing: Timing) {\n\t\tconst timingIndex = this._data.findIndex(m => m.timingId === timing.timingId);\n\n\t\tif (timingIndex !== -1) {\n\t\t\tthis._data.splice(timingIndex, 1);\n\t\t}\n\t\t// Publish the update\n\t\tthis.postNewData(this._data);\n\t}\n\n\tfetchData(): Promise<Timing[]> {\n\t\t// Get the fetch data function (without activating it yet)\n\t\tconst timingsFetchFunc = ApiFacade.TimingsApi.getTimings();\n\n\t\ttry {\n\t\t\t// Restart SSE feed\n\t\t\tif (this.timingsServerFeed) {\n\t\t\t\tthis.timingsServerFeed.close();\n\t\t\t}\n\n\t\t\t// Open SSE connection\n\t\t\tthis.timingsServerFeed = new EventSource(`${envFacade.apiUrl}/feed/timings?${API_KEY_HEADER}=${sessionManager.getToken()}`, {\n\t\t\t\twithCredentials: true,\n\t\t\t});\n\n\t\t\t// Subscribe to updated\n\t\t\tthis.timingsServerFeed.onmessage = (timingFeedEvent: MessageEvent) => {\n\t\t\t\tthis.onTimingsFeedUpdate(timingFeedEvent);\n\t\t\t};\n\t\t} catch (error) {\n\t\t\t// TODO:LOG\n\t\t}\t\n\n\t\t// TODO: on close/error?\n\t\treturn timingsFetchFunc;\n\t}\n}\n\nexport const timingsService = new TimingsService();","import { Fragment, useEffect, useState } from \"react\";\nimport { DailySunTrigger, DailyTimeTrigger, DaysOptions, OnceTiming, SunTriggerOptions, TimeoutTiming, TimingProperties, TimingTypes } from \"../../infrastructure/generated/api\";\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport { Grid, Theme, useTheme } from \"@material-ui/core\";\nimport { getModeColor, marginLeft } from \"../../logic/common/themeUtils\";\nimport { useTranslation } from \"react-i18next\";\nimport { Duration } from 'unitsnet-js';\nimport ModeNightIcon from '@mui/icons-material/ModeNight';\nimport WbTwilightIcon from '@mui/icons-material/WbTwilight';\nimport ScheduleIcon from '@mui/icons-material/Schedule';\nimport TodayIcon from '@mui/icons-material/Today';\nimport TimerIcon from '@mui/icons-material/Timer';\nimport TimerOffIcon from '@mui/icons-material/TimerOff';\nimport { msToHMS } from \"../../logic/common/minionsUtils\";\nimport { TFunction } from \"i18next\";\nimport { ThemeTooltip } from \"../global/ThemeTooltip\";\n\ninterface TimingOverviewProps {\n\ttimingType: TimingTypes;\n\ttimingProperties: TimingProperties;\n\tfontRatio: number;\n\tdisabled?: boolean;\n}\n\n/** Build days in week toggle options */\nexport function daysOptions(t: TFunction, fontRatio: number, theme: Theme, disabled: boolean): JSX.Element[] {\n\treturn [\n\t\t<ToggleButton value={DaysOptions.Sunday} aria-label={t('dashboard.timings.days.sunday')} style={{ color: getModeColor(!disabled, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.timings.days.sunday')}</span>}>\n\t\t\t\t<span style={{ fontSize: fontRatio }}>{t('dashboard.timings.days.short.sunday')}</span>\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>,\n\t\t<ToggleButton value={DaysOptions.Monday} aria-label={t('dashboard.timings.days.monday')} style={{ color: getModeColor(!disabled, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.timings.days.monday')}</span>}>\n\t\t\t\t<span style={{ fontSize: fontRatio }}>{t('dashboard.timings.days.short.monday')}</span>\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>,\n\t\t<ToggleButton value={DaysOptions.Tuesday} aria-label={t('dashboard.timings.days.tuesday')} style={{ color: getModeColor(!disabled, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.timings.days.tuesday')}</span>}>\n\t\t\t\t<span style={{ fontSize: fontRatio }}>{t('dashboard.timings.days.short.tuesday')}</span>\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>,\n\t\t<ToggleButton value={DaysOptions.Wednesday} aria-label={t('dashboard.timings.days.wednesday')} style={{ color: getModeColor(!disabled, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.timings.days.wednesday')}</span>}>\n\t\t\t\t<span style={{ fontSize: fontRatio }}>{t('dashboard.timings.days.short.wednesday')}</span>\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>,\n\t\t<ToggleButton value={DaysOptions.Thursday} aria-label={t('dashboard.timings.days.thursday')} style={{ color: getModeColor(!disabled, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.timings.days.thursday')}</span>}>\n\t\t\t\t<span style={{ fontSize: fontRatio }}>{t('dashboard.timings.days.short.thursday')}</span>\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>,\n\t\t<ToggleButton value={DaysOptions.Friday} aria-label={t('dashboard.timings.days.friday')} style={{ color: getModeColor(!disabled, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.timings.days.friday')}</span>}>\n\t\t\t\t<span style={{ fontSize: fontRatio }}>{t('dashboard.timings.days.short.friday')}</span>\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>,\n\t\t<ToggleButton value={DaysOptions.Saturday} aria-label={t('dashboard.timings.days.saturday')} style={{ color: getModeColor(!disabled, theme) }}>\n\t\t\t<ThemeTooltip title={<span>{t('dashboard.timings.days.saturday')}</span>}>\n\t\t\t\t<span style={{ fontSize: fontRatio }}>{t('dashboard.timings.days.short.saturday')}</span>\n\t\t\t</ThemeTooltip>\n\t\t</ToggleButton>\n\t];\n}\n\nexport function DailySunTriggerOverview(props: TimingOverviewProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\n\tconst dailySunTrigger = props.timingProperties.dailySunTrigger as DailySunTrigger;\n\tconst disabled = !!props.disabled;\n\tconst fontRatio = props.fontRatio;\n\n\tconst SubEventIcon = dailySunTrigger?.sunTrigger === SunTriggerOptions.Sunrise ? WbTwilightIcon : ModeNightIcon;\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tdirection=\"column\"\n\t\t\tjustifyContent=\"flex-start\"\n\t\t\talignItems=\"flex-start\"\n\t\t>\n\t\t\t<div style={{ marginBottom: props.fontRatio * 0.2 }}>\n\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.timings.sun.trigger.tip', {\n\t\t\t\t\tminutes: Math.abs(dailySunTrigger.durationMinutes),\n\t\t\t\t\trelation: dailySunTrigger.durationMinutes <= 0 ? t('global.before') : t('global.after'),\n\t\t\t\t\tevent: dailySunTrigger.sunTrigger === SunTriggerOptions.Sunrise ? t('global.sunrise') : t('global.sunset')\n\t\t\t\t})}</span>}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<SubEventIcon style={{ fontSize: fontRatio, color: getModeColor(!disabled, theme) }} />\n\t\t\t\t\t\t<span style={{ [marginLeft(theme)]: props.fontRatio * 0.5, color: getModeColor(!disabled, theme) }} >{dailySunTrigger.durationMinutes < 0 ? '-' : '+'}{Math.abs(dailySunTrigger.durationMinutes)} {t('global.minutes')}</span>\n\t\t\t\t\t</Grid>\n\t\t\t\t</ThemeTooltip>\n\t\t\t</div>\n\t\t\t<ToggleButtonGroup\n\t\t\t\tdisabled={true}\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\tsize=\"small\"\n\t\t\t\tvalue={dailySunTrigger?.days}\n\t\t\t\texclusive\n\t\t\t>\n\t\t\t\t{daysOptions(t, fontRatio * 0.4, theme, disabled)}\n\t\t\t</ToggleButtonGroup>\n\t\t</Grid>\n\t</Fragment>;\n}\n\nexport function DailyTimeTriggerOverview(props: TimingOverviewProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\n\tconst dailyTimeTrigger = props.timingProperties.dailyTimeTrigger as DailyTimeTrigger;\n\tconst disabled = !!props.disabled;\n\tconst fontRatio = props.fontRatio;\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tdirection=\"column\"\n\t\t\tjustifyContent=\"flex-start\"\n\t\t\talignItems=\"flex-start\"\n\t\t>\n\t\t\t<div style={{ marginBottom: props.fontRatio * 0.2 }}>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t>\n\t\t\t\t\t<ScheduleIcon style={{ fontSize: fontRatio, color: getModeColor(!disabled, theme) }} />\n\t\t\t\t\t<span style={{ [marginLeft(theme)]: props.fontRatio * 0.5, color: getModeColor(!disabled, theme) }} >{dailyTimeTrigger.hour}:{`${dailyTimeTrigger.minutes}`.padStart(2, '0')}</span>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t\t<ToggleButtonGroup\n\t\t\t\tdisabled={true}\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\tsize=\"small\"\n\t\t\t\tvalue={dailyTimeTrigger?.days}\n\t\t\t\texclusive\n\t\t\t>\n\t\t\t\t{daysOptions(t, fontRatio * 0.4, theme, disabled)}\n\t\t\t</ToggleButtonGroup>\n\t\t</Grid>\n\t</Fragment>;\n}\n\nexport function OnceTimingOverview(props: TimingOverviewProps) {\n\tconst theme = useTheme();\n\n\tconst onceTiming = props.timingProperties.once as OnceTiming;\n\tconst fontRatio = props.fontRatio;\n\tconst disabled = !!props.disabled;\n\tconst triggerTime = new Date(onceTiming.date);\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tdirection=\"column\"\n\t\t\tjustifyContent=\"flex-start\"\n\t\t\talignItems=\"flex-start\"\n\t\t>\n\t\t\t<div style={{ marginBottom: props.fontRatio * 0.2 }}>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t>\n\t\t\t\t\t<ScheduleIcon style={{ fontSize: fontRatio, color: getModeColor(!disabled, theme) }} />\n\t\t\t\t\t<span style={{ [marginLeft(theme)]: props.fontRatio * 0.5, color: getModeColor(!disabled, theme) }} >{triggerTime.getHours()}:{`${triggerTime.getMinutes()}`.padStart(2, '0')}</span>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t>\n\t\t\t\t\t<TodayIcon style={{ fontSize: fontRatio, color: getModeColor(!disabled, theme) }} />\n\t\t\t\t\t<span style={{ [marginLeft(theme)]: props.fontRatio * 0.5, color: getModeColor(!disabled, theme) }} >{triggerTime.toLocaleDateString()}</span>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>;\n}\n\nexport function TimeoutTimingOverview(props: TimingOverviewProps) {\n\tconst theme = useTheme();\n\tconst [isPassed, setIsPassed] = useState<boolean>();\n\tconst [triggerIn, setTriggerIn] = useState<Duration>();\n\n\tconst timeoutTiming = props.timingProperties.timeout as TimeoutTiming;\n\n\tuseEffect(() => {\n\n\t\tconst intervalHandler = setInterval(() => {\n\t\t\t// Calc the time left to the timeout trigger\n\t\t\tconst now = Duration.FromMilliseconds(new Date().getTime());\n\t\t\tconst durationInMinutes = Duration.FromMinutes(timeoutTiming.durationInMinutes);\n\t\t\tconst startDate = Duration.FromMilliseconds(timeoutTiming.startDate);\n\t\t\tconst triggerDate = startDate.add(durationInMinutes);\n\n\t\t\t// Update state only if something has been changed\n\t\t\tconst calcTriggerIn = triggerDate.subtract(now);\n\t\t\tif (!triggerIn || !triggerIn.equals(calcTriggerIn)) {\n\t\t\t\tsetTriggerIn(calcTriggerIn);\n\t\t\t}\n\t\t\tconst calcIsPassed = now.compareTo(triggerDate) === 1;\n\t\t\tif (isPassed !== calcIsPassed) {\n\t\t\t\tsetIsPassed(calcIsPassed);\n\t\t\t}\n\t\t}, 1000);\n\n\t\treturn () => {\n\t\t\tintervalHandler && clearInterval(intervalHandler);\n\t\t};\n\t});\n\n\tconst fontRatio = props.fontRatio;\n\tconst TimeoutIcon = isPassed ? TimerOffIcon : TimerIcon;\n\tconst displayDuration = msToHMS(triggerIn?.Milliseconds || 0);\n\tconst disabled = !!props.disabled;\n\n\t// startDate.add\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tdirection=\"column\"\n\t\t\tjustifyContent=\"flex-start\"\n\t\t\talignItems=\"flex-start\"\n\t\t>\n\t\t\t<div>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t>\n\t\t\t\t\t<TimeoutIcon style={{ fontSize: fontRatio, color: getModeColor(!disabled, theme) }} />\n\t\t\t\t\t<span style={{ [marginLeft(theme)]: props.fontRatio * 0.5, color: getModeColor(!disabled, theme) }} >{isPassed\n\t\t\t\t\t\t? <span>--:--:--</span>\n\t\t\t\t\t\t// Show the time left, but in the last second, dont show seconds left, since the server trigger is in sensitivity of minutes and not seconds\n\t\t\t\t\t\t: <span>{`${displayDuration.hours}`.padStart(2, '0')}:{`${displayDuration.minutes}`.padStart(2, '0')}:{`${displayDuration.minutes ? displayDuration.seconds : 0}`.padStart(2, '0')}</span>\n\t\t\t\t\t}</span>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>;\n}\n\nexport function TimingOverview(props: TimingOverviewProps) {\n\tconst { timingType } = props;\n\treturn <div>\n\t\t{timingType === TimingTypes.DailySunTrigger && <DailySunTriggerOverview {...props} />}\n\t\t{timingType === TimingTypes.DailyTimeTrigger && <DailyTimeTriggerOverview {...props} />}\n\t\t{timingType === TimingTypes.Once && <OnceTimingOverview {...props} />}\n\t\t{timingType === TimingTypes.Timeout && <TimeoutTimingOverview {...props} />}\n\t</div>;\n}","import { Grid, IconButton, useTheme } from \"@material-ui/core\";\nimport { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\"\nimport { ApiFacade } from \"../../infrastructure/generated/proxies/api-proxies\";\nimport { handleServerRestError } from \"../../services/notifications.service\";\nimport { timingsService } from \"../../services/timings.service\";\nimport clonedeep from 'lodash.clonedeep';\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport { Timing } from \"../../infrastructure/generated/api\";\nimport { AlertDialog } from \"../AlertDialog\";\nimport CloseIcon from '@material-ui/icons/Close';\nimport { ThemeSwitch } from \"../global/ThemeSwitch\";\nimport { ThemeTooltip } from \"../global/ThemeTooltip\";\nimport { marginLeft } from \"../../logic/common/themeUtils\";\n\ninterface TimingOverviewControlsProps {\n\ttiming: Timing;\n\tfontRatio: number;\n\tsetEditMode: (editMode: boolean) => void;\n\teditMode: boolean;\n}\n\nexport function TimingOverviewControls(props: TimingOverviewControlsProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\tconst [settingActive, setSettingActive] = useState<boolean>(false);\n\tconst [deleting, setDeleting] = useState<boolean>(false);\n\tconst [openDeleteModel, setOpenDeleteModel] = useState<boolean>(false);\n\n\tconst { fontRatio, timing, editMode } = props;\n\n\tasync function changeTimingActive() {\n\t\tsetSettingActive(true);\n\t\ttry {\n\t\t\tconst editedTiming = clonedeep<Timing>(timing);\n\t\t\teditedTiming.isActive = !!!timing.isActive;\n\t\t\tawait ApiFacade.TimingsApi.setTiming(editedTiming, editedTiming.timingId);\n\t\t\t// Do not fetch again, just update service\n\t\t\ttimingsService.updateTiming(editedTiming);\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetSettingActive(false);\n\t}\n\n\tasync function deleteTiming() {\n\t\tsetDeleting(true);\n\t\ttry {\n\t\t\tawait ApiFacade.TimingsApi.deleteTiming(timing.timingId);\n\t\t\t// Do not fetch again, just update service\n\t\t\ttimingsService.deleteTiming(timing);\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetDeleting(false);\n\t}\n\n\treturn <div style={{ [marginLeft(theme)]: fontRatio * 0.25, minWidth: fontRatio * 2.5 }}>\n\t\t<AlertDialog\n\t\t\topen={openDeleteModel}\n\t\t\tcancelText={t('global.cancel')}\n\t\t\tsubmitText={t('dashboard.timings.delete.timing')}\n\t\t\ttitle={t('dashboard.timings.delete.timing.alert.title')}\n\t\t\ttext={t('dashboard.timings.delete.timing.alert.text')}\n\t\t\tonCancel={() => setOpenDeleteModel(false)}\n\t\t\tonSubmit={() => { setOpenDeleteModel(false); deleteTiming(); }}\n\t\t\tsubmitColor={'error'}\n\t\t/>\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tdirection=\"column\"\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t{/* The switch have fixed size, so just take the container with same dimensions */}\n\t\t\t<div style={{ width: '58px', height: '38px' }}>\n\t\t\t\t{!settingActive && <ThemeSwitch disabled={settingActive || deleting} checked={props.timing.isActive} size=\"medium\" onChange={() => changeTimingActive()} />}\n\t\t\t\t{settingActive && <div style={{ [marginLeft(theme)]: fontRatio, marginTop: 10 }}>\n\t\t\t\t\t<CircularProgress thickness={5} size={fontRatio} />\n\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<Grid\n\t\t\t\tstyle={{ minWidth: fontRatio * 2 }}\n\t\t\t\tcontainer\n\t\t\t\tdirection=\"row\"\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t\talignItems=\"center\"\n\t\t\t>\n\t\t\t\t{!editMode && !deleting && <div>\n\t\t\t\t\t<ThemeTooltip title={<span>{t('global.edit')}</span>} >\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.1 }}\n\t\t\t\t\t\t\tonClick={() => { props.setEditMode(true); }}\n\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t<EditIcon style={{ fontSize: fontRatio * 0.9 }} />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</div>}\n\t\t\t\t{editMode && <div>\n\t\t\t\t\t<ThemeTooltip title={<span>{t('global.close')}</span>} >\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.1 }}\n\t\t\t\t\t\t\tonClick={() => { props.setEditMode(false); }}\n\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t<CloseIcon style={{ fontSize: fontRatio * 0.9 }} />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</div>}\n\t\t\t\t{!deleting && <div>\n\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.timings.delete.timing')}</span>} >\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.1 }}\n\t\t\t\t\t\t\tonClick={() => { setOpenDeleteModel(true); }}\n\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t<DeleteIcon style={{ fontSize: fontRatio * 0.9 }} />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</div>}\n\t\t\t\t{deleting && <div>\n\t\t\t\t\t<CircularProgress thickness={5} size={fontRatio * 0.7} />\n\t\t\t\t</div>}\n\t\t\t</Grid>\n\t\t</Grid>\n\t</div>;\n}","import { Fragment, useState } from \"react\";\nimport { DaysOptions, SunTriggerOptions, TimingProperties, TimingTypes } from \"../../infrastructure/generated/api\";\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport { Grid, useTheme } from \"@material-ui/core\";\nimport { getModeColor } from \"../../logic/common/themeUtils\";\nimport { useTranslation } from \"react-i18next\";\nimport ModeNightIcon from '@mui/icons-material/ModeNight';\nimport WbTwilightIcon from '@mui/icons-material/WbTwilight';\nimport TextField from \"@mui/material/TextField\";\nimport { daysOptions } from \"./TimingOverview\";\nimport TimePicker from \"@mui/lab/TimePicker\";\nimport LocalizationProvider from \"@mui/lab/LocalizationProvider\";\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\nimport frLocale from 'date-fns/locale/fr';\nimport DateTimePicker from \"@mui/lab/DateTimePicker\";\nimport { ThemeTooltip } from \"../global/ThemeTooltip\";\n\ninterface TimingEditProps {\n\ttimingType: TimingTypes;\n\ttimingProperties: TimingProperties;\n\tsetTimingProperties: (timingProperties: TimingProperties) => void;\n\tfontRatio: number;\n\tdisabled?: boolean;\n}\n\nexport function DailySunTriggerEdit(props: TimingEditProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\tconst [sunTrigger, setSunTrigger] = useState<SunTriggerOptions>(props.timingProperties?.dailySunTrigger?.sunTrigger || SunTriggerOptions.Sunrise);\n\tconst [days, setDays] = useState<DaysOptions[]>(props.timingProperties?.dailySunTrigger?.days || []);\n\tconst [durationMinutes, setDurationMinutes] = useState<number>(props.timingProperties?.dailySunTrigger?.durationMinutes || 0);\n\tconst [durationInputValue, setDurationInputValue] = useState<string>(`${durationMinutes}`);\n\n\tfunction sendTimingProperties(durationMinutes: number, sunTrigger: SunTriggerOptions, days: DaysOptions[]) {\n\t\tprops.setTimingProperties({\n\t\t\tdailySunTrigger: {\n\t\t\t\tdurationMinutes,\n\t\t\t\tsunTrigger,\n\t\t\t\tdays: [...days], // make sure to copy and not send ref\n\t\t\t}\n\t\t})\n\t}\n\n\treturn <Grid\n\t\tcontainer\n\t\tdirection=\"column\"\n\t\tjustifyContent=\"center\"\n\t\talignItems=\"center\"\n\t>\n\t\t<Grid\n\t\t\tstyle={{ marginBottom: props.fontRatio }}\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<ToggleButtonGroup\n\t\t\t\tdisabled={props.disabled}\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\tsize=\"small\"\n\t\t\t\tvalue={sunTrigger}\n\t\t\t\tonChange={(e, v) => {\n\t\t\t\t\tif (!v) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsetSunTrigger(v);\n\t\t\t\t\tsendTimingProperties(durationMinutes, v, days);\n\t\t\t\t}}\n\t\t\t\texclusive\n\t\t\t>\n\t\t\t\t<ToggleButton value={SunTriggerOptions.Sunrise} aria-label={t('global.sunrise')} style={{ color: getModeColor(true, theme) }}>\n\t\t\t\t\t<ThemeTooltip title={<span>{t('global.sunrise')}</span>}>\n\t\t\t\t\t\t<WbTwilightIcon />\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</ToggleButton>\n\t\t\t\t<ToggleButton value={SunTriggerOptions.Sunset} aria-label={t('global.sunset')} style={{ color: getModeColor(true, theme) }}>\n\t\t\t\t\t<ThemeTooltip title={<span>{t('global.sunset')}</span>}>\n\t\t\t\t\t\t<ModeNightIcon />\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</ToggleButton>\n\t\t\t</ToggleButtonGroup>\n\t\t\t{/* Put some distance between */}\n\t\t\t<div style={{ width: props.fontRatio * 2 }}></div>\n\t\t\t<TextField\n\t\t\t\tdisabled={props.disabled}\n\t\t\t\tstyle={{ width: props.fontRatio * 6 }}\n\t\t\t\tvariant=\"standard\"\n\t\t\t\tid=\"outlined-number\"\n\t\t\t\tlabel={t('dashboard.timings.sun.trigger.minutes.duration.label')}\n\t\t\t\ttype=\"number\"\n\t\t\t\tvalue={durationInputValue}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tshrink: true,\n\t\t\t\t}}\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tconst rawValue = e.target.value;\n\t\t\t\t\tsetDurationInputValue(rawValue);\n\t\t\t\t\tconst newDuration = parseInt(rawValue, 10);\n\t\t\t\t\tif (isNaN(newDuration)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsetDurationMinutes(newDuration);\n\t\t\t\t\tsendTimingProperties(newDuration, sunTrigger, days);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Grid>\n\t\t<ToggleButtonGroup\n\t\t\tdisabled={props.disabled}\n\t\t\torientation=\"horizontal\"\n\t\t\tsize=\"small\"\n\t\t\tvalue={days}\n\t\t\texclusive\n\t\t\tonChange={(e, v) => {\n\t\t\t\tlet newDays: DaysOptions[];\n\t\t\t\tif (!days.includes(v)) {\n\t\t\t\t\tnewDays = [...days, v];\n\t\t\t\t} else {\n\t\t\t\t\tnewDays = days.filter(d => d !== v);\n\t\t\t\t}\n\t\t\t\tsetDays(newDays);\n\t\t\t\tsendTimingProperties(durationMinutes, sunTrigger, newDays);\n\t\t\t}}\n\t\t>\n\t\t\t{daysOptions(t, props.fontRatio * 0.73, theme, false)}\n\t\t</ToggleButtonGroup>\n\t</Grid>;\n}\n\nexport function DailyTimeTriggerEdit(props: TimingEditProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\tconst [days, setDays] = useState<DaysOptions[]>(props.timingProperties?.dailyTimeTrigger?.days || []);\n\tconst [time, setTime] = useState<Date>(new Date(0, 0, 0, props.timingProperties?.dailyTimeTrigger?.hour || 0, props.timingProperties?.dailyTimeTrigger?.minutes || 0, 0, 0));\n\n\tfunction sendTimingProperties(hour: number, minutes: number, days: DaysOptions[]) {\n\t\tprops.setTimingProperties({\n\t\t\tdailyTimeTrigger: {\n\t\t\t\thour,\n\t\t\t\tminutes,\n\t\t\t\tdays: [...days], // make sure to copy and not send the ref\n\t\t\t}\n\t\t})\n\t}\n\n\treturn <Grid\n\t\tcontainer\n\t\tdirection=\"column\"\n\t\tjustifyContent=\"center\"\n\t\talignItems=\"center\"\n\t>\n\t\t<Grid\n\t\t\tstyle={{ marginBottom: props.fontRatio }}\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t{/* Use french time, since they use 24 hours clock */}\n\t\t\t<LocalizationProvider dateAdapter={AdapterDateFns} locale={frLocale}>\n\t\t\t\t<TimePicker\n\t\t\t\t\tdisabled={props.disabled}\n\t\t\t\t\tvalue={time}\n\t\t\t\t\tonChange={(newTime) => {\n\t\t\t\t\t\tif (!newTime) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetTime(newTime);\n\t\t\t\t\t\tsendTimingProperties(newTime?.getHours() || 0, newTime?.getMinutes() || 0, days);\n\t\t\t\t\t}}\n\t\t\t\t\trenderInput={(params: any) => <TextField {...params} />}\n\t\t\t\t/>\n\t\t\t</LocalizationProvider>\n\t\t</Grid>\n\t\t<ToggleButtonGroup\n\t\t\tdisabled={props.disabled}\n\t\t\torientation=\"horizontal\"\n\t\t\tsize=\"small\"\n\t\t\tvalue={days}\n\t\t\texclusive\n\t\t\tonChange={(e, v) => {\n\t\t\t\tlet newDays: DaysOptions[];\n\t\t\t\tif (!days.includes(v)) {\n\t\t\t\t\tnewDays = [...days, v];\n\t\t\t\t} else {\n\t\t\t\t\tnewDays = days.filter(d => d !== v);\n\t\t\t\t}\n\t\t\t\tsetDays(newDays);\n\t\t\t\tsendTimingProperties(time?.getHours() || 0, time?.getMinutes() || 0, newDays);\n\t\t\t}}\n\t\t>\n\t\t\t{daysOptions(t, props.fontRatio * 0.73, theme, false)}\n\t\t</ToggleButtonGroup>\n\t</Grid>;\n}\n\nexport function OnceTimingEdit(props: TimingEditProps) {\n\tconst [time, setTime] = useState<Date>(props.timingProperties?.once?.date ? new Date(props.timingProperties?.once?.date) : new Date());\n\n\tfunction sendTimingProperties(date: Date) {\n\t\tprops.setTimingProperties({\n\t\t\tonce: {\n\t\t\t\tdate: date.getTime()\n\t\t\t}\n\t\t})\n\t}\n\n\treturn <Grid\n\t\tstyle={{ minHeight: props.fontRatio * 6 }}\n\t\tcontainer\n\t\tdirection=\"row\"\n\t\tjustifyContent=\"center\"\n\t\talignItems=\"center\"\n\t>\n\t\t{/* Use french time, since they use 24 hours clock */}\n\t\t<LocalizationProvider dateAdapter={AdapterDateFns} locale={frLocale}>\n\t\t\t<DateTimePicker\n\t\t\t\tdisabled={props.disabled}\n\t\t\t\tvalue={time}\n\t\t\t\tonChange={(newValue) => {\n\t\t\t\t\tif (!newValue) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsetTime(newValue);\n\t\t\t\t\tsendTimingProperties(newValue);\n\t\t\t\t}}\n\t\t\t\trenderInput={(params: any) => <TextField {...params} />}\n\t\t\t/>\n\t\t</LocalizationProvider>\n\t</Grid>\n}\n\nexport function TimeoutTimingEdit(props: TimingEditProps) {\n\tconst { t } = useTranslation();\n\tconst [value, setValue] = useState<Date>(props.timingProperties?.timeout?.startDate ? new Date(props.timingProperties?.timeout?.startDate) : new Date());\n\tconst [durationInMinutes, setDurationInMinutes] = useState<number>(props.timingProperties?.timeout?.durationInMinutes || 1);\n\n\tfunction sendTimingProperties(startDate: Date, durationInMinutes: number) {\n\t\tprops.setTimingProperties({\n\t\t\ttimeout: {\n\t\t\t\tdurationInMinutes,\n\t\t\t\tstartDate: startDate.getTime(),\n\t\t\t}\n\t\t})\n\t}\n\n\treturn <Grid\n\t\tcontainer\n\t\tdirection=\"column\"\n\t\tjustifyContent=\"center\"\n\t\talignItems=\"center\"\n\t>\n\t\t<Grid\n\t\t\tstyle={{ marginBottom: props.fontRatio * 0.8 }}\n\t\t\tcontainer\n\t\t\tdirection=\"column\"\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<LocalizationProvider dateAdapter={AdapterDateFns} locale={frLocale}>\n\t\t\t\t<DateTimePicker\n\t\t\t\t\tdisabled={props.disabled}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={(newValue) => {\n\t\t\t\t\t\tif (!newValue) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetValue(newValue);\n\t\t\t\t\t\tsendTimingProperties(newValue, durationInMinutes);\n\t\t\t\t\t}}\n\t\t\t\t\trenderInput={(params: any) => <TextField {...params} label={t('dashboard.timings.timeout.start.in.label')} />}\n\t\t\t\t/>\n\t\t\t</LocalizationProvider>\n\t\t</Grid>\n\t\t<TextField\n\t\t\tdisabled={props.disabled}\n\t\t\tvariant=\"standard\"\n\t\t\tlabel={t('dashboard.timings.timeout.minutes.label')}\n\t\t\ttype=\"number\"\n\t\t\tvalue={durationInMinutes}\n\t\t\tinputProps={{\n\t\t\t\tmin: 1\n\t\t\t}}\n\t\t\tInputLabelProps={{\n\t\t\t\tshrink: true,\n\t\t\t}}\n\t\t\tonChange={(e) => {\n\t\t\t\tconst newDuration = parseInt(e.target.value, 10);\n\t\t\t\tsetDurationInMinutes(newDuration);\n\t\t\t\tsendTimingProperties(value, newDuration);\n\t\t\t}}\n\t\t/>\n\t</Grid>;\n}\n\nexport function TimingEdit(props: TimingEditProps) {\n\tconst { timingType } = props;\n\treturn <Fragment>\n\t\t{timingType === TimingTypes.DailySunTrigger && <DailySunTriggerEdit {...props} />}\n\t\t{timingType === TimingTypes.DailyTimeTrigger && <DailyTimeTriggerEdit {...props} />}\n\t\t{timingType === TimingTypes.Once && <OnceTimingEdit {...props} />}\n\t\t{timingType === TimingTypes.Timeout && <TimeoutTimingEdit {...props} />}\n\t</Fragment>;\n}","import { Duration } from \"unitsnet-js\";\nimport { SunTriggerOptions, TimingProperties, TimingTypes } from \"../../infrastructure/generated/api\";\n\nexport const mapTimingsTypeToDisplay: { [key in TimingTypes]: string } = {\n\t[TimingTypes.DailySunTrigger]: 'dashboard.timings.daily.sun.trigger',\n\t[TimingTypes.DailyTimeTrigger]: 'dashboard.timings.daily.time.trigger',\n\t[TimingTypes.Once]: 'dashboard.timings.once',\n\t[TimingTypes.Timeout]: 'dashboard.timings.timeout',\n}\n\n/**\n * Build default timing properties\n * @param timingType The timing type to build for\n * @returns The default timing properties\n */\nexport function defaultTimingProperties(timingType: TimingTypes): TimingProperties {\n\n\tconst timingProperties: TimingProperties = {};\n\n\tswitch (timingType) {\n\t\tcase TimingTypes.DailySunTrigger:\n\t\t\ttimingProperties.dailySunTrigger = {\n\t\t\t\tdays: [],\n\t\t\t\tdurationMinutes: 0,\n\t\t\t\tsunTrigger: SunTriggerOptions.Sunrise,\n\t\t\t};\n\t\t\tbreak;\n\t\tcase TimingTypes.DailyTimeTrigger:\n\t\t\ttimingProperties.dailyTimeTrigger = {\n\t\t\t\tdays: [],\n\t\t\t\thour: 0,\n\t\t\t\tminutes: 0,\n\t\t\t};\n\t\t\tbreak;\n\n\t\tcase TimingTypes.Once:\n\t\t\ttimingProperties.once = {\n\t\t\t\tdate: new Date().getTime() + Duration.FromDays(1).Milliseconds,\n\t\t\t};\n\t\t\tbreak;\n\t\tcase TimingTypes.Timeout:\n\t\t\ttimingProperties.timeout = {\n\t\t\t\tstartDate: new Date().getTime(),\n\t\t\t\tdurationInMinutes: 60,\n\t\t\t};\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\n\treturn timingProperties;\n}","import { Button, Grid, Theme, useMediaQuery, useTheme } from \"@material-ui/core\";\nimport { useEffect, useState } from \"react\";\nimport { Minion, MinionStatus, MinionTypes, TimingProperties, TimingTypes } from \"../../infrastructure/generated/api\";\nimport { ApiFacade } from \"../../infrastructure/generated/proxies/api-proxies\";\nimport { handleServerRestError } from \"../../services/notifications.service\";\nimport { timingsService } from \"../../services/timings.service\";\nimport { useTranslation } from \"react-i18next\";\nimport { defaultMinionStatus, isOnMode } from \"../../logic/common/minionsUtils\";\nimport { TimingEdit } from \"./TimingEdit\";\nimport { MinionEditStatus } from \"../minions/editMinionStatus/MinionEditStatus\";\nimport { SwitchEditStatus } from \"../minions/editMinionStatus/SwitchEditStatus\";\nimport { defaultTimingProperties, mapTimingsTypeToDisplay } from \"../../logic/common/timingsUtils\";\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport { ToggleButton, ToggleButtonGroup } from \"@mui/material\";\nimport { getModeColor } from \"../../logic/common/themeUtils\";\nimport TimerIcon from '@mui/icons-material/Timer';\nimport DateRangeIcon from '@mui/icons-material/DateRange';\nimport AlarmIcon from '@mui/icons-material/Alarm';\nimport Brightness4Icon from '@mui/icons-material/Brightness4';\nimport { ThemeTooltip } from \"../global/ThemeTooltip\";\n\ninterface CreateTimingProps {\n\tminion: Minion;\n\tonDone: () => void;\n\tfontRatio: number;\n}\n\nexport function CreateTiming(props: CreateTimingProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\tconst [creating, setCreating] = useState<boolean>(false);\n\tconst [timingType, setTimingType] = useState<TimingTypes>(TimingTypes.DailyTimeTrigger);\n\tconst [timingProperties, setTimingProperties] = useState<TimingProperties>(defaultTimingProperties(timingType));\n\tconst [minionStatus, setMinionStatus] = useState<MinionStatus>(defaultMinionStatus(props.minion.minionType));\n\n\tuseEffect(() => {\n\t\tsetMinionStatus(defaultMinionStatus(props.minion.minionType));\n\t}, [props.minion.minionType]);\n\n\tconst { fontRatio } = props;\n\tasync function createTiming() {\n\t\tif (!timingProperties || !minionStatus) {\n\t\t\treturn;\n\t\t}\n\t\tsetCreating(true);\n\t\ttry {\n\t\t\tawait ApiFacade.TimingsApi.createTiming({\n\t\t\t\ttimingProperties,\n\t\t\t\ttimingType,\n\t\t\t\ttimingName: 'auto',\n\t\t\t\tisActive: true,\n\t\t\t\ttimingId: '',\n\t\t\t\ttriggerDirectAction: {\n\t\t\t\t\tminionStatus,\n\t\t\t\t\tminionId: props.minion.minionId || '',\n\t\t\t\t}\n\t\t\t});\n\t\t\tawait timingsService.forceFetchData();\n\t\t\tprops.onDone();\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetCreating(false);\n\t}\n\n\treturn <div style={{ width: '100%' }}>\n\t\t<Grid\n\t\t\tstyle={{ width: '100%' }}\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\n\t\t>\n\t\t\t<ToggleButtonGroup\n\t\t\t\tdisabled={creating}\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\tsize=\"large\"\n\t\t\t\tvalue={timingType}\n\t\t\t\texclusive\n\t\t\t\tonChange={(e, v) => {\n\t\t\t\t\tif (!v) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst newTimingType = v as TimingTypes;\n\t\t\t\t\tsetTimingType(newTimingType);\n\t\t\t\t\tsetTimingProperties(defaultTimingProperties(newTimingType));\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<ToggleButton value={TimingTypes.DailyTimeTrigger} aria-label={t(mapTimingsTypeToDisplay[TimingTypes.DailyTimeTrigger])} style={{ color: getModeColor(true, theme) }}>\n\t\t\t\t\t<ThemeTooltip title={<span>{t(mapTimingsTypeToDisplay[TimingTypes.DailyTimeTrigger])}</span>}>\n\t\t\t\t\t\t<DateRangeIcon style={{ fontSize: props.fontRatio * 1.4 }} />\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</ToggleButton>\n\t\t\t\t<ToggleButton value={TimingTypes.DailySunTrigger} aria-label={t(mapTimingsTypeToDisplay[TimingTypes.DailySunTrigger])} style={{ color: getModeColor(true, theme) }}>\n\t\t\t\t\t<ThemeTooltip title={<span>{t(mapTimingsTypeToDisplay[TimingTypes.DailySunTrigger])}</span>}>\n\t\t\t\t\t\t<Brightness4Icon style={{ fontSize: props.fontRatio * 1.4 }} />\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</ToggleButton>\n\t\t\t\t<ToggleButton value={TimingTypes.Once} aria-label={t(mapTimingsTypeToDisplay[TimingTypes.Once])} style={{ color: getModeColor(true, theme) }}>\n\t\t\t\t\t<ThemeTooltip title={<span>{t(mapTimingsTypeToDisplay[TimingTypes.Once])}</span>}>\n\t\t\t\t\t\t<AlarmIcon style={{ fontSize: props.fontRatio * 1.4 }} />\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</ToggleButton>\n\t\t\t\t<ToggleButton value={TimingTypes.Timeout} aria-label={t(mapTimingsTypeToDisplay[TimingTypes.Timeout])} style={{ color: getModeColor(true, theme) }}>\n\t\t\t\t\t<ThemeTooltip title={<span>{t(mapTimingsTypeToDisplay[TimingTypes.Timeout])}</span>}>\n\t\t\t\t\t\t<TimerIcon style={{ fontSize: props.fontRatio * 1.4 }} />\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</ToggleButton>\n\t\t\t</ToggleButtonGroup>\n\t\t</Grid>\n\t\t<div style={{ marginTop: fontRatio * 1.2, minHeight: fontRatio * 6 }}>\n\t\t\t<Grid\n\t\t\t\tstyle={{ height: '100%' }}\n\t\t\t\tcontainer\n\t\t\t\tdirection=\"column\"\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t\talignItems=\"center\"\n\t\t\t>\n\t\t\t\t{timingType && <TimingEdit disabled={creating} timingType={timingType} fontRatio={fontRatio} timingProperties={timingProperties} setTimingProperties={setTimingProperties} />}\n\t\t\t</Grid>\n\t\t</div>\n\t\t<div>\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tdirection={desktopMode ? 'row' : 'column'}\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t\talignItems=\"center\"\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<SwitchEditStatus disabled={creating} minionStatus={minionStatus} setMinionStatus={setMinionStatus} minionType={props.minion.minionType} fontRatio={fontRatio * 1.7} smallFontRatio={fontRatio * 1.7 * 0.5} isOn={isOnMode(props.minion.minionType, minionStatus)} />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{props.minion.minionType !== MinionTypes.Toggle && props.minion.minionType !== MinionTypes.Switch &&\n\t\t\t\t\t\t<MinionEditStatus disabled={creating} minionStatus={minionStatus} setMinionStatus={setMinionStatus} minionType={props.minion.minionType} fontRatio={fontRatio * 1.7} />\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t</div>\n\t\t<Grid\n\t\t\tstyle={{ marginTop: fontRatio * 0.7 }}\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\talignItems=\"flex-end\"\n\t\t>\n\t\t\t<Button variant=\"contained\" onClick={props.onDone}>{t('global.cancel')}</Button>\n\t\t\t<LoadingButton\n\t\t\t\tstyle={{ minWidth: desktopMode ? 200 : 0 }}\n\t\t\t\tloading={creating}\n\t\t\t\tloadingPosition={desktopMode ? 'start' : 'center'}\n\t\t\t\tdisabled={!!!timingProperties}\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor={'primary'}\n\t\t\t\tonClick={createTiming}>\n\t\t\t\t{t('dashboard.timings.create.timing')}\n\t\t\t</LoadingButton>\n\t\t</Grid>\n\t</div>\n}","import { Button, Grid, Theme, useMediaQuery } from \"@material-ui/core\";\nimport { useState } from \"react\";\nimport { Minion, MinionStatus, MinionTypes, Timing, TimingProperties } from \"../../infrastructure/generated/api\";\nimport { ApiFacade } from \"../../infrastructure/generated/proxies/api-proxies\";\nimport { handleServerRestError } from \"../../services/notifications.service\";\nimport { timingsService } from \"../../services/timings.service\";\nimport { useTranslation } from \"react-i18next\";\nimport { defaultMinionStatus, isOnMode } from \"../../logic/common/minionsUtils\";\nimport { TimingEdit } from \"./TimingEdit\";\nimport { MinionEditStatus } from \"../minions/editMinionStatus/MinionEditStatus\";\nimport clonedeep from 'lodash.clonedeep';\nimport { SwitchEditStatus } from \"../minions/editMinionStatus/SwitchEditStatus\";\nimport LoadingButton from \"@mui/lab/LoadingButton\";\n\ninterface EditTimingPropsProps {\n\tminion: Minion;\n\ttiming: Timing;\n\tonDone: () => void;\n\tfontRatio: number;\n}\n\n\n\nexport function EditTimingProps(props: EditTimingPropsProps) {\n\tconst { t } = useTranslation();\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\tconst [editing, setEditing] = useState<boolean>(false);\n\tconst [timingProperties, setTimingProperties] = useState<TimingProperties>(clonedeep(props.timing.timingProperties)); // make sure to only copy (not ref) the original object\n\tconst [minionStatus, setMinionStatus] = useState<MinionStatus>(clonedeep(props.timing.triggerDirectAction?.minionStatus || defaultMinionStatus(props.minion.minionType)));\n\n\tconst { fontRatio } = props;\n\tasync function updateTiming() {\n\t\tif (!timingProperties || !minionStatus) {\n\t\t\treturn;\n\t\t}\n\t\tsetEditing(true);\n\t\ttry {\n\t\t\tconst editedTiming = clonedeep(props.timing);\n\t\t\teditedTiming.timingProperties = timingProperties;\n\t\t\tif (editedTiming.triggerDirectAction) {\n\t\t\t\teditedTiming.triggerDirectAction.minionStatus = minionStatus;\n\t\t\t} else {\n\t\t\t\teditedTiming.triggerDirectAction = { minionStatus, minionId: props.minion.minionId || '', }\n\t\t\t}\n\t\t\tawait ApiFacade.TimingsApi.setTiming(editedTiming, editedTiming.timingId);\n\t\t\ttimingsService.updateTiming(editedTiming);\n\t\t\tprops.onDone();\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetEditing(false);\n\t}\n\n\treturn <div style={{ width: '100%' }}>\n\t\t<div>\n\t\t\t{props.timing.timingType && <TimingEdit disabled={editing} timingType={props.timing.timingType} timingProperties={timingProperties} fontRatio={fontRatio} setTimingProperties={setTimingProperties} />}\n\t\t</div>\n\t\t<div>\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tdirection={desktopMode ? 'row' : 'column'}\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t\talignItems=\"center\"\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<SwitchEditStatus\n\t\t\t\t\t\tdisabled={editing}\n\t\t\t\t\t\tminionStatus={minionStatus}\n\t\t\t\t\t\tsetMinionStatus={setMinionStatus}\n\t\t\t\t\t\tminionType={props.minion.minionType}\n\t\t\t\t\t\tfontRatio={fontRatio * 1.7}\n\t\t\t\t\t\tsmallFontRatio={fontRatio * 1.7 * 0.5}\n\t\t\t\t\t\tisOn={isOnMode(props.minion.minionType, minionStatus)} />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{props.minion.minionType !== MinionTypes.Toggle && props.minion.minionType !== MinionTypes.Switch &&\n\t\t\t\t\t\t<MinionEditStatus disabled={editing} minionStatus={minionStatus} setMinionStatus={setMinionStatus} minionType={props.minion.minionType} fontRatio={fontRatio * 1.7} />}\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t</div>\n\t\t<Grid\n\t\t\tstyle={{ marginTop: fontRatio * 0.7 }}\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\talignItems=\"flex-end\"\n\t\t>\n\t\t\t<Button variant=\"contained\" onClick={props.onDone}>{t('global.cancel')}</Button>\n\t\t\t<LoadingButton\n\t\t\t\tstyle={{ minWidth: desktopMode ? 200 : 0 }}\n\t\t\t\tloading={editing}\n\t\t\t\tloadingPosition={desktopMode ? 'start' : 'center'}\n\t\t\t\tdisabled={!!!timingProperties}\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor={'primary'}\n\t\t\t\tonClick={updateTiming}>\n\t\t\t\t{t('dashboard.timings.update.timing')}\n\t\t\t</LoadingButton>\n\t\t</Grid>\n\t</div>\n}","import { Button, Grid, Theme, Typography, useMediaQuery, useTheme } from \"@material-ui/core\";\nimport Divider from \"@mui/material/Divider\";\nimport { useEffect, useState } from \"react\";\nimport { Minion, MinionStatus, MinionTypes, Timing } from \"../../infrastructure/generated/api\";\nimport { handleServerRestError } from \"../../services/notifications.service\";\nimport { timingsService } from \"../../services/timings.service\";\nimport { MinionStatusOverview, SwitchOverview } from \"../minions/overviewMinionsStatus/MinionStatusOverview\";\nimport { TimingOverview } from \"./TimingOverview\";\nimport { TimingOverviewControls } from \"./TimingOverviewControls\";\nimport AddIcon from '@mui/icons-material/Add';\nimport { CreateTiming } from \"./CreateTiming\";\nimport { EditTimingProps } from \"./EditTimingProps\";\nimport { useTranslation } from \"react-i18next\";\nimport { isOnMode } from \"../../logic/common/minionsUtils\";\nimport { getModeColor, marginLeft } from \"../../logic/common/themeUtils\";\nimport Collapse from '@mui/material/Collapse';\nimport { Duration } from \"unitsnet-js\";\nimport { DEFAULT_FONT_RATION } from \"../../infrastructure/consts\";\n\ninterface MinionTimingsViewProps {\n\tminion: Minion;\n}\n\nconst PROPERTIES_OPEN_ANIMATION_DURATION =  Duration.FromSeconds(0.8);\n\nexport function MinionTimingsView(props: MinionTimingsViewProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\tconst [minionTimings, setMinionTimings] = useState<Timing[]>([]);\n\tconst [showAddTiming, setShowAddTiming] = useState<boolean>(false);\n\tconst [showEditTimingId, setShowEditTimingId] = useState<string>();\n\n\tuseEffect(() => {\n\t\tlet minionsDetacher: () => void;\n\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\t// Subscribe to the minion data feed\n\t\t\t\tminionsDetacher = await timingsService.attachDataSubs((timings) => {\n\t\t\t\t\tconst minionTimings = timings.filter((t) => t.triggerDirectAction?.minionId === props.minion?.minionId)\n\t\t\t\t\t// Filter out other timings\n\t\t\t\t\tsetMinionTimings(minionTimings);\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tawait handleServerRestError(error);\n\t\t\t}\n\t\t})();\n\n\t\tsetShowAddTiming(false)\n\t\treturn () => {\n\t\t\t// unsubscribe the feed on component unmount\n\t\t\tminionsDetacher && minionsDetacher();\n\t\t};\n\t}, [props.minion?.minionId]);\n\n\treturn <div>\n\t\t{!minionTimings?.length && <Grid\n\t\t\tcontainer\n\t\t\tdirection=\"column\"\n\t\t\tjustifyContent=\"center\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<Typography style={{ fontSize: DEFAULT_FONT_RATION * 0.7, color: getModeColor(false, theme) }} >{t('dashboard.timings.no.timings.set')}</Typography>\n\t\t</Grid>}\n\t\t{minionTimings.map((timing) => {\n\t\t\treturn <div style={{ width: '100%' }}>\n\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t// In mobile show it on above other\n\t\t\t\t\t\tdirection={desktopMode ? 'row' : 'column'}\n\t\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\t\t// In mobile align content in the start\n\t\t\t\t\t\talignItems={desktopMode ? 'center' : 'flex-start'}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tmarginTop: !desktopMode ? (DEFAULT_FONT_RATION * 0.3) : 0,\n\t\t\t\t\t\t\t\t[marginLeft(theme)]: !desktopMode ? (DEFAULT_FONT_RATION * 0.2) : 0\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<TimingOverview timingType={timing.timingType} timingProperties={timing.timingProperties} fontRatio={DEFAULT_FONT_RATION} disabled={!timing.isActive} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t\t\t\t\talignItems={'center'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{/* For every complex minion show in addition the simple on/off option beside the advanced props */}\n\t\t\t\t\t\t\t\t{props.minion.minionType !== MinionTypes.Toggle && props.minion.minionType !== MinionTypes.Switch && <div>\n\t\t\t\t\t\t\t\t\t<SwitchOverview\n\t\t\t\t\t\t\t\t\t\tminionType={props.minion.minionType}\n\t\t\t\t\t\t\t\t\t\tminionStatus={timing.triggerDirectAction?.minionStatus as MinionStatus}\n\t\t\t\t\t\t\t\t\t\tfontRatio={DEFAULT_FONT_RATION}\n\t\t\t\t\t\t\t\t\t\tsmallFontRatio={DEFAULT_FONT_RATION * 0.5}\n\t\t\t\t\t\t\t\t\t\tisOn={timing.isActive && isOnMode(props.minion.minionType, timing.triggerDirectAction?.minionStatus)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t<MinionStatusOverview\n\t\t\t\t\t\t\t\t\tminionType={props.minion.minionType}\n\t\t\t\t\t\t\t\t\tminionStatus={timing.triggerDirectAction?.minionStatus as MinionStatus}\n\t\t\t\t\t\t\t\t\tfontRatio={DEFAULT_FONT_RATION}\n\t\t\t\t\t\t\t\t\tsmallFontRatio={DEFAULT_FONT_RATION * 0.5}\n\t\t\t\t\t\t\t\t\tshowSwitches={true}\n\t\t\t\t\t\t\t\t\tdisabled={!timing.isActive}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tstyle={{ maxWidth: DEFAULT_FONT_RATION * 2.5, marginBottom: DEFAULT_FONT_RATION * 0.3 }}\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection={'row'}\n\t\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<TimingOverviewControls\n\t\t\t\t\t\t\tfontRatio={DEFAULT_FONT_RATION}\n\t\t\t\t\t\t\ttiming={timing}\n\t\t\t\t\t\t\teditMode={showEditTimingId === timing.timingId}\n\t\t\t\t\t\t\tsetEditMode={(editMode) => { setShowEditTimingId(editMode ? timing.timingId : undefined); setShowAddTiming(false); }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t\t<Collapse in={showEditTimingId === timing.timingId} timeout={PROPERTIES_OPEN_ANIMATION_DURATION.Milliseconds}>\n\t\t\t\t\t<div style={{ margin: DEFAULT_FONT_RATION }}>\n\t\t\t\t\t\t<EditTimingProps minion={props.minion} timing={timing} onDone={() => setShowEditTimingId(undefined)} fontRatio={DEFAULT_FONT_RATION} />\n\t\t\t\t\t</div>\n\t\t\t\t</Collapse>\n\t\t\t\t<Divider variant={'fullWidth'} flexItem />\n\t\t\t</div>;\n\t\t})}\n\t\t<div style={{ marginTop: DEFAULT_FONT_RATION, width: '100%' }}>\n\t\t\t<Collapse in={showAddTiming} timeout={PROPERTIES_OPEN_ANIMATION_DURATION.Milliseconds}>\n\t\t\t\t<CreateTiming minion={props.minion} onDone={() => setShowAddTiming(false)} fontRatio={DEFAULT_FONT_RATION} />\n\t\t\t</Collapse>\n\t\t\t{!showAddTiming && <Grid\n\t\t\t\tcontainer\n\t\t\t\tdirection=\"column\"\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t\talignItems=\"stretch\"\n\t\t\t>\n\t\t\t\t<Button onClick={() => { setShowAddTiming(true); setShowEditTimingId(undefined); }} variant='contained' startIcon={<AddIcon />}>\n\t\t\t\t\t{t('dashboard.timings.create.timing')}\n\t\t\t\t</Button>\n\t\t\t</Grid>}\n\t\t</div>\n\t</div>\n}","import { Grid, Theme, Typography, useMediaQuery, useTheme } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\"\nimport { Minion } from \"../../infrastructure/generated/api\";\n\ninterface MinionTechInfoProps {\n\tfontRatio: number;\n\tminion: Minion;\n}\n\ninterface MinionInfoLineProps {\n\tfontRatio: number;\n\ttitle: string;\n\tvalue?: string;\n}\n\nfunction MinionInfoLine(props: MinionInfoLineProps) {\n\tconst { fontRatio, title, value } = props;\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\n\tconst theme = useTheme();\n\n\treturn <Grid\n\t\tstyle={{ width: '100%', marginBottom: fontRatio * 0.15 }}\n\t\tcontainer\n\t\tdirection=\"row\"\n\t\tjustifyContent=\"flex-start\"\n\t\talignItems=\"center\"\n\t>\n\t\t<Typography style={{ fontSize: fontRatio * 0.25, width: desktopMode ?  `${fontRatio * 4}px` : '100%', color: theme.palette.text.hint }} >{title}</Typography>\n\t\t<Typography style={{ fontSize: fontRatio * 0.3 }} >{value}</Typography>\n\t</Grid>;\n}\n\nexport function MinionTechInfo(props: MinionTechInfoProps) {\n\tconst { t } = useTranslation();\n\tconst { fontRatio, minion } = props;\n\treturn <Grid\n\t\tstyle={{ width: '100%', height: '100%' }}\n\t\tcontainer\n\t\tdirection=\"column\"\n\t\tjustifyContent=\"center\"\n\t\talignItems=\"center\"\n\t>\n\t\t<MinionInfoLine fontRatio={fontRatio} title={t('dashboard.minions.tech.info.minion.id')} value={minion.minionId} />\n\t\t<MinionInfoLine fontRatio={fontRatio} title={t('dashboard.minions.tech.info.device.name')} value={minion.device.pysicalDevice.name} />\n\t\t<MinionInfoLine fontRatio={fontRatio} title={t('dashboard.minions.tech.info.device.model')} value={minion.device.model} />\n\t\t<MinionInfoLine fontRatio={fontRatio} title={t('dashboard.minions.tech.info.device.brand')} value={minion.device.brand} />\n\t\t<MinionInfoLine fontRatio={fontRatio} title={t('dashboard.minions.tech.info.device.ip.address')} value={minion.device.pysicalDevice.ip} />\n\t\t<MinionInfoLine fontRatio={fontRatio} title={t('dashboard.minions.tech.info.device.mac.address')} value={minion.device.pysicalDevice.mac} />\n\t\t<MinionInfoLine fontRatio={fontRatio} title={t('dashboard.minions.tech.info.device.vendor')} value={minion.device.pysicalDevice.vendor} />\n\t</Grid>;\n}\n","import { DeviceKind } from \"../infrastructure/generated/api\";\nimport { ApiFacade } from \"../infrastructure/generated/proxies/api-proxies\";\nimport { DataService } from \"../infrastructure/data-service-base\";\n\nclass MinionsKindsService extends DataService<DeviceKind[]> {\n\n\tfetchData(): Promise<DeviceKind[]> {\n\t\t// Get the fetch data function (without activating it yet)\n\t\treturn ApiFacade.DevicesApi.getDevicesKinds();\n\t}\n}\n\nexport const minionsKindsService = new MinionsKindsService();\n","import { CircularProgress, Grid, IconButton, TextField, Theme, Typography, useMediaQuery, useTheme } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\"\nimport { Minion } from \"../../../infrastructure/generated/api\";\nimport InfoIcon from '@mui/icons-material/Info';\nimport { useEffect, useState } from \"react\";\nimport clonedeep from 'lodash.clonedeep';\nimport { Duration } from 'unitsnet-js';\nimport { ApiFacade } from \"../../../infrastructure/generated/proxies/api-proxies\";\nimport { minionsService } from \"../../../services/minions.service\";\nimport { handleServerRestError } from \"../../../services/notifications.service\";\nimport { HMS, HMStoMs, msToHMS } from \"../../../logic/common/minionsUtils\";\nimport SaveIcon from '@material-ui/icons/Save';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { ThemeSwitch } from \"../../global/ThemeSwitch\";\nimport { ThemeTooltip } from \"../../global/ThemeTooltip\";\nimport { marginLeft } from \"../../../logic/common/themeUtils\";\n\ninterface MinionAutoTurnOffProps {\n\tfontRatio: number;\n\tminion: Minion;\n}\n\nexport function MinionAutoTurnOff(props: MinionAutoTurnOffProps) {\n\tconst { t } = useTranslation();\n\tconst { fontRatio, minion } = props;\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\tconst theme = useTheme();\n\tconst [saving, setSaving] = useState<boolean>(false);\n\tconst [turnOffIn, setTurnOffIn] = useState<HMS>(msToHMS(minion.minionAutoTurnOffMS));\n\n\tuseEffect(() => {\n\t\t// Once the minionAutoTurnOffMS update, re-calc and override the turnOffIn \n\t\tsetTurnOffIn(msToHMS(minion.minionAutoTurnOffMS));\n\t}, [minion.minionAutoTurnOffMS]);\n\n\tasync function setAutoTurnOff(duration: Duration) {\n\t\tsetSaving(true);\n\t\ttry {\n\t\t\tawait ApiFacade.MinionsApi.setMinionTimeout({ setAutoTurnOffMS: duration.Milliseconds }, minion.minionId || '');\n\t\t\tminion.minionAutoTurnOffMS = duration.Milliseconds;\n\t\t\tminionsService.updateMinion(minion);\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetSaving(false);\n\t}\n\n\tfunction applyTurnOffChanges() {\n\t\tsetAutoTurnOff(Duration.FromMilliseconds(HMStoMs(turnOffIn)));\n\t}\n\n\t// Detect of the current timeout mode is off (AKA the minionAutoTurnOffMS is 0 or undefined) \n\tconst isOff = !minion.minionAutoTurnOffMS;\n\t// Detect if the turnOffIn changed by the user, if so, show it as 'edit mode'\n\tconst editMode = HMStoMs(turnOffIn) !== (minion.minionAutoTurnOffMS || 0);\n\n\treturn <Grid\n\t\tcontainer\n\t\tdirection=\"row\"\n\t\tjustifyContent=\"space-between\"\n\t\talignItems=\"center\"\n\t>\n\t\t<div>\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tdirection={desktopMode ? 'row' : 'column'}\n\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\talignItems={desktopMode ? 'center' : 'flex-start'}\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection={'row'}\n\t\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Typography style={{ fontSize: fontRatio * 0.3 }} >{t('dashboard.minions.advanced.settings.auto.turn.off')}</Typography>\n\t\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.advanced.settings.auto.turn.off.tip')}</span>}>\n\t\t\t\t\t\t\t<InfoIcon style={{ fontSize: fontRatio * 0.3, marginTop: fontRatio * -0.2 }} />\n\t\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection={'row'}\n\t\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div style={{ marginTop: props.fontRatio * 0.25, [marginLeft(theme)]: desktopMode ? props.fontRatio * 0.5 : 0 }}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tdisabled={saving || isOff}\n\t\t\t\t\t\t\t\tstyle={{ width: props.fontRatio }}\n\t\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\t\tid=\"outlined-number\"\n\t\t\t\t\t\t\t\thelperText={t('global.hours')}\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tvalue={turnOffIn.hours}\n\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst rawValue = e.target.value;\n\n\t\t\t\t\t\t\t\t\tlet newDuration = parseInt(rawValue, 10);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// Don't allow non-number value\n\t\t\t\t\t\t\t\t\tif (isNaN(newDuration)) {\n\t\t\t\t\t\t\t\t\t\tnewDuration = 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// Don't allow number under 0\n\t\t\t\t\t\t\t\t\tif (newDuration < 0) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// Update hours (only)\n\t\t\t\t\t\t\t\t\tconst newTurnOff = clonedeep<HMS>(turnOffIn);\n\t\t\t\t\t\t\t\t\tnewTurnOff.hours = newDuration;\n\t\t\t\t\t\t\t\t\tsetTurnOffIn(newTurnOff);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tdisabled={saving || isOff}\n\t\t\t\t\t\t\t\tstyle={{ width: props.fontRatio }}\n\t\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\t\tid=\"outlined-number\"\n\t\t\t\t\t\t\t\thelperText={t('global.minutes')}\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tvalue={turnOffIn.minutes}\n\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst rawValue = e.target.value;\n\n\t\t\t\t\t\t\t\t\tlet newDuration = parseInt(rawValue, 10);\n\t\t\t\t\t\t\t\t\t// Don't allow non-number value\n\t\t\t\t\t\t\t\t\tif (isNaN(newDuration)) {\n\t\t\t\t\t\t\t\t\t\tnewDuration = 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// Allow valid minutes only\n\t\t\t\t\t\t\t\t\tif (newDuration > 59 || newDuration < 0) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst newTurnOff = clonedeep<HMS>(turnOffIn);\n\t\t\t\t\t\t\t\t\tnewTurnOff.minutes = newDuration;\n\t\t\t\t\t\t\t\t\tsetTurnOffIn(newTurnOff);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tdisabled={saving || isOff}\n\t\t\t\t\t\t\t\tstyle={{ width: props.fontRatio }}\n\t\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\t\tid=\"outlined-number\"\n\t\t\t\t\t\t\t\thelperText={t('global.seconds')}\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tvalue={turnOffIn.seconds}\n\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst rawValue = e.target.value;\n\n\t\t\t\t\t\t\t\t\tlet newDuration = parseInt(rawValue, 10);\n\t\t\t\t\t\t\t\t\t// Don't allow non-number value\n\t\t\t\t\t\t\t\t\tif (isNaN(newDuration)) {\n\t\t\t\t\t\t\t\t\t\tnewDuration = 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// Allow valid seconds only\n\t\t\t\t\t\t\t\t\tif (newDuration > 59 || newDuration < 0) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst newTurnOff = clonedeep<HMS>(turnOffIn);\n\t\t\t\t\t\t\t\t\tnewTurnOff.seconds = newDuration;\n\t\t\t\t\t\t\t\t\tsetTurnOffIn(newTurnOff);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ [marginLeft(theme)]: fontRatio * 0.3 }}>\n\t\t\t\t\t\t\t{editMode && <ThemeTooltip title={<span>{t('global.save')}</span>} >\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tdisabled={saving}\n\t\t\t\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.1 }}\n\t\t\t\t\t\t\t\t\tonClick={applyTurnOffChanges}\n\t\t\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t\t\t<SaveIcon style={{ fontSize: fontRatio * 0.3 }} />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</ThemeTooltip>}\n\t\t\t\t\t\t\t{editMode && <ThemeTooltip title={<span>{t('global.cancel')}</span>} >\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tdisabled={saving}\n\t\t\t\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.1 }}\n\t\t\t\t\t\t\t\t\tonClick={() => { setTurnOffIn(msToHMS(minion.minionAutoTurnOffMS)); }}\n\t\t\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t\t\t<CloseIcon style={{ fontSize: fontRatio * 0.3 }} />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</ThemeTooltip>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\n\t\t</div>\n\t\t<div style={{ width: '58px', height: '38px' }}>\n\t\t\t{!saving && <ThemeSwitch\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tdisabled={saving}\n\t\t\t\tchecked={!isOff}\n\t\t\t\tsize=\"medium\"\n\t\t\t\tonChange={() => { setAutoTurnOff(Duration.FromMinutes(!isOff ? 0 : 1)) }} />}\n\t\t\t{saving && <div\n\t\t\t\tstyle={{\n\t\t\t\t\t[marginLeft(theme)]: fontRatio * 0.3,\n\t\t\t\t\tmarginTop: 8\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<CircularProgress thickness={5} size={fontRatio * 0.5} />\n\t\t\t</div>\n\t\t\t}\n\t\t</div>\n\t</Grid>;\n}","import { CircularProgress, Grid, IconButton, TextField, Theme, Typography, useMediaQuery, useTheme } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\"\nimport { CalibrationMode, Minion } from \"../../../infrastructure/generated/api\";\nimport InfoIcon from '@mui/icons-material/Info';\nimport { CSSProperties, useEffect, useState } from \"react\";\nimport { Duration } from 'unitsnet-js';\nimport { ApiFacade } from \"../../../infrastructure/generated/proxies/api-proxies\";\nimport { minionsService } from \"../../../services/minions.service\";\nimport { handleServerRestError } from \"../../../services/notifications.service\";\nimport SaveIcon from '@material-ui/icons/Save';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { ThemeSwitch } from \"../../global/ThemeSwitch\";\nimport { ToggleButton, ToggleButtonGroup } from \"@mui/material\";\nimport { getModeColor, marginLeft } from \"../../../logic/common/themeUtils\";\nimport SyncIcon from '@mui/icons-material/Sync';\nimport LockIcon from '@mui/icons-material/Lock';\nimport RotateRightIcon from '@mui/icons-material/RotateRight';\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport { ThemeTooltip } from \"../../global/ThemeTooltip\";\n\ninterface MinionSyncProps {\n\tfontRatio: number;\n\tminion: Minion;\n}\n\nexport function MinionSync(props: MinionSyncProps) {\n\tconst { t } = useTranslation();\n\tconst { fontRatio, minion } = props;\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\tconst theme = useTheme();\n\tconst [saving, setSaving] = useState<boolean>(false);\n\tconst [syncMinutes, setSyncMinutes] = useState<number>(minion.calibration?.calibrationCycleMinutes || 0);\n\tconst [calibration, setCalibration] = useState<CalibrationMode>(minion.calibration?.calibrationMode || CalibrationMode.AUTO);\n\n\tuseEffect(() => {\n\t\t// Once the calibrationCycleMinutes updated from out side, re calc the sync minutes\n\t\tsetSyncMinutes(minion.calibration?.calibrationCycleMinutes || 0);\n\t}, [minion.calibration?.calibrationCycleMinutes]);\n\n\tasync function setMinionCalibration(duration: Duration) {\n\t\tsetSaving(true);\n\t\ttry {\n\t\t\tawait ApiFacade.MinionsApi.setMinionCalibrate({ calibrationMode: calibration, calibrationCycleMinutes: duration.Minutes }, minion.minionId || '');\n\t\t\tminion.calibration = {\n\t\t\t\tcalibrationCycleMinutes :  duration.Minutes,\n\t\t\t\tcalibrationMode : calibration\n\t\t\t}\n\t\t\tminionsService.updateMinion(minion);\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetSaving(false);\n\t}\n\n\tfunction applyMinionSyncChanges() {\n\t\tsetMinionCalibration(Duration.FromMinutes(syncMinutes));\n\t}\n\n\t// Detect if any calibration configured, AKA if there is a value in the calibrationCycleMinutes\n\tconst isOff = !minion.calibration?.calibrationCycleMinutes;\n\n\t// Detect if calibration prop has been changed by use, if so, show it as edit mode\n\tconst editMode = (minion.calibration?.calibrationCycleMinutes || 0) !== syncMinutes || (minion.calibration?.calibrationMode || CalibrationMode.AUTO) !== calibration;\n\n\t// Calibration option size\n\tconst calibrationModeStyle: CSSProperties = { fontSize: fontRatio * 0.4 };\n\n\treturn <Grid\n\t\tcontainer\n\t\tdirection=\"row\"\n\t\tjustifyContent=\"space-between\"\n\t\talignItems=\"center\"\n\t>\n\t\t<div>\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tdirection={'row'}\n\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\talignItems={'center'}\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection={desktopMode ? 'row' : 'column'}\n\t\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\t\talignItems={desktopMode ? 'center' : 'flex-start'}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t\t\tdirection={'row'}\n\t\t\t\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Typography style={{ fontSize: fontRatio * 0.3 }} >{t('dashboard.minions.advanced.settings.sync.status')}</Typography>\n\t\t\t\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.advanced.settings.sync.status.tip')}</span>}>\n\t\t\t\t\t\t\t\t\t<InfoIcon style={{ fontSize: fontRatio * 0.3, marginTop: fontRatio * -0.2 }} />\n\t\t\t\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t\t\t\t\tstyle={{ [marginLeft(theme)]: fontRatio * (desktopMode ? 0.6 : 0), marginTop: fontRatio * 0.2 }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<ToggleButtonGroup\n\t\t\t\t\t\t\t\t\t\tdisabled={isOff}\n\t\t\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\tvalue={calibration}\n\t\t\t\t\t\t\t\t\t\tonChange={(e, v) => {\n\t\t\t\t\t\t\t\t\t\t\tif (!v) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tsetCalibration(v);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\texclusive\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ToggleButton value={CalibrationMode.AUTO} aria-label={t('dashboard.minions.advanced.settings.sync.auto.mode.tip')} style={{ color: getModeColor(!isOff, theme) }}>\n\t\t\t\t\t\t\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.advanced.settings.sync.auto.mode.tip')}</span>}>\n\t\t\t\t\t\t\t\t\t\t\t\t<SyncIcon style={calibrationModeStyle} />\n\t\t\t\t\t\t\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t\t\t\t<ToggleButton value={CalibrationMode.LOCKON} aria-label={t('dashboard.minions.advanced.settings.sync.lock.on.tip')} style={{ color: getModeColor(!isOff, theme) }}>\n\t\t\t\t\t\t\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.advanced.settings.sync.lock.on.tip')}</span>}>\n\t\t\t\t\t\t\t\t\t\t\t\t<LockIcon style={calibrationModeStyle} />\n\t\t\t\t\t\t\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t\t\t\t<ToggleButton value={CalibrationMode.LOCKOFF} aria-label={t('dashboard.minions.advanced.settings.sync.lock.off.tip')} style={{ color: getModeColor(!isOff, theme) }}>\n\t\t\t\t\t\t\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.advanced.settings.sync.lock.off.tip')}</span>}>\n\t\t\t\t\t\t\t\t\t\t\t\t<LockOutlinedIcon style={calibrationModeStyle} />\n\t\t\t\t\t\t\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t\t\t\t<ToggleButton value={CalibrationMode.SHABBAT} aria-label={t('dashboard.minions.advanced.settings.sync.shabbat.tip')} style={{ color: getModeColor(!isOff, theme) }}>\n\t\t\t\t\t\t\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.advanced.settings.sync.rotation.tip')}</span>}>\n\t\t\t\t\t\t\t\t\t\t\t\t<RotateRightIcon style={calibrationModeStyle} />\n\t\t\t\t\t\t\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t\t\t</ToggleButtonGroup>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t\t\t\t\tdirection={'row'}\n\t\t\t\t\t\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div style={{ marginTop: props.fontRatio * 0.2 }}>\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={saving || isOff}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: props.fontRatio * 2.8 }}\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\t\t\t\t\t\thelperText={t('dashboard.minions.advanced.settings.sync.sync.minutes.helper')}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={syncMinutes}\n\t\t\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst rawValue = e.target.value;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet newDuration = parseInt(rawValue, 10);\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Allow numbers only\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (isNaN(newDuration)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewDuration = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Set positive number only\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newDuration < 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSyncMinutes(newDuration);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t\t<div style={{ [marginLeft(theme)]: fontRatio * 0.3 }}>\n\t\t\t\t\t{editMode && <ThemeTooltip title={<span>{t('global.save')}</span>} >\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tdisabled={saving}\n\t\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.1 }}\n\t\t\t\t\t\t\tonClick={applyMinionSyncChanges}\n\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t<SaveIcon style={{ fontSize: fontRatio * 0.3 }} />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ThemeTooltip>}\n\t\t\t\t\t{editMode && <ThemeTooltip title={<span>{t('global.cancel')}</span>} >\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tdisabled={saving}\n\t\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.1 }}\n\t\t\t\t\t\t\tonClick={() => { setSyncMinutes(minion.calibration?.calibrationCycleMinutes || 0); setCalibration(minion.calibration?.calibrationMode || CalibrationMode.AUTO) }}\n\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t<CloseIcon style={{ fontSize: fontRatio * 0.3 }} />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ThemeTooltip>}\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t</div >\n\t\t<div style={{ width: '58px', height: '38px' }}>\n\t\t\t{!saving && <ThemeSwitch\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tdisabled={saving}\n\t\t\t\tchecked={!isOff}\n\t\t\t\tsize=\"medium\"\n\t\t\t\tonChange={() => { setMinionCalibration(Duration.FromMinutes(!isOff ? 0 : 10)) }} />}\n\t\t\t{saving && <div\n\t\t\t\tstyle={{\n\t\t\t\t\t[marginLeft(theme)]: fontRatio * 0.3,\n\t\t\t\t\tmarginTop: 8\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<CircularProgress thickness={5} size={fontRatio * 0.5} />\n\t\t\t</div>}\n\t\t</div>\n\t</Grid >;\n}\n","import { Grid, IconButton, TextField, Typography, useTheme } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\"\nimport { CommandsRepoDevice, Minion } from \"../../../infrastructure/generated/api\";\nimport InfoIcon from '@mui/icons-material/Info';\nimport { useState } from \"react\";\nimport { ApiFacade } from \"../../../infrastructure/generated/proxies/api-proxies\";\nimport { handleServerRestError } from \"../../../services/notifications.service\";\nimport { getModeColor } from \"../../../logic/common/themeUtils\";\nimport PlayForWorkIcon from '@mui/icons-material/PlayForWork';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport LoadingButton from \"@mui/lab/LoadingButton\";\nimport DoneIcon from '@mui/icons-material/Done';\nimport { ThemeTooltip } from \"../../global/ThemeTooltip\";\nimport Autocomplete from '@mui/material/Autocomplete';\nimport { DEFAULT_SUCCEED_ICON_SHOWN } from \"../../../infrastructure/consts\";\n\ninterface MinionFetchCommandsProps {\n\tfontRatio: number;\n\tminion: Minion;\n}\n\nexport function MinionFetchCommands(props: MinionFetchCommandsProps) {\n\tconst { t } = useTranslation();\n\tconst [fetching, setFetching] = useState<boolean>();\n\tconst [success, setSuccess] = useState<boolean>();\n\tconst [applying, setApplying] = useState<boolean>();\n\tconst [message, setMessage] = useState<string>();\n\tconst [commandsSet, setCommandsSet] = useState<CommandsRepoDevice[]>();\n\tconst [selectedCommandsSet, setSelectedCommandsSet] = useState<CommandsRepoDevice>();\n\tconst theme = useTheme();\n\tconst { fontRatio, minion } = props;\n\n\tasync function fetchCommands() {\n\t\tsetFetching(true);\n\t\ttry {\n\t\t\tsetMessage(t('dashboard.minions.advanced.settings.fetching.commands'));\n\t\t\tconst commandsSet = await ApiFacade.RFApi.getCommandsRepoAvailableDevices();\n\t\t\t// Filter out irrelevant categories, and sort collection by brand/model names\n\t\t\tconst minionAvailableCommands = commandsSet\n\t\t\t\t.filter(c => c.category === minion.minionType)\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tif (a.brand !== b.brand) {\n\t\t\t\t\t\treturn a.brand > b.brand ? 1 : -1;\n\t\t\t\t\t}\n\t\t\t\t\treturn a.model > b.model ? 1 : -1;\n\t\t\t\t});\n\t\t\tsetCommandsSet(minionAvailableCommands);\n\t\t} catch (error) {\n\t\t\tsetMessage(t('dashboard.minions.advanced.settings.fetching.commands.issue'));\n\t\t\tawait handleServerRestError(error);\n\t\t}\n\t\tsetFetching(false);\n\t}\n\n\tasync function applyCommands() {\n\t\tif (!selectedCommandsSet) {\n\t\t\treturn;\n\t\t}\n\t\tsetApplying(true);\n\t\ttry {\n\t\t\tawait ApiFacade.RFApi.fetchDeviceCommandsToMinion(selectedCommandsSet, minion.minionId || '');\n\t\t\t// Show success indicator for X sec.\n\t\t\tsetSuccess(true);\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetSuccess(false);\n\t\t\t}, DEFAULT_SUCCEED_ICON_SHOWN.Milliseconds);\n\t\t} catch (error) {\n\t\t\tawait handleServerRestError(error);\n\t\t}\n\t\tsetApplying(false);\n\t}\n\n\treturn <Grid\n\t\tcontainer\n\t\tdirection=\"column\"\n\t\tjustifyContent=\"center\"\n\t\talignItems=\"stretch\"\n\t>\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<div>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection={'row'}\n\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<Typography style={{ fontSize: fontRatio * 0.3 }} >{t('dashboard.minions.advanced.settings.fetch.commands.set')}</Typography>\n\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.advanced.settings.fetch.commands.set.tip')}</span>}>\n\t\t\t\t\t\t<InfoIcon style={{ fontSize: fontRatio * 0.3, marginTop: fontRatio * -0.2 }} />\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\n\n\n\t\t\t<ThemeTooltip title={<span>{t(`dashboard.minions.advanced.settings.fetch.available.commands`)}</span>} disableFocusListener >\n\t\t\t\t<IconButton\n\t\t\t\t\tdisabled={fetching}\n\t\t\t\t\tonClick={fetchCommands}\n\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t>\n\t\t\t\t\t{/* In case of fetching, show loader icon */}\n\t\t\t\t\t{fetching && <MoreHorizIcon style={{ fontSize: fontRatio * 0.6, color: getModeColor(false, theme) }} />}\n\t\t\t\t\t{(!fetching) && <PlayForWorkIcon style={{ fontSize: fontRatio * 0.6 }} />}\n\t\t\t\t</IconButton>\n\t\t\t</ThemeTooltip>\n\t\t</Grid>\n\t\t<Grid\n\t\t\tstyle={{ width: '100%' }}\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\talignItems=\"flex-end\"\n\t\t>\n\t\t\t{!commandsSet && message && <div style={{ width: '100%', textAlign: 'center', color: theme.palette.text.hint }}>\n\t\t\t\t{message}\n\t\t\t</div>}\n\t\t\t{commandsSet && <Autocomplete\n\t\t\t\tstyle={{ width: '65%' }}\n\t\t\t\toptions={commandsSet}\n\t\t\t\tgetOptionLabel={(option: CommandsRepoDevice) => `${option.brand}, ${option.model}`}\n\t\t\t\tdisabled={applying}\n\t\t\t\tclearText={t('global.clear')}\n\t\t\t\tcloseText={t('global.close')}\n\t\t\t\tnoOptionsText={t('global.no.option')}\n\t\t\t\tonChange={(e, o) => {\n\t\t\t\t\tsetSelectedCommandsSet(o as CommandsRepoDevice);\n\t\t\t\t}}\n\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t<TextField\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tdisabled={applying}\n\t\t\t\t\t\tplaceholder={t('dashboard.minions.advanced.settings.select.commands.set')}\n\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t/>\n\t\t\t}\n\t\t\t{commandsSet && <LoadingButton\n\t\t\t\tstyle={{ minWidth: '30%' }}\n\t\t\t\tloading={applying}\n\t\t\t\tloadingPosition={'center'}\n\t\t\t\tdisabled={!!!selectedCommandsSet || success}\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor={'primary'}\n\t\t\t\tonClick={applyCommands}>\n\t\t\t\t{!success ? <span>{t('global.apply')}</span> : <DoneIcon />}\n\t\t\t</LoadingButton>}\n\t\t</Grid>\n\t</Grid>;\n}\n","import { Grid, IconButton, Theme, Typography, useMediaQuery, useTheme } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\"\nimport { Minion, MinionStatus, MinionTypes } from \"../../../infrastructure/generated/api\";\nimport InfoIcon from '@mui/icons-material/Info';\nimport { useState } from \"react\";\nimport { ApiFacade } from \"../../../infrastructure/generated/proxies/api-proxies\";\nimport { handleServerRestError } from \"../../../services/notifications.service\";\nimport { defaultMinionStatus, isOnMode } from \"../../../logic/common/minionsUtils\";\nimport { getModeColor } from \"../../../logic/common/themeUtils\";\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport DoneIcon from '@mui/icons-material/Done';\nimport SettingsRemoteIcon from '@mui/icons-material/SettingsRemote';\nimport { SwitchEditStatus } from \"../editMinionStatus/SwitchEditStatus\";\nimport { MinionEditStatus } from \"../editMinionStatus/MinionEditStatus\";\nimport MoneyIcon from '@mui/icons-material/Money';\nimport { ThemeTooltip } from \"../../global/ThemeTooltip\";\nimport { DEFAULT_SUCCEED_ICON_SHOWN } from \"../../../infrastructure/consts\";\n\ninterface MinionRecordCommandCommandsProps {\n\tfontRatio: number;\n\tminion: Minion;\n}\n\nexport function MinionRecordCommandCommands(props: MinionRecordCommandCommandsProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\tconst [recordMinionStatus, setRecordMinionStatus] = useState<MinionStatus>(defaultMinionStatus(props.minion.minionType));\n\tconst [recordingSuccess, setRecordingSuccess] = useState<boolean>();\n\tconst [generatingSuccess, setGeneratingSuccess] = useState<boolean>();\n\tconst [recording, setRecording] = useState<boolean>();\n\tconst [generating, setGenerating] = useState<boolean>();\n\n\tconst { fontRatio, minion } = props;\n\n\tasync function recordCommand() {\n\t\tsetRecording(true);\n\t\ttry {\n\t\t\tawait ApiFacade.RFApi.recordMinionCommand(recordMinionStatus, minion.minionId || '');\n\t\t\t// Shown recording success indicator for X sec\n\t\t\tsetRecordingSuccess(true);\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetRecordingSuccess(false);\n\t\t\t}, DEFAULT_SUCCEED_ICON_SHOWN.Milliseconds);\n\t\t} catch (error) {\n\t\t\tawait handleServerRestError(error);\n\t\t}\n\t\tsetRecording(false);\n\t}\n\n\tasync function generateCommand() {\n\t\tsetGenerating(true);\n\t\ttry {\n\t\t\tawait ApiFacade.RFApi.generateMinionCommand(recordMinionStatus, minion.minionId || '');\n\t\t\t// Shown generating success indicator for X sec\n\t\t\tsetGeneratingSuccess(true);\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetGeneratingSuccess(false);\n\t\t\t}, DEFAULT_SUCCEED_ICON_SHOWN.Milliseconds);\n\t\t} catch (error) {\n\t\t\tawait handleServerRestError(error);\n\t\t}\n\t\tsetGenerating(false);\n\t}\n\n\tconst disableActions = recording || generating;\n\n\treturn <Grid\n\t\tcontainer\n\t\tdirection=\"column\"\n\t\tjustifyContent=\"center\"\n\t\talignItems=\"stretch\"\n\t>\n\t\t<Grid\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<div>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection={'row'}\n\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<Typography style={{ fontSize: fontRatio * 0.3 }} >{t('dashboard.minions.advanced.settings.record.commands.title')}</Typography>\n\t\t\t\t\t<ThemeTooltip title={<span>{t('dashboard.minions.advanced.settings.record.commands.tip')}</span>}>\n\t\t\t\t\t\t<InfoIcon style={{ fontSize: fontRatio * 0.3, marginTop: fontRatio * -0.2 }} />\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<ThemeTooltip title={<span>{t(`dashboard.minions.advanced.settings.generate.command`)}</span>} disableFocusListener >\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tdisabled={disableActions || generatingSuccess}\n\t\t\t\t\t\t\tonClick={generateCommand}\n\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{generatingSuccess && <DoneIcon style={{ fontSize: fontRatio * 0.6, color: getModeColor(false, theme) }} />}\n\t\t\t\t\t\t\t{/* In case of generating, show loader icon */}\n\t\t\t\t\t\t\t{!generatingSuccess && generating && <MoreHorizIcon style={{ fontSize: fontRatio * 0.6, color: getModeColor(false, theme) }} />}\n\t\t\t\t\t\t\t{(!generatingSuccess && !generating) && <MoneyIcon style={{ fontSize: fontRatio * 0.6 }} />}\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t<ThemeTooltip title={<span>{t(`dashboard.minions.advanced.settings.record.command`)}</span>} disableFocusListener >\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tdisabled={disableActions || recordingSuccess}\n\t\t\t\t\t\t\tonClick={recordCommand}\n\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{recordingSuccess && <DoneIcon style={{ fontSize: fontRatio * 0.6, color: getModeColor(false, theme) }} />}\n\t\t\t\t\t\t\t{/* In case of loading, show loader icon */}\n\t\t\t\t\t\t\t{!recordingSuccess && recording && <MoreHorizIcon style={{ fontSize: fontRatio * 0.6, color: getModeColor(false, theme) }} />}\n\t\t\t\t\t\t\t{!recordingSuccess && (!recording) && <SettingsRemoteIcon style={{ fontSize: fontRatio * 0.6 }} />}\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t</Grid>\n\t\t<Grid\n\t\t\tstyle={{ width: '100%' }}\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\talignItems=\"flex-end\"\n\t\t>\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tdirection={desktopMode ? 'row' : 'column'}\n\t\t\t\tjustifyContent=\"center\"\n\t\t\t\talignItems=\"center\"\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<SwitchEditStatus\n\t\t\t\t\t\tdisabled={disableActions}\n\t\t\t\t\t\tminionStatus={recordMinionStatus}\n\t\t\t\t\t\tsetMinionStatus={setRecordMinionStatus}\n\t\t\t\t\t\tminionType={props.minion.minionType}\n\t\t\t\t\t\tfontRatio={fontRatio * 0.7}\n\t\t\t\t\t\tsmallFontRatio={fontRatio * 0.7 * 0.5}\n\t\t\t\t\t\tisOn={isOnMode(props.minion.minionType, recordMinionStatus)} />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{props.minion.minionType !== MinionTypes.Toggle && props.minion.minionType !== MinionTypes.Switch &&\n\t\t\t\t\t\t<MinionEditStatus disabled={disableActions} minionStatus={recordMinionStatus} setMinionStatus={setRecordMinionStatus} minionType={props.minion.minionType} fontRatio={fontRatio * 0.7} />}\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t</Grid>\n\t</Grid>;\n}\n","import { Divider, Grid } from \"@material-ui/core\";\nimport { Minion } from \"../../../infrastructure/generated/api\";\nimport { useEffect, useState } from \"react\";\nimport { minionsKindsService } from \"../../../services/minions.kinds.service\";\nimport { MinionAutoTurnOff } from \"./MinionAutoTurnOff\";\nimport { MinionSync } from \"./MinionSync\";\nimport { MinionFetchCommands } from \"./MinionFetchCommands\";\nimport { MinionRecordCommandCommands } from \"./MinionRecordCommandCommands\";\n\ninterface MinionAdvancedSettingsProps {\n\tfontRatio: number;\n\tminion: Minion;\n}\n\nexport function MinionAdvancedSettings(props: MinionAdvancedSettingsProps) {\n\tconst { fontRatio, minion } = props;\n\tconst [isFetchCommandsAvailable, setIsFetchCommandsAvailable] = useState<boolean>();\n\tconst [isRecordingSupported, setIsRecordingSupported] = useState<boolean>();\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tconst devicesKind = await minionsKindsService.getData();\n\t\t\t\tconst device = devicesKind.find(d => d.brand === minion.device.brand && d.model === minion.device.model);\n\t\t\t\tsetIsFetchCommandsAvailable(device?.isFetchCommandsAvailable);\n\t\t\t\tsetIsRecordingSupported(device?.isRecordingSupported)\n\t\t\t} catch (error) {\n\t\t\t\t// Do nothing, \n\t\t\t\t// just the commands supported minions will not be shown the edit commands options.\n\t\t\t}\n\t\t})();\n\t}, [minion.device.brand, minion.device.model]);\n\n\treturn <Grid\n\t\tstyle={{ width: '100%', height: '100%' }}\n\t\tcontainer\n\t\tdirection=\"column\"\n\t\tjustifyContent=\"center\"\n\t\talignItems=\"center\"\n\t>\n\t\t<MinionAutoTurnOff minion={minion} fontRatio={fontRatio} />\n\t\t<Divider style={{ width: '100%', marginTop: fontRatio * 0.2, marginBottom: fontRatio * 0.2 }} variant={'fullWidth'} />\n\t\t<MinionSync minion={minion} fontRatio={fontRatio} />\n\t\t{isFetchCommandsAvailable && <Divider style={{ width: '100%', marginTop: fontRatio * 0.2 }} variant={'fullWidth'} />}\n\t\t{isFetchCommandsAvailable && <MinionFetchCommands minion={minion} fontRatio={fontRatio} />}\n\t\t{isRecordingSupported && <Divider style={{ width: '100%', marginTop: fontRatio * 0.2 }} variant={'fullWidth'} />}\n\t\t{isRecordingSupported && <MinionRecordCommandCommands minion={minion} fontRatio={fontRatio} />}\n\t</Grid>;\n}\n","import { CircularProgress, Grid, IconButton, TextField, useTheme } from \"@material-ui/core\";\nimport { Minion } from \"../../infrastructure/generated/api\";\nimport { useTranslation } from \"react-i18next\";\nimport CloseIcon from '@material-ui/icons/Close';\nimport '../../theme/styles/components/minions/minionEditableName.scss';\nimport { Fragment, useState } from \"react\";\nimport { ApiFacade } from \"../../infrastructure/generated/proxies/api-proxies\";\nimport { minionsService } from \"../../services/minions.service\";\nimport { handleServerRestError } from \"../../services/notifications.service\";\nimport SaveIcon from '@material-ui/icons/Save';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport { getModeColor } from \"../../logic/common/themeUtils\";\nimport RepeatIcon from '@mui/icons-material/Repeat';\nimport RefreshIcon from '@mui/icons-material/Refresh';\nimport { ThemeTooltip } from \"../global/ThemeTooltip\";\n\ninterface MinionBottomControlsProps {\n\tminion: Minion;\n\tfontRatio: number;\n}\n\nconst ACTIVATE_MINION_ROOM_ROOM = false;\n\nexport function MinionBottomControls(props: MinionBottomControlsProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\tconst [editRoomNameMode, setEditRoomNameMode] = useState<boolean>(false);\n\tconst [editingRoomName, setEditingRoomName] = useState<boolean>(false);\n\tconst [editRoomNameError, setEditRoomNameError] = useState<boolean>(false);\n\tconst [editRoomName, setEditRoomName] = useState<string>(props.minion.room || t('global.not.configured'));\n\tconst [redoingStatus, setRedoingStatus] = useState<boolean>(false);\n\tconst [refreshStatus, setRefreshStatus] = useState<boolean>(false);\n\n\tconst { minion, fontRatio } = props;\n\n\tasync function renameRoom() {\n\t\tsetEditingRoomName(true);\n\t\ttry {\n\t\t\tawait ApiFacade.MinionsApi.renameRoom({ room: editRoomName || '' }, minion.minionId || '');\n\t\t\tminion.room = editRoomName || '';\n\t\t\tminionsService.updateMinion(minion);\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetEditingRoomName(false);\n\t}\n\n\tasync function redoMinionStatus() {\n\t\tsetRedoingStatus(true);\n\t\ttry {\n\t\t\tawait ApiFacade.MinionsApi.setMinion(minion.minionStatus, minion.minionId || '');\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetRedoingStatus(false);\n\t}\n\n\tasync function refreshMinionStatus() {\n\t\tsetRefreshStatus(true);\n\t\ttry {\n\t\t\tawait ApiFacade.MinionsApi.rescanMinionStatus(minion.minionId || '');\n\t\t\t// In case of an update, fetch it again\n\t\t\tminionsService.forceFetchData();\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetRefreshStatus(false);\n\t}\n\n\treturn <Fragment>\n\t\t<Grid\n\t\t\tstyle={{ width: '100%' }}\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<div>\n\t\t\t\t{ACTIVATE_MINION_ROOM_ROOM && <Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\tstyle={{ padding: fontRatio * 0.3 }}\n\t\t\t\t>\n\t\t\t\t\t{<div style={{ width: `70%` }}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tstyle={{ width: `100%` }}\n\t\t\t\t\t\t\tdisabled={editingRoomName}\n\t\t\t\t\t\t\terror={editRoomNameError}\n\t\t\t\t\t\t\thelperText={t('global.room')}\n\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\tvalue={editRoomName}\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tsetEditRoomNameError(false);\n\t\t\t\t\t\t\t\tsetEditRoomName(e.target.value);\n\t\t\t\t\t\t\t\tsetEditRoomNameMode(true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{editingRoomName && <CircularProgress size={fontRatio * 0.3} thickness={10} />}\n\t\t\t\t\t\t{!editingRoomName && editRoomNameMode && <ThemeTooltip title={<span>{t('global.save')}</span>} >\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.1, marginLeft: fontRatio * 0.3 }}\n\t\t\t\t\t\t\t\tonClick={renameRoom}\n\t\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t\t<SaveIcon style={{ fontSize: fontRatio * 0.3 }} />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</ThemeTooltip>}\n\t\t\t\t\t\t{!editingRoomName && editRoomNameMode && <ThemeTooltip title={<span>{t('global.cancel')}</span>} >\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.1 }}\n\t\t\t\t\t\t\t\tonClick={() => { setEditRoomNameMode(false); }}\n\t\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t\t<CloseIcon style={{ fontSize: fontRatio * 0.3 }} />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</ThemeTooltip>}\n\t\t\t\t\t</div>\n\t\t\t\t</Grid>}\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<ThemeTooltip title={<span>{t(`dashboard.minions.redo.status.tip`)}</span>} disableFocusListener >\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.2 }}\n\t\t\t\t\t\t\tdisabled={redoingStatus}\n\t\t\t\t\t\t\taria-label={t(`dashboard.minions.redo.status.tip`)}\n\t\t\t\t\t\t\tonClick={redoMinionStatus}\n\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{/* In case of loading, show loader icon */}\n\t\t\t\t\t\t\t{redoingStatus && <MoreHorizIcon style={{ fontSize: fontRatio * 0.7, color: getModeColor(false, theme) }} />}\n\t\t\t\t\t\t\t{!redoingStatus && <RepeatIcon style={{ fontSize: fontRatio * 0.7 }} />}\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t<ThemeTooltip title={<span>{t(`dashboard.minions.sync.status.tip`)}</span>} disableFocusListener >\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tstyle={{ padding: fontRatio * 0.2 }}\n\t\t\t\t\t\t\tdisabled={refreshStatus}\n\t\t\t\t\t\t\taria-label={t(`dashboard.minions.sync.status.tip`)}\n\t\t\t\t\t\t\tonClick={refreshMinionStatus}\n\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{/* In case of loading, show loader icon */}\n\t\t\t\t\t\t\t{refreshStatus && <MoreHorizIcon style={{ fontSize: fontRatio * 0.7, color: getModeColor(false, theme) }} />}\n\t\t\t\t\t\t\t{!refreshStatus && <RefreshIcon style={{ fontSize: fontRatio * 0.7 }} />}\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t</Grid>\n\t</Fragment>\n}","import { Button, Grid, IconButton } from \"@material-ui/core\";\nimport { Minion, MinionStatus } from \"../../infrastructure/generated/api\";\nimport { useHistory } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { DashboardRoutes, SIDE_CONTAINER_DEFAULT_FONT_SIZE } from \"../../infrastructure/consts\";\nimport { MinionPowerToggle } from \"./MinionPowerToggle\";\nimport CloseIcon from '@material-ui/icons/Close';\nimport '../../theme/styles/components/minions/minionFullInfo.scss';\nimport Box from '@mui/material/Box';\nimport LinearProgress from '@mui/material/LinearProgress';\nimport { useState } from \"react\";\nimport { ApiFacade } from \"../../infrastructure/generated/proxies/api-proxies\";\nimport { minionsService } from \"../../services/minions.service\";\nimport { handleServerRestError } from \"../../services/notifications.service\";\nimport { MinionEditableName } from \"./MinionEditableName\";\nimport { MinionEditStatus } from \"./editMinionStatus/MinionEditStatus\";\nimport { AlertDialog } from \"../AlertDialog\";\nimport Accordion from '@mui/material/Accordion';\nimport AccordionSummary from '@mui/material/AccordionSummary';\nimport AccordionDetails from '@mui/material/AccordionDetails';\nimport Typography from '@mui/material/Typography';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport { Theme } from \"@mui/material\";\nimport { MinionTimingsView } from \"../timings/MinionTimingsView\";\nimport { MinionTechInfo } from \"./MinionTechInfo\";\nimport { MinionAdvancedSettings } from \"./advancedSettings/MinionAdvancedSettings\";\nimport { MinionBottomControls } from \"./MinionBottomControls\";\nimport { ThemeTooltip } from \"../global/ThemeTooltip\";\n\nconst DEFAULT_FONT_SIZE = SIDE_CONTAINER_DEFAULT_FONT_SIZE;\n\ninterface MinionFullInfoProps {\n\tminion: Minion;\n}\n\nexport function MinionFullInfo(props: MinionFullInfoProps) {\n\tconst { t } = useTranslation();\n\tconst history = useHistory();\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\n\tconst [deleting, setDeleting] = useState<boolean>(false);\n\tconst [saving, setSaving] = useState<boolean>();\n\tconst [openDeleteAlert, setOpenDeleteAlert] = useState<boolean>(false);\n\n\tconst { minion } = props;\n\n\tasync function deleteMinion() {\n\t\tsetDeleting(true);\n\t\ttry {\n\t\t\tawait ApiFacade.MinionsApi.deleteMinion(minion.minionId || '');\n\t\t\tminionsService.deleteMinion(minion);\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetDeleting(false);\n\t}\n\n\tasync function setMinionStatus(minionStatusToSet: MinionStatus) {\n\t\tsetSaving(true);\n\t\ttry {\n\t\t\tawait ApiFacade.MinionsApi.setMinion(minionStatusToSet, minion.minionId || '');\n\t\t\tminion.minionStatus = minionStatusToSet;\n\t\t\tminionsService.updateMinion(minion);\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetSaving(false);\n\t}\n\n\treturn <div className=\"page-full-info-area\">\n\t\t<Grid\n\t\t\tclassName=\"page-full-info-container\"\n\t\t\tcontainer\n\t\t\tdirection=\"column\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\talignItems=\"stretch\"\n\t\t>\n\t\t\t{/* Header: (status toggle, name and close) */}\n\t\t\t<div className=\"minion-full-info-part\">\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\talignItems=\"flex-start\"\n\t\t\t\t>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<MinionPowerToggle minion={minion} fontRatio={DEFAULT_FONT_SIZE} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{ width: `calc(100% - ${(DEFAULT_FONT_SIZE + 15) * 2}px)` }}>\n\t\t\t\t\t\t<MinionEditableName {...props} fontRatio={DEFAULT_FONT_SIZE} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ThemeTooltip title={<span>{t('global.close')}</span>}>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tonClick={() => { history.push(DashboardRoutes.minions.path); }}\n\t\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t\t<CloseIcon style={{ fontSize: DEFAULT_FONT_SIZE * 0.70 }} />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t</div>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t\t{/* Minion status properties */}\n\t\t\t<div className=\"minion-full-info-part\">\n\t\t\t\t<MinionEditStatus\n\t\t\t\t\tminionStatus={minion.minionStatus}\n\t\t\t\t\tminionType={minion.minionType}\n\t\t\t\t\tsetMinionStatus={setMinionStatus}\n\t\t\t\t\tdisabled={saving}\n\t\t\t\t\tfontRatio={desktopMode ? DEFAULT_FONT_SIZE : DEFAULT_FONT_SIZE * 0.7}\n\t\t\t\t\tsmallFontRatio={desktopMode ? DEFAULT_FONT_SIZE * 0.5 : DEFAULT_FONT_SIZE * 0.5 * 0.7} />\n\t\t\t\t<div style={{ padding: `${DEFAULT_FONT_SIZE * 0.3}px` }}>\n\t\t\t\t\t{saving && <LinearProgress color={'inherit'} />}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"minion-full-info-part\">\n\t\t\t\t{/* Only to take a place */}\n\t\t\t</div>\n\t\t\t<div className=\"minion-full-info-part\">\n\t\t\t\t<MinionBottomControls minion={minion} fontRatio={DEFAULT_FONT_SIZE} />\n\t\t\t\t<div className=\"minion-advanced-option-container\">\n\t\t\t\t\t<Accordion>\n\t\t\t\t\t\t<AccordionSummary\n\t\t\t\t\t\t\texpandIcon={<ExpandMoreIcon />}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Typography>{t('global.timings')}</Typography>\n\t\t\t\t\t\t</AccordionSummary>\n\t\t\t\t\t\t<AccordionDetails>\n\t\t\t\t\t\t\t{/* TODO: make it lazy loading */}\n\t\t\t\t\t\t\t<div className=\"minion-timings-area\">\n\t\t\t\t\t\t\t\t<MinionTimingsView minion={minion} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</AccordionDetails>\n\t\t\t\t\t</Accordion>\n\t\t\t\t\t<Accordion>\n\t\t\t\t\t\t<AccordionSummary\n\t\t\t\t\t\t\texpandIcon={<ExpandMoreIcon />}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Typography>{t('global.advanced.settings')}</Typography>\n\t\t\t\t\t\t</AccordionSummary>\n\t\t\t\t\t\t<AccordionDetails>\n\t\t\t\t\t\t\t<MinionAdvancedSettings key={minion.minionId} fontRatio={DEFAULT_FONT_SIZE} minion={minion} />\n\t\t\t\t\t\t</AccordionDetails>\n\t\t\t\t\t</Accordion>\n\t\t\t\t\t<Accordion>\n\t\t\t\t\t\t<AccordionSummary\n\t\t\t\t\t\t\texpandIcon={<ExpandMoreIcon />}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Typography>{t('dashboard.minions.minion.tech.info')}</Typography>\n\t\t\t\t\t\t</AccordionSummary>\n\t\t\t\t\t\t<AccordionDetails>\n\t\t\t\t\t\t\t<MinionTechInfo fontRatio={DEFAULT_FONT_SIZE} minion={minion} />\n\t\t\t\t\t\t</AccordionDetails>\n\t\t\t\t\t</Accordion>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"minion-delete-container\">\n\t\t\t\t\t<AlertDialog\n\t\t\t\t\t\topen={openDeleteAlert}\n\t\t\t\t\t\tcancelText={t('global.cancel')}\n\t\t\t\t\t\tsubmitText={t('dashboard.minions.delete.minion')}\n\t\t\t\t\t\ttitle={t('dashboard.minions.delete.minion.alert.title', { name: minion.name })}\n\t\t\t\t\t\ttext={t('dashboard.minions.delete.minion.alert.text', { name: minion.name })}\n\t\t\t\t\t\tonCancel={() => setOpenDeleteAlert(false)}\n\t\t\t\t\t\tonSubmit={() => { setOpenDeleteAlert(false); deleteMinion(); }}\n\t\t\t\t\t\tsubmitColor={'error'}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button disabled={deleting} variant=\"contained\" style={{ width: '100%' }} onClick={() => setOpenDeleteAlert(true)}>\n\t\t\t\t\t\t<Box sx={{ width: '100%' }}>\n\t\t\t\t\t\t\t{t('dashboard.minions.delete.minion')}\n\t\t\t\t\t\t\t{deleting && <LinearProgress color=\"error\" />}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Grid>\n\t</div>;\n}\n","import { Button, Grid, TextField, useTheme } from \"@material-ui/core\";\nimport { DeviceKind, LocalNetworkDevice } from \"../../infrastructure/generated/api\";\nimport { useHistory } from \"react-router-dom\";\nimport { Trans, useTranslation } from \"react-i18next\";\nimport { DashboardRoutes, SERVER_REPO_URL, SIDE_CONTAINER_DEFAULT_FONT_SIZE } from \"../../infrastructure/consts\";\nimport '../../theme/styles/components/minions/minionFullInfo.scss';\nimport { useEffect, useState } from \"react\";\nimport { ApiFacade } from \"../../infrastructure/generated/proxies/api-proxies\";\nimport { minionsService } from \"../../services/minions.service\";\nimport { handleServerRestError } from \"../../services/notifications.service\";\nimport Typography from '@mui/material/Typography';\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport { Theme } from \"@mui/material\";\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport { minionsKindsService } from \"../../services/minions.kinds.service\";\nimport { devicesService } from \"../../services/devices.service\";\nimport Autocomplete from '@mui/material/Autocomplete';\nimport '../../theme/styles/components/minions/minionFullInfo.scss';\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\nimport Link from '@mui/material/Link';\nimport { compareIpByDevicePart } from \"../../infrastructure/utils\";\n\nconst DEFAULT_FONT_SIZE = SIDE_CONTAINER_DEFAULT_FONT_SIZE;\n\n/**\n * The sort formula for sorting devices by name -> ip -> mac\n */\nfunction sortDevicesFormula(a: LocalNetworkDevice, b: LocalNetworkDevice): number {\n\tif (a.name && b.name) {\n\t\treturn a.name < b.name ? 1 : -1;\n\t}\n\n\tif (a.name) {\n\t\treturn 1;\n\t}\n\n\tif (b.name) {\n\t\treturn -1;\n\t}\n\n\tif (a.ip && b.ip) {\n\t\treturn compareIpByDevicePart(a.ip, b.ip);\n\t}\n\n\tif (a.ip) {\n\t\treturn 1;\n\t}\n\n\tif (b.ip) {\n\t\treturn -1;\n\t}\n\n\treturn a.mac < b.mac ? 1 : -1;\n}\n\ninterface CreateMinionInputProps {\n\tchildren: JSX.Element;\n\ttext: string;\n\tdisabled?: boolean;\n}\n\nfunction CreateMinionInput(props: CreateMinionInputProps) {\n\tconst theme = useTheme();\n\n\treturn <div style={{ width: '100%' }}>\n\t\t<Grid\n\t\t\tstyle={{ width: '100%' }}\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<div style={{ color: props.disabled ? theme.palette.text.hint : undefined }}>{props.text}{!props.disabled && '*'}</div>\n\t\t\t<div style={{ width: '75%' }} >{props.children}</div>\n\t\t</Grid>\n\t</div>;\n}\n\nexport function CreateMinion() {\n\tconst { t } = useTranslation();\n\tconst history = useHistory();\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\n\tconst [creating, setCreating] = useState<boolean>();\n\t/** A tree of the minions kind, map by brand -> model -> @see DeviceKind object */\n\tconst [minionsKindsTree, setMinionsKindsTree] = useState<{ [key: string]: { [key: string]: DeviceKind } }>({});\n\tconst [devices, setDevices] = useState<LocalNetworkDevice[]>([]);\n\tconst [name, setName] = useState<string>();\n\tconst [nameError, setNameError] = useState<boolean>();\n\tconst [brand, setBrand] = useState<string>();\n\tconst [brandError, setBrandError] = useState<boolean>();\n\tconst [model, setModel] = useState<string>();\n\tconst [modelError, setModelError] = useState<boolean>();\n\tconst [device, setDevice] = useState<LocalNetworkDevice>();\n\tconst [deviceError, setDeviceError] = useState<boolean>();\n\tconst [deviceId, setDeviceId] = useState<string>();\n\tconst [deviceIdError, setDeviceIdError] = useState<boolean>();\n\tconst [token, setToken] = useState<string>();\n\tconst [tokenError, setTokenError] = useState<boolean>();\n\n\tuseEffect(() => {\n\t\t// Fetch minions kinds, and the devices collection\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\t// First get all devices, sort and keep them\n\t\t\t\tconst devices = await devicesService.getData();\n\t\t\t\tconst sortedDevices = devices.sort(sortDevicesFormula);\n\t\t\t\tsetDevices(sortedDevices);\n\n\t\t\t\t// Then, get minions kinds, and build the tree\n\t\t\t\tconst minionsKinds = await minionsKindsService.getData();\n\t\t\t\t// Build the minionsKinds tree/map\n\t\t\t\tconst minionsKindsBuilder: typeof minionsKindsTree = {};\n\t\t\t\tfor (const minionsKind of minionsKinds) {\n\t\t\t\t\tif (!minionsKindsBuilder[minionsKind.brand]) {\n\t\t\t\t\t\tminionsKindsBuilder[minionsKind.brand] = {};\n\t\t\t\t\t}\n\t\t\t\t\tminionsKindsBuilder[minionsKind.brand][minionsKind.model] = minionsKind;\n\t\t\t\t}\n\t\t\t\tsetMinionsKindsTree(minionsKindsBuilder);\n\t\t\t} catch (error) {\n\t\t\t\thandleServerRestError(error);\n\t\t\t}\n\t\t})();\n\t}, []);\n\n\t/**\n\t * Verify the minion is ready for creation\n\t * @returns True when ever all required fields are OK \n\t */\n\tfunction validateInputs(): boolean {\n\t\tlet validated = true;\n\n\t\tif (!name) {\n\t\t\tvalidated = false;\n\t\t\tsetNameError(true);\n\t\t}\n\n\t\tif (!device) {\n\t\t\tvalidated = false;\n\t\t\tsetDeviceError(true);\n\t\t}\n\n\t\tif (!brand) {\n\t\t\tvalidated = false;\n\t\t\tsetBrandError(true);\n\t\t}\n\n\t\tif (!model) {\n\t\t\tvalidated = false;\n\t\t\tsetModelError(true);\n\t\t}\n\n\t\tif (!brand || !model) {\n\t\t\treturn validated;\n\t\t}\n\n\t\tconst deviceKind = minionsKindsTree[brand][model];\n\n\t\tif (deviceKind.isIdRequired && !deviceId) {\n\t\t\tvalidated = false;\n\t\t\tsetDeviceIdError(true);\n\t\t}\n\n\t\tif (deviceKind.isTokenRequired && !token) {\n\t\t\tvalidated = false;\n\t\t\tsetTokenError(true);\n\t\t}\n\t\treturn validated;\n\t}\n\n\t/**\n\t * Create the new minion\n\t */\n\tasync function createMinion() {\n\t\t// If not ready, abort\n\t\tif (!validateInputs()) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetCreating(true);\n\n\t\t// For lint only (the validateInputs passed)\n\t\tif (!device || !name || !brand || !model) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait ApiFacade.MinionsApi.createMinion({\n\t\t\t\tname,\n\t\t\t\tminionStatus: {},\n\t\t\t\tminionType: minionsKindsTree[brand][model].supportedMinionType,\n\t\t\t\tdevice: {\n\t\t\t\t\tbrand,\n\t\t\t\t\tmodel,\n\t\t\t\t\tdeviceId,\n\t\t\t\t\ttoken,\n\t\t\t\t\tpysicalDevice: {\n\t\t\t\t\t\tmac: device.mac\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tawait minionsService.forceFetchData();\n\t\t\t// Once it's succeed, close create minion view\n\t\t\tclose();\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetCreating(false);\n\n\t}\n\n\t/** Close create minion view  */\n\tfunction close() {\n\t\thistory.push(DashboardRoutes.minions.path);\n\t}\n\n\t// Hold selected minion kind to create (if selected)\n\tconst selectedMinionKind = brand && model ? minionsKindsTree[brand][model] : undefined;\n\n\treturn <div className=\"page-full-info-area\">\n\t\t<Grid\n\t\t\tclassName={'page-full-info-container'}\n\t\t\tstyle={{ padding: DEFAULT_FONT_SIZE * 0.4 }}\n\t\t\tcontainer\n\t\t\tdirection=\"column\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\talignItems=\"stretch\"\n\t\t>\n\t\t\t<div style={{ width: '100%', textAlign: 'center' }}>\n\t\t\t\t<Typography variant=\"h4\" >{t('dashboard.minions.create.new.title')}</Typography>\n\t\t\t</div>\n\t\t\t<div style={{ width: '100%', maxHeight: 'calc(100% - 100px)', overflowY: 'auto', overflowX: 'hidden' }}>\n\t\t\t\t<Grid\n\t\t\t\t\tstyle={{ width: '100%', height: '100%', minHeight: DEFAULT_FONT_SIZE * 8 }}\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\tjustifyContent=\"space-evenly\"\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<CreateMinionInput text={t('dashboard.minions.create.new.name')}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tstyle={{ width: `100%` }}\n\t\t\t\t\t\t\tdisabled={creating}\n\t\t\t\t\t\t\terror={nameError}\n\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\t\tplaceholder={t('dashboard.minions.create.new.name.placeholder')}\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tsetNameError(false);\n\t\t\t\t\t\t\t\tsetName(e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CreateMinionInput>\n\t\t\t\t\t<CreateMinionInput text={t('dashboard.minions.create.new.device')}>\n\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\toptions={devices}\n\t\t\t\t\t\t\tdisabled={creating}\n\t\t\t\t\t\t\tgetOptionLabel={(option: LocalNetworkDevice) => `${option.name} ${option.ip} ${option.mac}`}\n\t\t\t\t\t\t\tclearText={t('global.clear')}\n\t\t\t\t\t\t\tcloseText={t('global.close')}\n\t\t\t\t\t\t\tnoOptionsText={t('global.no.option')}\n\t\t\t\t\t\t\tonChange={(e, o) => {\n\t\t\t\t\t\t\t\tsetDeviceError(false);\n\t\t\t\t\t\t\t\tsetDevice(o as LocalNetworkDevice);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\tplaceholder={t('dashboard.minions.create.new.device.placeholder')}\n\t\t\t\t\t\t\t\t\tdisabled={creating}\n\t\t\t\t\t\t\t\t\terror={deviceError}\n\t\t\t\t\t\t\t\t\tvariant=\"standard\"\n\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CreateMinionInput>\n\t\t\t\t\t<CreateMinionInput text={t('dashboard.minions.create.new.brand')}>\n\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\toptions={Object.keys(minionsKindsTree).sort()}\n\t\t\t\t\t\t\tclearText={t('global.clear')}\n\t\t\t\t\t\t\tcloseText={t('global.close')}\n\t\t\t\t\t\t\tnoOptionsText={t('global.no.option')}\n\t\t\t\t\t\t\tdisabled={creating}\n\t\t\t\t\t\t\tonChange={(e, o) => {\n\t\t\t\t\t\t\t\tsetBrandError(false);\n\t\t\t\t\t\t\t\tsetBrand(o as string);\n\t\t\t\t\t\t\t\t// Once brand has changed, reset model selection\n\t\t\t\t\t\t\t\tsetModel(undefined);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\tplaceholder={t('dashboard.minions.create.new.brand.placeholder')}\n\t\t\t\t\t\t\t\t\tdisabled={creating}\n\t\t\t\t\t\t\t\t\terror={brandError}\n\t\t\t\t\t\t\t\t\tvariant=\"standard\"\n\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CreateMinionInput>\n\t\t\t\t\t<CreateMinionInput text={t('dashboard.minions.create.new.model')}>\n\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\t// Once brand has changed, force component reset\n\t\t\t\t\t\t\tkey={brand}\n\t\t\t\t\t\t\toptions={brand ? Object.keys(minionsKindsTree[brand]).sort() : []}\n\t\t\t\t\t\t\tclearText={t('global.clear')}\n\t\t\t\t\t\t\tcloseText={t('global.close')}\n\t\t\t\t\t\t\tnoOptionsText={t('global.no.option')}\n\t\t\t\t\t\t\tdisabled={creating || !brand}\n\t\t\t\t\t\t\tonChange={(e, o) => {\n\t\t\t\t\t\t\t\tsetModelError(false);\n\t\t\t\t\t\t\t\tsetModel(o as string);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\tplaceholder={t('dashboard.minions.create.new.model.placeholder')}\n\t\t\t\t\t\t\t\t\tdisabled={creating || !brand}\n\t\t\t\t\t\t\t\t\terror={modelError}\n\t\t\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CreateMinionInput>\n\t\t\t\t\t<CreateMinionInput\n\t\t\t\t\t\ttext={t('dashboard.minions.create.new.device.id')}\n\t\t\t\t\t\tdisabled={creating || !selectedMinionKind?.isIdRequired}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tstyle={{ width: `100%` }}\n\t\t\t\t\t\t\tdisabled={creating || !selectedMinionKind?.isIdRequired}\n\t\t\t\t\t\t\terror={selectedMinionKind?.isIdRequired && deviceIdError}\n\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\tvalue={selectedMinionKind?.isIdRequired ? deviceId : ''}\n\t\t\t\t\t\t\tplaceholder={t('dashboard.minions.create.new.device.id.placeholder')}\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tsetDeviceIdError(false);\n\t\t\t\t\t\t\t\tsetDeviceId(e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CreateMinionInput>\n\t\t\t\t\t<CreateMinionInput\n\t\t\t\t\t\ttext={t('dashboard.minions.create.new.token')}\n\t\t\t\t\t\tdisabled={creating || !selectedMinionKind?.isTokenRequired}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tstyle={{ width: `100%` }}\n\t\t\t\t\t\t\tdisabled={creating || !selectedMinionKind?.isTokenRequired}\n\t\t\t\t\t\t\terror={selectedMinionKind?.isTokenRequired && tokenError}\n\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\tvalue={selectedMinionKind?.isTokenRequired ? token : ''}\n\t\t\t\t\t\t\tplaceholder={t('dashboard.minions.create.new.token.placeholder')}\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tsetTokenError(false);\n\t\t\t\t\t\t\t\tsetToken(e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CreateMinionInput>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t\t<div style={{ marginBottom: DEFAULT_FONT_SIZE * 0.7 }}>\n\t\t\t\t<Grid\n\t\t\t\t\tstyle={{ width: `100%` }}\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tjustifyContent=\"space-around\"\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<HelpOutlineIcon />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{ width: `80%` }}>\n\t\t\t\t\t\t<Trans i18nKey=\"dashboard.minions.create.minion.info\">\n\t\t\t\t\t\t\tFor more information about the supported devices, connect a device to the local network and troubleshooting see\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: 3, marginRight: 3 }}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\thref={`${SERVER_REPO_URL}/tree/development/backend/src/modules#how-to-connect-my-device-to-the-local-network-and-how-to-add-it-to-be-managed-by-the-casa-net-server`}>\n\t\t\t\t\t\t\t\tcasanet modules documentation\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Trans>\n\t\t\t\t\t</div>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t\t<div style={{ width: '100%' }}>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\talignItems=\"flex-end\"\n\t\t\t\t>\n\t\t\t\t\t<Button disabled={creating} variant=\"contained\" onClick={close}>{t('global.cancel')}</Button>\n\t\t\t\t\t<LoadingButton\n\t\t\t\t\t\tstyle={{ minWidth: desktopMode ? 200 : 0 }}\n\t\t\t\t\t\tloading={creating}\n\t\t\t\t\t\tdisabled={creating}\n\t\t\t\t\t\tloadingPosition={desktopMode ? 'start' : 'center'}\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor={'primary'}\n\t\t\t\t\t\tonClick={createMinion}>\n\t\t\t\t\t\t{t('dashboard.minions.create.minion')}\n\t\t\t\t\t</LoadingButton>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t</Grid>\n\t</div>;\n}\n","import { Grid, Paper, Slider, useMediaQuery, Theme, IconButton } from \"@material-ui/core\";\nimport AddIcon from '@material-ui/icons/Add';\nimport Remove from '@material-ui/icons/Remove';\nimport { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport '../../theme/styles/minions.scss';\nimport { LocalStorageKey, setLocalStorageItem, getLocalStorageItem } from \"../../infrastructure/local-storage\";\nimport { Minion } from \"../../infrastructure/generated/api\";\nimport { MinionOverview } from \"../../components/minions/MinionOverview\";\nimport { minionsService } from \"../../services/minions.service\";\nimport { CREATE_MINION_PATH, GRID_CARDS_RATION_STEP } from \"../../infrastructure/consts\";\nimport { MinionFullInfo } from \"../../components/minions/MinionFullInfo\";\nimport { useLocation, useParams } from \"react-router-dom\";\nimport { Loader } from \"../../components/Loader\";\nimport { DashboardPageInjectProps } from \"../Dashboard\";\nimport { mapMinionTypeToDisplay } from \"../../logic/common/minionsUtils\";\nimport { NoContent } from \"../../components/NoContent\";\nimport WbIncandescentIcon from '@material-ui/icons/WbIncandescent';\nimport { ThemeTooltip } from \"../../components/global/ThemeTooltip\";\nimport { CreateMinion } from \"../../components/minions/CreateMinion\";\nimport { useData } from \"../../hooks/useData\";\nimport { PageLayout } from \"../../components/layouts/PageLayout\";\n\n// The default minion card size\nconst defaultWidth = 410;\nconst defaultHeight = 240;\n\n// The max/min ration (in %) to change from the default size\nconst maxRation = 100;\nconst minRation = 25;\nconst defaultRation = 40;\n\nexport default function Minions(props: DashboardPageInjectProps) {\n\tconst { t } = useTranslation();\n\tconst { id } = useParams<{ id: string }>();\n\tconst location = useLocation();\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\tconst [minions, loading] = useData(minionsService, []);\n\n\tconst [sizeRatio, setSizeRatio] = useState<number>(getLocalStorageItem<number>(LocalStorageKey.MinionsCardRatio, { itemType: 'number' }) || defaultRation);\n\tconst [filteredMinions, setFilteredMinion] = useState<Minion[]>([]);\n\n\tuseEffect(() => {\n\t\t// every time the minion collection has changed or the search term changed, re-calc the filtered minions\n\t\tcalcMinionsFilter(minions);\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [minions, props.searchText]);\n\n\tfunction calcMinionsFilter(minions: Minion[]) {\n\t\tconst searchString = props.searchText?.trim().toLowerCase() || '';\n\t\t// In case of empty search term, \"clone\" collection anyway to avoid sort cache issue\n\t\tconst filteredMinions = !searchString ? [...minions] : minions.filter(m => {\n\t\t\t// If the name match, return true\n\t\t\tif (m.name.toLowerCase().includes(searchString)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t// Check if the minion type match to the search term\n\t\t\treturn t(mapMinionTypeToDisplay[m.minionType])?.toLowerCase()?.includes(searchString);\n\t\t});\n\t\tsetFilteredMinion(filteredMinions);\n\t}\n\n\tfunction applyNewSizeRation(newRation: number) {\n\t\tsetSizeRatio(newRation);\n\t\tsetLocalStorageItem<number>(LocalStorageKey.MinionsCardRatio, newRation, { itemType: 'number' });\n\t}\n\n\tfunction handleRationScrollChange(event: any, newValue: number | number[]) {\n\t\tapplyNewSizeRation(newValue as number);\n\t};\n\n\t// Calc the minions size px \n\tconst calcRationPercents = sizeRatio / 100;\n\tconst calculatedWidth = defaultWidth * calcRationPercents;\n\tconst calculatedHeight = defaultHeight * calcRationPercents;\n\n\tconst selectedMinion = minions.find(m => id === m.minionId);\n\n\t// Show minion info if there is an id and the id match some minion\n\tconst showMinionFullInfo = !!id && !!selectedMinion;\n\n\t// Show minion creation view, if the path match minion creation  \n\tconst showCreateMinion = location?.pathname === CREATE_MINION_PATH;\n\n\t// Show side view in case of minion selected or minion creation\n\tconst minionSideContainer = showMinionFullInfo || showCreateMinion;\n\n\tif (loading) {\n\t\treturn <Loader />;\n\t}\n\n\t// If there are no any minion, show proper message\n\tif (minions.length === 0) {\n\t\treturn <NoContent Icon={WbIncandescentIcon} message={t('dashboard.minions.no.minions.message')} />\n\t}\n\n\t// If there are no any minion match the search, show proper message\n\tif (filteredMinions.length === 0) {\n\t\treturn <NoContent Icon={WbIncandescentIcon} message={t('dashboard.minions.no.minions.match.message')} />\n\t}\n\n\t// As default, the side info is empty\n\tlet SideInfo = <div></div>;\n\tif (showMinionFullInfo) {\n\t\tSideInfo = <MinionFullInfo minion={selectedMinion} />;\n\t}\n\tif (showCreateMinion) {\n\t\tSideInfo =  <CreateMinion />;\n\t}\n\n\treturn <PageLayout\n\t\tshowSideInfo={minionSideContainer}\n\t\tsideInfo={SideInfo}\n\t>\n\t\t<div className={'minions-container'} >\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tdirection=\"row\"\n\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\talignItems=\"flex-start\"\n\t\t\t>\n\t\t\t\t{filteredMinions.map((minion) =>\n\t\t\t\t\t<div className={`minion-grid-box-container ${!desktopMode && '--mobile'}`} key={minion.minionId}>\n\t\t\t\t\t\t<Paper className=\"\" elevation={3}>\n\t\t\t\t\t\t\t{/* Set the minion card content container size  */}\n\t\t\t\t\t\t\t<div className=\"minion-grid-box\" style={{ width: `${calculatedWidth}px`, height: `${calculatedHeight}px` }}>\n\t\t\t\t\t\t\t\t<MinionOverview minion={minion} ratio={sizeRatio} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t</div>)}\n\t\t\t</Grid>\n\t\t\t{/* The grid card size ratio scroll */}\n\t\t\t<div className={`resize-slider-container ${minionSideContainer && '--minion-full-info-enabled'} ${!desktopMode && '--mobile'}`}>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection={desktopMode ? 'row' : 'column-reverse'}\n\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ThemeTooltip className=\"resize-slider-icon-tip\" title={<span>{t('dashboard.minions.decrease.card.ration')}</span>} enterDelay={100}>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tonClick={() => { sizeRatio > minRation && applyNewSizeRation(sizeRatio - GRID_CARDS_RATION_STEP); }}\n\t\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t\t<Remove />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={`resize-slider ${!desktopMode && '--mobile'}`}>\n\t\t\t\t\t\t<Slider orientation={desktopMode ? 'horizontal' : 'vertical'} value={sizeRatio} onChange={handleRationScrollChange} min={minRation} max={maxRation} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ThemeTooltip className=\"resize-slider-icon-tip\" title={<span>{t('dashboard.minions.increase.card.ration')}</span>} enterDelay={100}>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tonClick={() => { sizeRatio < maxRation && applyNewSizeRation(sizeRatio + GRID_CARDS_RATION_STEP); }}\n\t\t\t\t\t\t\t\tcolor=\"inherit\">\n\t\t\t\t\t\t\t\t<AddIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</ThemeTooltip>\n\t\t\t\t\t</div>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t</div>\n\t</PageLayout>;\n}\n"],"sourceRoot":""}